apex.model={},function(a,b,c,d,e){"use strict";function f(a){if("string"==typeof a)return[a,null];if(B(a)&&2===a.length&&"string"==typeof a[0]&&(null===a[1]||"string"==typeof a[1]))return a;throw new Error("Invalid model id")}function g(a,b){return Math.floor(a/b)*b}function h(a){var b,c;if(B(a)){for(c=[],b=0;b<a.length;b++)c.push(h(a[b]));return c}return C(a)?A(!0,{},a):a}function i(a){var b,c;if(B(a))for(c=[],b=0;b<a.length;b++)c[b]=h(a[b]);else{c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=h(a[b]))}return c}function j(a,b,c){var d,e=a._listeners;for(d=0;d<e.length;d++)e[d].onChange(b,c)}function k(a,b,c,d,e){a?b.call(a,c,d,e):b(c,d,e)}function l(a){return"string"==typeof a?a:B(a)?1===a.length?""+a[0]:JSON.stringify(a):a.toString()}function m(a){var b,c=a._listeners,e=[];for(b=0;b<c.length;b++)c[b].progressView&&e.push(c[b].progressView);return 0===e.length?null:function(){var a,b,c=d();for(a=0;a<e.length;a++)b=apex.util.showSpinner(e[a]),c=c.add(b);return function(){c.remove()}}}function n(a,b,c,d){var e,f;return f=a,d&&(f+=" Server status: "+d),e=new Error(f),b.status>=0&&(e.status=b.status),e}function o(a,b){var c,d;delete a.error,delete a.warning,delete a.message;for(c in a.fields)a.fields.hasOwnProperty(c)&&(d=a.fields[c],b||delete d.changed,delete d.error,delete d.warning,delete d.message)}function p(a,b,c,d,e){var f;return b===-1&&(b=0),c===-1&&(c=b+a*d),f=c-b,b+f/(d+1)*e}function q(a){var b,c=f(a);return b=w[c[0]],b&&(b=c[1]?b.instances[c[1]]:b.model),b}function r(a,b,c,d){function e(a){for(var b,c=a,d=f(c.modelId());d;){if(d[0]===l[0]&&(d[1]===l[1]||null===l[1]))return!0;d=null,b=c.getOption("parentModel"),b&&(c=q(b),c&&(d=f(b)))}return!1}function g(d){var f=!(!c&&!d._options.regionId);return f&&("change"===a?f=d.isChanged():"error"===a&&(f=d.hasErrors()),f&&b&&(f=e(d))),f}function h(a,b){m.push({id:a,model:b})}function i(a,b){var c;a.model&&g(a.model)&&h(b,a.model);for(c in a.instances)a.instances.hasOwnProperty(c)&&g(a.instances[c])&&h([b,c],a.instances[c])}var j,k,l=d?f(d):null,m=[];if(l||(b=!1),!b&&l&&l[0])k=l[0],j=w[k],j&&(l[1]?j.instances[l[1]]&&g(j.instances[l[1]])&&h([k,l[1]],j.instances[l[1]]):i(j,k));else for(k in w)w.hasOwnProperty(k)&&(j=w[k],i(j,k));return m}function s(a){var b;b=x.indexOf(a),b>=0&&x.splice(b,1)}function t(a){var b;b=x.indexOf(a),b>=0&&x.splice(b,1),x.push(a)}function u(){var a,b;for(a=0;a<x.length;a++)if(b=x[a],!b.isChanged())return b;return null}var v=10,w={},x=[],y=100,z=v,A=d.extend,B=d.isArray,C=d.isPlainObject,D=d.isFunction,E=d.Deferred,F={modelId:function(){return null===this.instance?this.name:[this.name,this.instance]},fetch:function(a,b,c){function d(a){var b,c=r._data;if(0===a)return 0;for(b=a;b<c.length&&c[b]!==e;b++);return b}var f,h,i,j,k,l,o,p,q,r=this,s=this._options,t=E();if("number"!=typeof a&&(c=b,b=a,a=0),"table"===s.shape){if(q=g(a,s.pageSize),a=d(q),this._haveAllData&&a>=this._data.length||this._masterRecordIsInserted||this._masterRecordIsDeleted)return!1;p=this._getServerOffset(a),o=q+s.pageSize-a,o<s.pageSize&&this._data[q+s.pageSize]===e&&(o+=s.pageSize),k={version:s.version,firstRow:p+1,maxRows:o}}else k={version:s.version};return this._requestsInProgress.fetch?null:(l=A({},s.regionData,{id:s.regionId,ajaxIdentifier:s.ajaxIdentifier,fetchData:A({},s.fetchData,k)}),i={regions:[l]},s.pageItemsToSubmit&&(i.pageItems=s.pageItemsToSubmit),this._addParentItems(i.regions[0]),j={},c||(j.loadingIndicator=m(this)),this._requestsInProgress.fetch=!0,f=this._callServer(i,j),f.done(function(b){var c,d=null,e=null,f=null,g=null,h=null;delete r._requestsInProgress.fetch,r._requestsInProgress.abortFetch?(delete r._requestsInProgress.abortFetch,t.reject(n("Error: Aborted when model cleared",{status:0},"abort"))):(c=b.regions[0].fetchedData,"table"===s.shape?(d=c.values,e=c.totalRows,f=c.firstRow-1,g=c.moreData,h=c.dataOverflow):"tree"===s.shape?d=c.root:"record"===s.shape&&(d=c.value),r._addData(a,f,d,e,g,h),t.resolve())}).fail(function(a,b,c){delete r._requestsInProgress.fetch,t.reject(n("Error retrieving data.",a,b,c))}),h=t.promise(),b&&h.always(b),h.always(function(a){r._drainWaiters(a)}),h)},fetchAll:function(a){function b(){var e=c.fetch(d,function(e){e?a({error:e}):(a({offset:d,total:c.getTotalRecords(),done:!1}),d+=f,b())},!0);null===e?setTimeout(function(){b()},500):e===!1&&a({offset:d,total:c.getTotalRecords(),done:!0})}var c=this,d=0,e=this._options,f=e.pageSize;if("table"!==e.shape)throw new Error("Model has invalid shape for the fetchAll method");for(;this._data[d];)d+=1;b()},fetchRecords:function(a,b){var c,d,f,g,h,i,j,k,l=this,o=this._options,p=[],q=E();if("record"===o.shape)throw new Error("Model has invalid shape for the fetchRecords method");if(this._identityKeys===e)throw new Error("Model must have identityField defined");for(c=0;c<a.length;c++)f=this._getIdentity(a[c]),g=this.getRecordMetadata(f),g&&!g.inserted&&p.push(this._getPrimaryKey(a[c]));return 0===p.length?null:(k=A({},o.regionData,{id:o.regionId,ajaxIdentifier:o.ajaxIdentifier,fetchData:A({},o.fetchData,{version:o.version,primaryKeys:p})}),i={regions:[k]},o.pageItemsToSubmit&&(i.pageItems=o.pageItemsToSubmit),this._addParentItems(i.regions[0]),j={loadingIndicator:m(this)},d=this._callServer(i,j),d.done(function(a){var b,c;b=a.regions[0].fetchedData,c=b.values,l._updateData(c),q.resolve()}).fail(function(a,b,c){q.reject(n("Error retrieving data.",a,b,c))}),h=q.promise(),b&&h.always(b),h)},save:function(a){var b,c,d,e,f,g=E();return f={loadingIndicator:m(this)},e={},(c=this.addChangesToSaveRequest(e))?(b=this._callServer(e,f),c(b),b.done(function(a){a.errors?g.reject(a.errors):g.resolve(null,a)}).fail(function(a,b,c){g.reject(n("Error saving data.",a,b,c))}),d=g.promise(),a&&d.always(a),d):null},saveInProgress:function(){return!!this._requestsInProgress.save},addChangesToSaveRequest:function(a){function b(){delete o._requestsInProgress.save,o._changes=o._pendingChanges.concat(o._changes)}function c(a){var b,c,d,e,f,g,i,j=a.record;for(g=a.inserted&&!a.originalId,c=p.recordIsArray?[]:{},b=0;b<s.length;b++)e=s[b],d=j[e],null!==d&&"object"==typeof d&&d.hasOwnProperty("v")&&(d=d.v),i=t[e],a.fields&&a.fields[i]&&a.fields[i].disabled&&(d=""),!g||!o.isIdentityField(i)||a.original&&d!==a.original[e]||(d=""),p.recordIsArray?c.push(h(d)):c[e]=h(d);f=null,a.deleted?f="d":a.inserted?f="i":a.updated&&(f="u"),c[q]||(c[q]={}),f&&(c[q].op=f),c[q].recordId=o._getIdentity(j),a.originalId&&(c[q].originalId=a.originalId),p.saveSelection&&(c[q].sel=a.sel?"Y":"N"),u.push(c)}var d,e,f,g,i,j,k,l,m,n,o=this,p=this._options,q=this._metaKey,r=[],s=[],t={},u=[],v=0;if(p.pageItemsToSubmit&&(g=a.pageItems,g||(g=[],a.pageItems=g),B(g)))for(i=p.pageItemsToSubmit,B(i)||(i=i.replace(/#/g,"").split(/\s*,\s*/)),d=0;d<i.length;d++)g.indexOf(i[d])<0&&g.push(i[d]);if(this._requestsInProgress.save||0===this._changes.length&&!p.saveSelection)return null;for(d in p.fields)p.fields.hasOwnProperty(d)&&(e=p.fields[d],e.virtual||(v+=1),e["volatile"]||e.virtual||(f=p.recordIsArray?e.index:d,s.push(f),t[f]=d,p.recordIsArray&&e.index===this._metaKey&&(q=s.length-1)));for(p.recordIsArray&&s.sort(function(a,b){return a-b}),q||(q=p.recordIsArray?s.length:"_meta"),d=0;d<this._changes.length;d++)j=this._changes[d],j.autoInserted&&!j.updated&&r.push(j.record);for(r.length&&this.deleteRecords(r),d=0;d<this._changes.length;d++)j=this._changes[d],c(j);if(this._pendingChanges=this._changes,this._changes=[],p.saveSelection)for(d in this._selection)this._selection.hasOwnProperty(d)&&(j=this._selection[d],j.inserted||j.deleted||j.updated||c(j));for(k=a.regions,k||(a.regions=k=[]),d=0;d<k.length&&(l=k[d],l.id!==p.regionId);d++)l=null;return l||(l=A({},p.regionData,{id:p.regionId,ajaxIdentifier:p.ajaxIdentifier,saveData:{models:[]}}),k.push(l)),m=l.saveData.models,n=A({},p.saveData,{instance:this.instance,version:p.version,values:u}),this._addParentItems(n),m.push(n),this._requestsInProgress.save=!0,function(a){a.done(function(a){var c,d,e,f,g,h,i;if(o._requestsInProgress.abortSave)delete o._requestsInProgress.abortSave,b();else if(a.errors){for(c=0;c<a.errors.length;c++)h=a.errors[c],h.regionStaticId===p.regionStaticId&&h.recordId&&h.instance==o.instance&&o.setValidity("error",h.recordId,h.columnName||null,h.message);b()}else if(a.regions){for(g=null,c=0;c<a.regions.length;c++){if(e=a.regions[c],e.id===p.regionId){for(f=e.fetchedData.models,d=0;d<f.length;d++)if(f[d].instance==o.instance){g=f[d].values,o._metaKey||(i=p.recordIsArray?v:"_meta"),o._updateData(g,i);break}break}e=null}o._clearChanges("_pendingChanges")}delete o._requestsInProgress.save}).fail(function(a,c,d){b()})}},setData:function(a,b){b=b||0,this._addData(b,b,a,a?a.length:null,!1,!1),j(this,"refresh",{})},clearData:function(){this._clear(),j(this,"refresh",{})},getTotalRecords:function(){var a,b,c=this._options;if("table"===c.shape)return this._haveAllData||"none"===c.paginationType?this._data.length:this._totalRecords<0?this._totalRecords:Math.max(this._data.length,this._totalRecords);if("record"===c.shape)return 1;if("tree"===c.shape){b=0;for(a in this._index)this._index.hasOwnProperty(a)&&(b+=1);return b}},getServerTotalRecords:function(){var a=this._options;return"table"===a.shape?this._totalRecords<0?this._totalRecords:this._totalRecords+this._numInsertedRecords-this._numDeletedRecords:"record"===a.shape?1:"tree"===a.shape?-1:void 0},getDataOverflow:function(){return!!this.dataOverflow},forEach:function(a,b){var c,d,e,f=this,g=this._options,h=this._data;if("record"===g.shape)throw new Error("Model has invalid shape for the forEach method");if("tree"===g.shape)c=0,h&&this.walkTree(h,{node:function(d){k(b,a,d,c,f._getIdentity(d)),c+=1}});else for(e=h.length,c=0;c<e;c++)d=h[c],d&&k(b,a,d,c,this._getIdentity(d,c))},transform:function(a,b){function c(a,b){var c;return c=a[b],c||(c={values:{},paths:[]},a[b]=c),c}function d(a,b,d,e,f,g){var h,i,j,k,l,m,n,o,p;if(a){for(l=a.split("/"),m=e,o=null,p=null,j=null,h=0;h<l.length;h++){if(j=l[h],i=q.exec(j)){n=c(g,i[1]),n.paths[b]=l.slice(h+1).join("/");break}o=m,p=j,m.hasOwnProperty(j)||(m[j]={}),m=m[j]}o?(B(o[p])?(k=o[p],k.length=0):k=[],o[p]=k):k=e,f[b]=k}else{if(!B(e))throw new Error("Context must be an array when there is no path");f[b]=e}d&&(n=c(g,d))}function f(){var a,c;for(a=0;a<r.length;a++)c=r[a],d(c.path,a,c.uniqueIndexField,b,t,u)}function g(a,b,c,d,f){var g,h,j;for(g in a)a.hasOwnProperty(g)&&(h=a[g],j=i(h,c,d,f),j!==e&&(b[g]=j));return b}function h(a,b,c,d,f){var g,h,j;for(g=0;g<a.length;g++)h=a[g],j=i(h,c,d,f),j!==e&&(b[g]=j);return b}function i(a,c,d,e){var f,i;return"string"==typeof a?(f=a.length,"'"===a.charAt(0)&&"'"===a.charAt(f-1)?a.substring(1,f-1):(i=v.getValue(c,a),null!==i&&"object"==typeof i&&i.hasOwnProperty("d")&&(i=i.d),i)):D(a)?a.call(b,v,c,d,e):null===a?a:B(a)?h(a,[],c,d,e):"object"==typeof a?g(a,{},c,d,e):void 0}function j(a,b,c,d){var e,f,g,h=[];if(a)for(a=a.split("/"),e=0;e<a.length;e++)f=a[e],g=q.exec(f),g&&h.push({key:g[1],value:i(g[1],b,c,d)});return h}function k(f,g,h){var k,l,m,n,q,w,x,y,z,A,B;if(!(g<o||p>0&&g>=o+p)&&(a.includeAggregates||!v._metaKey||!f[v._metaKey].agg)&&(!a.filter||a.filter.call(b,v,f,g,h)))for(k=0;k<s;k++)if(w=null,m=r[k],n=t[k],!m.filter||m.filter.call(b,v,f,g,h)){if(m.uniqueIndexField&&(w=u[m.uniqueIndexField],x=i(m.uniqueIndexField,f,g,h),w.values[x]!==e))continue;if(q=i(m.item,f,g,h),q!==e){if(w)w.values[x]={index:n.length,arrays:[],indexes:{}};else for(y=j(m.path,f,g,h),B=u,l=0;l<y.length;l++)w=c(B,y[l].key),z=w.values[y[l].value],z===e&&(z={index:n.length,arrays:[],indexes:{}},A=""===w.paths[k]?[]:{},n.push(A),w.values[y[l].value]=z),A=n[z.index],z.arrays[k]||d(w.paths[k],k,null,A,z.arrays,z.indexes),n=z.arrays[k],B=z.indexes;n.push(q)}}}var l,m,n,o,p,q=/^\[\W*([^ \t\/]+)\W*\]$/,r=a.template,s=r.length,t=[],u={},v=this;for(null!==b&&"object"==typeof b||(b={}),f(),o=0,a.offset>=0&&(o=a.offset),p=a.fetchData?this._options.pageSize:null,a.count>0&&(p=a.count),a.fetchData?this.forEachInPage(o,p,k):this.forEach(k),l=0;l<s;l++)m=r[l],n=t[l],m.sort&&n.array.sort(m.sort);return b},forEachInPage:function(a,b,d,f){function g(e){var g,h,i=b-(e-a);c.trace("Model: "+n.modelId()+". forEachInPage fetching more data starting at: ",e),n._waitingPages.push({offset:e,callback:d,thisArg:f,next:function(){n.forEachInPage(e,i,d,f)}}),n._requestsInProgress.fetch||(h=n.fetch(e,function(a){a||setTimeout(function(){n._waitingPages.length>0&&(g=n._waitingPages.shift(),g.next())},1)}),h||(n._waitingPages.pop(),k(f,d,null,-1,null)))}var h,i,j,l,m=a,n=this,o=this._options,p=this._data;if("table"!==o.shape)throw new Error("Model has invalid shape for the forEachInPage method");if(b>o.pageSize&&(o.pageSize=10*Math.floor((b+9)/10)),"one"===o.paginationType&&(m=a-this._offset),m<0||m>=p.length)return void(this._haveAllData?(k(f,d,null,-1,null),this._drainWaiters()):g(a));for(i=m+b,l=a,h=m;h<i;h++){if(j=p[h],j===e)return void(this._haveAllData&&h>=p.length?(k(f,d,null,-1,null),this._drainWaiters()):g(h+this._offset));j&&(k(f,d,j,l,this._getIdentity(j,h)),l+=1)}this._drainWaiters()},indexOf:function(a){var b,c=this._options;if("record"===c.shape)throw new Error("Model has invalid shape for the indexOf method");return"tree"===c.shape?(b=this.getRecordMetadata(this._getIdentity(a)),b&&b.parent?b.parent[this._childrenKey].indexOf(a):-1):this._data.indexOf(a)},getRecordId:function(a){return this._getIdentity(a)},isIdentityField:function(a){return this._identityKeys!==e&&this._identityKeys.indexOf(this.getFieldKey(a))>=0},getRecordMetadata:function(a){var b=this._index[l(a)];return b||null},metadataChanged:function(a,b){var c=this._index[l(a)];c&&j(this,"metaChange",{record:c.record,recordId:a,field:b||null})},getTypeMetadata:function(a){return this._options.types[a]||null},getFieldMetadata:function(a){return this._options.fields[a]||null},getFieldKey:function(a){var b=this._options;return!b.fields.hasOwnProperty(a)||b.fields[a].virtual?e:b.recordIsArray?b.fields[a].index:a},isChanged:function(){var a,b,c;if(0===this._changes.length)return!1;for(c=0,a=0;a<this._changes.length;a++)b=this._changes[a],b.autoInserted&&!b.updated||(c+=1);return c>0},getChanges:function(){return this._changes},clearChanges:function(){this._clearChanges("_changes")},hasErrors:function(){return this._errors.length>0},getErrors:function(){return this._errors},setSelectionState:function(a,b){var c=l(a),d=this._index[c];d&&(b=!!b,d.sel!==b&&(d.sel=b,b?(this._selection[c]=d,this._selectionCount+=1):(delete this._selection[c],this._selectionCount-=1)))},clearSelection:function(){var a;for(a in this._selection)this._selection.hasOwnProperty(a)&&(this._selection[a].sel=!1);this._selection={},this._selectionCount=0},getSelectedCount:function(){return this._selectionCount},getSelectedRecords:function(){var a,b=this._selection,c=[];for(a in b)b.hasOwnProperty(a)&&c.push(b[a].record);return c},allowEdit:function(a){return this.check("canEdit",a)},allowDelete:function(a){var b=this._options;return"record"!==b.shape&&("tree"!==b.shape||a!==this._data)&&this.check("canDelete",a)},allowAdd:function(a,b,c){var d,f,g,h,i=this._options;if("record"===i.shape)return!1;if(!("tree"!==i.shape||a&&a[this._childrenKey]))return!1;if(g=this.check("canAdd",a,b,c),g&&c&&"tree"===i.shape&&(h=this._getType(a),f=h.validChildren!==e?h.validChildren:i.types["default"].validChildren===e||i.types["default"].validChildren,f!==!0))for(d=0;d<c.length;d++)if(f.indexOf(c[d][this._typeKey])<0){g=!1;break}return g},allowDrag:function(a){var b=this._options;return"record"!==b.shape&&this.check("canDrag",a)},dragOperations:function(a){var b,c,d,f=this._options;if(a){if(a.length>0&&this._typeKey){for(d=a[0][this._typeKey]||"default",b=1;b<a.length;b++)if((a[b][this._typeKey]||"default")!==d){d="default";break}}else d="default";c=f.types[d].operations&&f.types[d].operations.drag!==e?f.types[d].operations.drag:f.types["default"].operations.drag}else c=f.types["default"].operations.externalDrag;return c},check:function(a,b,c,d){var f,g=!1,h=this._options,i=this._getType(b);if(!h.editable||this._masterRecordIsDeleted)return!1;if(b&&(f=this.getRecordMetadata(this._getIdentity(b)))){if(f.deleted||f.agg)return!1;if(f.inserted&&("canEdit"===a||"canDelete"===a))return!0}return f&&f[a]!==e?g=f[a]:i.operations&&i.operations[a]!==e?g=i.operations[a]:h.types["default"].operations[a]!==e&&(g=h.types["default"].operations[a]),D(g)&&(g=g.call(this,b,c,d)),D(h.check)&&(g=h.check(g,a,b,c,d)),g},getValue:function(a,b){var c;return b===e&&(b=a,a=this._data),c=this.getFieldKey(b),a[c]},setValue:function(a,b,c,d){function f(a,b){var c,d=a,e=b;if(null!==a&&"object"==typeof a&&a.hasOwnProperty("v")&&(d=a.v,null!==b&&"object"==typeof b&&b.hasOwnProperty("v")&&(e=b.v)),B(d)&&B(e)){if(d.length!==e.length)return!1;for(c=0;c<d.length;c++)if(d[c]!=e[c])return!1;return!0}return d==e}var g,h,k,l,m,n,o,p,q,r,s=this._options,t=!1;if(c===e&&(c=b,b=a,a=this._data),k=this.getFieldKey(b),!this.allowEdit(a))throw new Error("Set value not allowed for record.");if(o=this._getIdentity(a),l=this.getRecordMetadata(o),!l)return null;if(s.fields[b].readonly&&!s.fields[b].parentField||l.fields&&l.fields[b]&&l.fields[b].ck)throw new Error("Set value not allowed for field.");if(h=a[k],!f(h,c)){if(!d&&(b===s.sequenceField||b===s.parentIdentityField))if(p=q=r=null,b===s.sequenceField){if("tree"===s.shape?(q=this.parent(),q&&(p=q[this._childrenKey])):p=this._data,p)for(g=0;g<p.length&&!(parseFloat(p[g][this._sequenceKey])>parseFloat(c));g++)r=p[g]}else b===s.parentIdentityField&&(q=this.getRecord(c));if(l.original||(l.original=i(a),t=!0),a[k]=c,n=this._getIdentity(a),n!==o){if(this._index[n])return a[k]=h,t&&delete l.original,"DUP";l.originalId||(l.originalId=o),delete this._index[o],this._index[n]=l,l.sel&&(delete this._selection[o],this._selection[n]=l)}return l.updated||l.deleted||l.inserted||this._addChange(l),l.updated=!0,l.fields||(l.fields={}),m=l.fields[b],m||(m={},l.fields[b]=m),m.changed=!0,(l.error||l.warning)&&this.setValidity("valid",n),j(this,"set",{oldValue:h,oldIdentity:n!==o?o:null,recordId:n,record:a,field:b}),(q||r)&&this.moveRecords([a],q,r),"SET"}return"NC"},getRecordValue:function(a,b){return this.getValue(this.getRecord(a),b)},setRecordValue:function(a,b,c){this.setValue(this.getRecord(a),b,c)},setValidity:function(a,b,c,d){var e,f,g,h,i,j,k,m=this._index[l(b)];if(m&&(c?(m.fields||(m.fields={}),g=m.fields[c],g||(g={},m.fields[c]=g)):g=m,j="valid",k=g.message||d,g.warning&&(j="warning"),g.error&&(j="error"),a!==j||k!==d)){switch(a){case"error":f="error",delete g.warning;break;case"warning":f="warning",delete g.error;break;case"valid":delete g.error,delete g.warning,delete g.message;break;default:throw new Error("Invalid value for pValidity parameter: "+a)}if(f&&(g[f]=!0,g.message=d),h=m.error,!h&&m.fields)for(e in m.fields)if(m.fields.hasOwnProperty(e)&&m.fields[e].error){h=!0;break}h?(i=this._errors.indexOf(m),i>=0&&this._errors.splice(i,1),this._errors.push(m)):this._removeError(m),this.metadataChanged(b,c)}},deleteRecords:function(a){var b,d,e,f,g=[],h=[],i=this._options;if("record"===i.shape)throw new Error("Model has invalid shape for the deleteRecords method");for(b=0;b<a.length;b++)f=a[b],e=this._getIdentity(f),d=this.getRecordMetadata(e),d?this.allowDelete(f)?("table"===i.shape&&(this._numDeletedRecords+=1),i.onlyMarkForDelete&&!d.inserted||("table"===i.shape&&d.inserted&&(this._numDeletedRecords-=1,this._numInsertedRecords-=1),this._removeRecord(e,d)),d.inserted?(delete d.inserted,delete d.autoInserted,delete d.updated,this._removeError(d),this._removeChange(d)):(o(d,!0),this._removeError(d),d.deleted=!0,this._addChange(d)),g.push(f),h.push(e)):c.warn("Delete not allowed for record: "+e):c.warn("Record to delete not found: "+e);return g.length>0&&j(this,"delete",{records:g,recordIds:h}),g.length},canRevertRecord:function(a){var b;return b=this.getRecordMetadata(this._getIdentity(a)),!(!b||!b.original&&!b.deleted)},revertRecords:function(a){var b,d,e,f,g,h,i={},k=[],l=[],m=this._options;for(b=0;b<a.length;b++)e=a[b],f=this._getIdentity(e),d=this.getRecordMetadata(f),d?d.original||d.deleted?("table"===m.shape?g=this._data:"tree"===m.shape&&(g=this.parent(d.record)[this._childrenKey]),h=g.indexOf(d.record),d.deleted?("table"===m.shape&&(this._numDeletedRecords-=1),delete d.deleted):(d.originalId&&(this._index[d.originalId]=d,delete this._index[f],d.sel&&(this._selection[d.originalId]=d,delete this._selection[f]),i[f]=d.originalId,delete d.originalId),d.original&&(d.record=d.original,delete d.original),delete d.updated,o(d),this._removeError(d)),this._removeChange(d),e=d.record,g[h]!==e&&(g[h]=e),k.push(e),l.push(f)):c.warn("Nothing to revert for record "+f):c.warn("Record to revert not found: "+f);return k.length>0&&j(this,"revert",{records:k,recordIds:l,newIds:i}),k.length},insertNewRecord:function(a,b,c){var d,e,f,g,h,i,k,l=this._options,m=null;if("record"===l.shape)throw new Error("Model has invalid shape for the insertNewRecord method");if(g=this._initRecord(c,null,a),!this.allowAdd(a,"new",[g]))throw new Error("Insert not allowed for new record.");return h="tree"===l.shape?a?a[this._childrenKey]:this._data[this._childrenKey]:this._data,e=0,b&&(m=this._getIdentity(b),d=this.getRecordMetadata(m),d&&(e=h.indexOf(d.record)+1)),this._sequenceKey&&(i=k=-1,e-1>=0&&(i=parseFloat(h[e-1][this._sequenceKey])),e<h.length&&(k=parseFloat(h[e][this._sequenceKey])),g[this._sequenceKey]=""+p(l.sequenceStep,i,k,1,1)),h.splice(e,0,g),f=this._getIdentity(g),d={record:g,inserted:!0},this._index[f]=d,this._addChange(d),"tree"===l.shape?d.parent=a:this._numInsertedRecords+=1,j(this,"insert",{record:g,recordId:f,insertAfterId:m}),f},moveRecords:function(a,b,d){var e,f,g,h,i,k,l,m,n,o,q=this._options,r=[],s=[],t=null;if("record"===q.shape)throw new Error("Model has invalid shape for the moveRecords method");for("tree"===q.shape?(b||(b=this._data),h=b[this._childrenKey]):h=this._data,g=0,d&&(t=this._getIdentity(d),f=this.getRecordMetadata(t),f&&(g=h.indexOf(f.record)+1),(!f||g<0)&&(c.warn("AfterRecord not found, move to beginning."),g=0)),this._sequenceKey&&(n=o=-1,g-1>=0&&(n=parseFloat(h[g-1][this._sequenceKey])),g<h.length&&(o=parseFloat(h[g][this._sequenceKey]))),e=0;e<a.length;e++)if(l=a[e],m=this._getIdentity(l),f=this.getRecordMetadata(m)){if("tree"===q.shape){if(i=this.parent(l),!i){c.warn("Move not allowed for root");continue}i=i[this._childrenKey]}else i=h;k=i.indexOf(l),i.splice(k,1),h===i&&k<g&&(g-=1),s.push(l),r.push(m),h.splice(g,0,l),g+=1,this._sequenceKey&&this.setValue(l,q.sequenceField,""+p(q.sequenceStep,n,o,a.length,e+1),!0),"tree"===q.shape&&(f.parent=b,this._parentIdKey&&this.setValue(l,q.parentIdentityField,this._getIdentity(b),!0))}else c.warn("Record to move not found: "+m);return j(this,"move",{records:s,recordIds:r,insertAfterId:t}),r},copyRecords:function(a,b,d){var e,f,g,h,i,k,l,m,n,o,q,r=this,s=this._options,t=[],u=[],v=null;if("record"===s.shape)throw new Error("Model has invalid shape for the copyRecords method");for("tree"===s.shape?(n={node:function(a,b){var c,d;b&&(c=r._getIdentity(a),d={record:a,inserted:!0,parent:b},r._index[c]=d,r._addChange(d))}},b||(b=this._data),l=b[this._childrenKey]):l=this._data,g=0,d&&(v=this._getIdentity(d),f=this.getRecordMetadata(v),f&&(g=l.indexOf(f.record)+1),(!f||g<0)&&(c.warn("AfterRecord not found, copy to beginning."),g=0)),this._sequenceKey&&(o=q=-1,g-1>=0&&(o=parseFloat(l[g-1][this._sequenceKey])),g<l.length&&(q=parseFloat(l[g][this._sequenceKey]))),e=0;e<a.length;e++)h=a[e],k=this._getIdentity(h),f=this.getRecordMetadata(k),f?(i=this._initRecord(null,a[e],b),l.splice(g,0,i),g+=1,this._sequenceKey&&(i[this._sequenceKey]=""+p(s.sequenceStep,o,q,a.length,e+1)),m=this._getIdentity(i),u.push(i),t.push(m),f={record:i,inserted:!0},this._index[m]=f,this._addChange(f),"tree"===s.shape?(f.parent=b,this.walkTree(i,n,null)):this._numInsertedRecords+=1):c.warn("Record to copy not found: "+k);return j(this,"copy",{records:u,recordIds:t,insertAfterId:v}),t},root:function(){if("tree"!==this._options.shape)throw new Error("Model has invalid shape for the root method");return this._data},child:function(a,b){var c=a[this._childrenKey];if(c)return c[b]},parent:function(a){var b,c;if(this._identityKeys&&(b=this._getIdentity(a),c=this.getRecordMetadata(b),c&&c.hasOwnProperty("parent")))return c.parent?c.parent:null},childCount:function(a){var b=a[this._childrenKey];return null===b?null:b?b.length:0},hasChildren:function(a){var b=a[this._childrenKey];return null===b?null:!!b&&b.length>0},fetchChildNodes:function(a,b){var c,d,e,f,g,h=this,i=this._options,j=E();return g=A({},i.regionData,{id:i.regionId,ajaxIdentifier:i.ajaxIdentifier,fetchData:A({},i.fetchData,{version:i.version,parentId:this._getPrimaryKey(a)})}),e={regions:[g]},i.pageItemsToSubmit&&(e.pageItems=i.pageItemsToSubmit),this._addParentItems(e.regions[0]),f={loadingIndicator:m(this)},c=this._callServer(e,f),c.done(function(b){var c=b[h._childrenKey];h._addData(a,null,c),j.resolve(c.length)}).fail(function(a,b,c){j.reject(n("Error retrieving data.",a,b,c))}),d=j.promise(),b&&d.always(b),d},clearChildNodes:function(a){a[this._childrenKey];a[this._childrenKey]=null},walkTree:function(a,b,c){var d,f,g,h,i;if(c===e&&(c=null,f=this._getIdentity(a),f&&(g=this.getRecordMetadata(f),g&&(c=g))),i=b.node(a,c),!i&&(h=a[this._childrenKey],h&&h.length>0)){for(b.beginChildren&&b.beginChildren(a),d=0;d<h.length;d++)this.walkTree(h[d],b,a);b.endChildren&&b.endChildren(a)}},subscribe:function(a){var b=a.viewId;return b||(b="v::"+y,y+=1,a.viewId=b),this._listeners.push(a),b},unSubscribe:function(a){var b;for(b=0;b<this._listeners.length;b++)this._listeners[b].viewId===a&&this._listeners.splice(b,1)},getOption:function(a){var b=this._options[a];if(b===e)throw new Error("No such option: "+a);return b},setOption:function(a,b){var d={genIdPrefix:1,pageItemsToSubmit:1,fetchData:1,saveData:1,regionData:1,parentRecordId:1,editable:1,pageSize:1};if(d[a]){if("editable"===a&&!this._options.identityField)throw new Error("An editable model requires an identityField");this._options[a]=b}else c.warn("Option cannot be set: "+a)},_callServer:function(a,c){var d;return d=b.plugin(a,c)},_drainWaiters:function(a){var b,c;for(b=0;b<this._waitingPages.length;b++)if(c=this._waitingPages[b],(this._haveAllData||this._data[c.offset]||a)&&(this._waitingPages.splice(b,1),b-=1,a&&0!==a.status?k(c.thisArg,c.callback,null,-1,null):c.next(),this._requestsInProgress.fetch))return},_getServerOffset:function(a){var b,c,d,e=a-1;for(d=this._data[e];d;){if(b=this._getIdentity(d,e),c=this.getRecordMetadata(b),c&&c.serverOffset>=0)return c.serverOffset+1;e-=1,d=this._data[e]}return a},_clear:function(){var a=this._options;this._requestsInProgress.fetch&&(this._requestsInProgress.abortFetch=!0),this._requestsInProgress.save&&(this._requestsInProgress.abortSave=!0),"table"===a.shape?(this._data=[],a.hasTotalRecords?this._totalRecords=0:this._totalRecords=-1,this._haveAllData=!1,this._offset=0,this._numInsertedRecords=0,this._numDeletedRecords=0,this._masterRecordIsInserted&&(this._haveAllData=!0),this.dataOverflow=!1):this._data=null,this._changes=[],this._errors=[],this._index={},this._selection={},this._selectionCount=0},_saveDataState:function(){this._saveState={_data:this._data,_totalRecords:this._totalRecords,_haveALlData:this._haveAllData,_offset:this._offset,_numInsertedRecords:this._numInsertedRecords,_numDeletedRecords:this._numDeletedRecords,dataOverflow:this.dataOverflow,_changes:this._changes,_errors:this._errors,_index:this._index,_selection:this._selection,_selectionCount:this._selectionCount}},_restoreDataState:function(){var a=this._saveState;this._data=a._data,this._totalRecords=a._totalRecords,this._haveALlData=a._haveAllData,this._offset=a._offset,this._numInsertedRecords=a._numInsertedRecords,this._numDeletedRecords=a._numDeletedRecords,this.dataOverflow=a.dataOverflow,this._changes=a._changes,this._errors=a._errors,this._index=a._index,this._selection=a._selection,this._selectionCount=a._selectionCount},_clearChanges:function(a){var b,c,d,e=[],f=[],g=this._options,h=this[a];for(b=0;b<h.length;b++)c=h[b],d=this._getIdentity(c.record),c.deleted&&g.onlyMarkForDelete&&this._removeRecord(d,c),c.deleted?e.push(d):(c.inserted||c.updated)&&f.push(d),delete c.deleted,delete c.recordId,delete c.inserted,delete c.autoInserted,delete c.updated,delete c.original;this[a]=[],j(this,"clearChanges",{deletedIds:e,changedIds:f})},_addData:function(a,b,d,f,g,h){function i(a,b,c){var d={record:c};w._metaKey&&(A(d,c[w._metaKey]),d.sel="Y"===d.sel,d.agg&&(!a||w._identityKeys&&!c[w._identityKeys[0]])&&(w._assignTempIdentity(c),a=w._getIdentity(c)),d.allowedOperations&&(d.canEdit=!!d.allowedOperations.update,d.canDelete=!!d.allowedOperations["delete"])),b!==e&&null!==b&&(d.serverOffset=b),w._index[a]=d,d.sel&&(w._selected[a]=d)}var k,l,m,n,o,p,q,r,s,t,u,v=this._options,w=this;if("table"===v.shape?((0===a&&!this.isChanged()||"none"===v.paginationType)&&this._clear(),"one"===v.paginationType&&(this._offset=a),this._totalRecords=-1,f!==e&&null!==f?this._totalRecords=f:v.hasTotalRecords&&c.warn("Model missing total records"),this._haveAllData||g||(this._haveAllData=!0),h&&(this.dataOverflow=!0)):"record"===v.shape&&this._clear(),"tree"===v.shape&&a)q=a,q[this._childrenKey]=d,v.identityField&&w.walkTree(q,{node:function(a,b){var c;b&&(c=w._getIdentity(a),i(c,null,a),w.getRecordMetadata(c).parent=b)}},null),j(this,"addData",{parentNode:q,offset:0,count:d.length});else if(null===this._data||0===this._data.length||"table"!==v.shape||"one"===v.paginationType)c.trace("Model: "+this.modelId()+". add data set: ",a,f,g),this._data=d,this._numInsertedRecords=0,this._numDeletedRecords=0,"record"!==v.shape?(t={offset:0,count:d.length},r=b,this.forEach(function(a,b,c){w._metaKey&&a[w._metaKey].agg?s=null:(s=r,r+=1),i(c,s,a)}),"tree"===v.shape&&this.root()&&v.identityField&&(this.walkTree(this.root(),{node:function(a,b){w.getRecordMetadata(w._getIdentity(a)).parent=b}},null),t.parentNode=null,t.count=1)):v.identityField&&this._data?(t={offset:0,count:1},i(this._getIdentity(this._data),null,this._data)):t={offset:0,count:this._data?1:0},j(this,"addData",t);else{for(c.trace("Model: "+this.modelId()+". add data merge: ",a,f,g),l=a,r=b,u=[],k=0;k<d.length;k++)if(m=d[k],n=this._getIdentity(m,l),this._metaKey&&m[this._metaKey].agg?s=null:(s=r,r+=1),p=this.getRecordMetadata(n)){if(p.updated||p.inserted||p.deleted)continue;o=this._data.indexOf(p.record),this._data[o]=m,p.record=m,p.serverOffset=s,this._metaKey&&A(p,m[this._metaKey]),u.push(n)}else this._data[l]?this._data.splice(l,0,m):this._data[l]=m,l+=1,i(n,s,m);t={offset:a,count:l-a},u.length&&(t.replacedIds=u),j(this,"addData",t)}},_updateData:function(a,b){var c,d,e,f,g,h=[],i=[],k={},l=b||this._metaKey;for(c=0;c<a.length;c++)d=a[c],f=d[l]?d[l].recordId:null,e=this._getIdentity(d),f===e&&(f=null),g=this.getRecordMetadata(f?f:e),g&&(f&&(k[f]=e,this._index[e]=g,delete this._index[f],delete this._selection[f],this._selectionCount-=1),h.push(d),i.push(f||e),this._data[this._data.indexOf(g.record)]=d,g.record=d,l&&d[l]?(A(!0,g,d[l]),delete g.recordId):b&&(this._options.recordIsArray?d.splice(b,1):delete d[b]),delete g.deleted,delete g.inserted,delete g.autoInserted,delete g.updated,delete g.original,o(g),this._removeError(g),this._removeChange(g));h.length>0&&j(this,"refreshRecords",{records:h,recordIds:i,newIds:k})},_initRecord:function(b,c,d){var f,g,h,i,j,k,l,m,n=this._options;if(b)k=b;else{k=n.recordIsArray?[]:{};for(f in n.fields)if(n.fields.hasOwnProperty(f)&&(g=n.fields[f],h=n.recordIsArray?g.index:f,!g.virtual))if(!c||g.noCopy){if(g.parentField&&n.parentModel&&(l||(l=a.get(n.parentModel),l&&!m&&(m=l.getRecord(n.parentRecordId))),m)){k[h]=l.getValue(m,g.parentField);continue}k[h]=g.defaultValue!==e?g.defaultValue:""}else k[h]=c[h]}if(l&&a.release(n.parentModel),this._identityKeys&&this._assignTempIdentity(k),this._metaKey&&(k[this._metaKey]={}),"tree"===n.shape&&(this._parentIdKey&&(k[this._parentIdKey]=this._getIdentity(d)),
j=[],k[this._childrenKey]=j,c&&(i=c[this._childrenKey])))for(f=0;f<i.length;f++)j.push(this._initRecord(null,i[f],k));return k},_assignTempIdentity:function(a){var b;for(b=0;b<this._identityKeys.length;b++)a[this._identityKeys[b]]=this._options.genIdPrefix+this._nextInsertId,this._nextInsertId+=1},_getIdentity:function(a,b){var c,d=null;if(this._identityKeys!==e)if(1===this._identityKeys.length)d=a[this._identityKeys[0]]+"";else for(d=[],c=0;c<this._identityKeys.length;c++)d.push(a[this._identityKeys[c]]+"");else null!==b&&b!==e&&(d=b+"");return null!==d?l(d):d},_getPrimaryKey:function(a){var b,c;if(this._identityKeys!==e)for(c=[],b=0;b<this._identityKeys.length;b++)c.push(a[this._identityKeys[b]]+"");return c},_getType:function(a){var b="default",c=this._options;return a&&this._typeKey!==e&&(b=a[this._typeKey],null!==b&&"object"==typeof b&&b.hasOwnProperty("v")&&(b=b.v),b||(b="default")),c.types[b]||c.types["default"]},_getRecordByIndex:function(a){return this._data[a]||null},_getRecordById:function(a){var b=this._index[l(a)];return b?b.record:null},_removeRecord:function(a,b){var c,d,e=this._options;"table"===e.shape?c=this._data:"tree"===e.shape&&(c=b.parent[this._childrenKey],delete b.parent),c.splice(c.indexOf(b.record),1),d=l(a),delete this._index[d],b.sel&&(delete this._selection[d],this._selectionCount-=1)},_addChange:function(a){var b=this._changes.indexOf(a);b>=0&&this._changes.splice(b,1),this._changes.push(a)},_removeChange:function(a){var b=this._changes.indexOf(a);b>=0&&!a.deleted&&!a.updated&&!a.inserted&&this._changes.splice(b,1)},_removeError:function(a){var b=this._errors.indexOf(a);b>=0&&this._errors.splice(b,1)},_addParentItems:function(b){var c,d,e,f,g,h,i={values:[]},j=this._options;if(j.parentModel){for(c in j.fields)j.fields.hasOwnProperty(c)&&(d=j.fields[c],!d.virtual&&d.parentField&&(e||(e=a.get(j.parentModel),e&&!f&&(f=e.getRecord(j.parentRecordId),h=e.getRecordMetadata(j.parentRecordId))),f&&(g={n:d.parentField,v:e.getValue(f,d.parentField)},i.values.push(g))));h&&(h.salt&&(i.salt=h.salt),h["protected"]&&(i["protected"]=h["protected"])),e&&a.release(j.parentModel),b.parentRecordId=j.parentRecordId,i.values.length>0&&(b.parentItems=i)}}},G={shape:"table",recordIsArray:!1,hasTotalRecords:!1,genIdPrefix:"t",regionId:null,ajaxIdentifier:null,pageItemsToSubmit:null,regionData:{},fetchData:{},saveData:{},version:1,parentModel:null,parentRecordId:null,editable:!1,onlyMarkForDelete:!0,identityField:null,typeField:null,childrenField:null,parentIdentityField:null,sequenceField:null,metaField:null,sequenceStep:10,saveSelection:!1,types:{"default":{validChildren:!0,operations:{canAdd:!0,canEdit:!0,canDelete:!0,canDrag:!0,drag:{normal:"move",ctrl:"copy"},externalDrag:{normal:"add"}}}},check:null,sortCompare:null,fields:null,paginationType:"none",pageSize:100,preFetch:!1},H={table:1,tree:1,record:1},I={none:1,one:1,progressive:1};a.create=function(b,d,g,h,i,k){var l,m,n,o,p,q,r,s,t,v,y,C,D=f(b),E=Object.create(F);if(E.name=D[0],E.instance=D[1],E._requestsInProgress={},E._listeners=[],E._waitingPages=[],n=d.fields,E._options=A(!0,{},G,d),E._options.fields=n,m=E._options,!m.fields)throw new Error("The fields option is required");if(!H[m.shape])throw new Error("Invalid shape option: "+m.shape);if(!I[m.paginationType])throw new Error("Invalid paginationType option: "+m.paginationType);if(m.editable&&!m.identityField)throw new Error("An editable model requires an identityField");if("tree"===m.shape&&!m.childrenField)throw new Error("A tree shaped model requires a childrenField");if("table"===m.shape&&"none"===m.paginationType&&d.hasTotalRecords===e&&(m.hasTotalRecords=!0),E._nextInsertId=1e3,m.identityField)if(B(m.identityField))for(E._identityKeys=[],l=0;l<m.identityField.length;l++)E._identityKeys.push(E.getFieldKey(m.identityField[l]));else E._identityKeys=[E.getFieldKey(m.identityField)];if(m.typeField&&(E._typeKey=E.getFieldKey(m.typeField),E._typeKey===e))throw new Error("Type field not found: "+m.typeField);if(m.childrenField&&(E._childrenKey=E.getFieldKey(m.childrenField),E._childrenKey===e))throw new Error("Children field not found: "+m.childrenField);if(m.parentIdentityField&&(E._parentIdKey=E.getFieldKey(m.parentIdentityField),E._parentIdKey===e))throw new Error("Parent identity field not found: "+m.parentIdentityField);if(m.sequenceField&&(E._sequenceKey=E.getFieldKey(m.sequenceField),E._sequenceKey===e))throw new Error("Sequence field not found: "+m.sequenceField);if(m.metaField&&(E._metaKey=E.getFieldKey(m.metaField),E._metaKey===e))throw new Error("Meta field not found: "+m.metaField);if("record"!==m.shape?m.identityField?E.getRecord=E._getRecordById:E.getRecord=E._getRecordByIndex:E.getRecord=function(){return E._data},E._clear(),g?(t="none"!==m.paginationType&&(i!==e&&null!==i?i:h===e||null===h||g.length<h),E._addData(0,0,g,h,t,k)):null!==h&&h!==e&&(E._totalRecords=h),m.parentModel&&m.parentRecordId&&!g&&(C=a.get(m.parentModel))){y=C.getRecordMetadata(m.parentRecordId),y.inserted&&(E._masterRecordIsInserted=!0,E._clear()),y.deleted&&(E._saveDataState(),E._masterRecordIsDeleted=!0,E._clear(),E._addData(0,0,[],0,!1,!1)),q=E._parentFieldsMap={};for(l in m.fields)m.fields.hasOwnProperty(l)&&(p=m.fields[l],p.parentField&&(q[p.parentField]||(q[p.parentField]=[]),q[p.parentField].push(l)));E.parentModelViewId=C.subscribe({onChange:function(b,c){var d,e;if("delete"===b||"revert"===b||"refreshRecords"===b||"clearChanges"===b){for(e=c.recordIds||c.deletedIds,d=0;d<e.length;d++)if(e[d]===m.parentRecordId){"delete"===b?(E._saveDataState(),E._masterRecordIsDeleted=!0,E._clear(),E._addData(0,0,[],0,!1,!1),j(E,"refresh",{})):"revert"!==b&&"refreshRecords"!==b||!E._masterRecordIsDeleted?"refreshRecords"===b&&c.newIds&&c.newIds[E.instance]||"clearChanges"===b&&E._masterRecordIsDeleted&&delete E._saveState:(delete E._masterRecordIsDeleted,E._restoreDataState(),j(E,"refresh",{}));break}"clearChanges"===b&&E._masterRecordIsInserted&&delete E._masterRecordIsInserted}else"set"===b&&(c.oldIdentity||c.recordId)===m.parentRecordId?(r=c.field,r in q&&(o=q[r],s=C.getValue(c.record,r),E.forEach(function(a){var b,d;if(!E._metaKey||!a[E._metaKey].agg)for(b=0;b<o.length;b++)d=o[b],c.oldValue===E.getValue(a,d)&&E.setValue(a,d,s)})),c.oldIdentity&&(m.parentRecordId=c.recordId,a.renameInstance(E.modelId(),c.recordId))):"refresh"===b&&E._masterRecordIsDeleted&&(delete E._masterRecordIsDeleted,E._restoreDataState(),j(E,"refresh",{}))}}),a.release(m.parentModel)}return x.length>=z&&(v=u(),v&&(c.info("Model: cache overflow; remove model from cache: "+v.modelId()),a.destroy(v.modelId()))),v=w[D[0]],v||(v={instances:{},instancesRef:{}},w[D[0]]=v),D[1]?(v.instancesRef[D[1]]=1,v.instances[D[1]]=E):(v.modelRef=1,v.model=E),c.info("Model: created model: "+b+" refCount: 1"),E},a.list=function(a,b,c){var d=r(null,c,a,b);return d.map(function(a){return a.id})},a.anyChanges=function(a,b,c){var d=r("change",c,a,b);return d.length>0},a.anyErrors=function(a,b,c){var d=r("error",c,a,b);return d.length>0},a.addChangesToSaveRequest=function(a,b,c){var d,e,f=[],g=r("change",c,!1,b);if(g.length<=0)return null;for(d=0;d<g.length;d++)e=g[d].model.addChangesToSaveRequest(a),e&&f.push(e);return function(a){var b;for(b=0;b<f.length;b++)f[b](a)}},a.save=function(a,c,d,e){var f,g;return a=a||{},c=c||{},f=apex.model.addChangesToSaveRequest(a,d,e),f?(g=b.plugin(a,c),f(g),g):null},a.get=function(a){var b,d,e=f(a);return b=w[e[0]],b&&(e[1]?(d=b.instancesRef[e[1]]+=1,b=b.instances[e[1]]):(d=b.modelRef+=1,b=b.model),b&&(s(b),c.info("Model: get model: "+a+" refCount: "+d))),b},a.renameInstance=function(a,b){var d,e,g=f(a);d=w[g[0]],d&&g[1]&&(e=d.instances[g[1]],e.instance=b,delete d.instances[g[1]],d.instances[b]=e,c.info("Model: rename model "+g[0]+" instance: "+g[1]+" to "+b),j(e,"instanceRename",{oldInstance:g[1],newInstance:b}))},a.release=function(b){var d,e,g=f(b);d=w[g[0]],d&&(g[1]?(e=d.instancesRef[g[1]]-=1,d=d.instances[g[1]]):(e=d.modelRef-=1,d=d.model),c.info("Model: release model: "+b+" refCount: "+e),e<=0&&(d._options.parentModel&&q(d._options.parentModel)?(c.info("Model: save in cache model: "+b),t(d)):d.isChanged()||a.destroy(b)))},a.destroy=function(b){function d(d){var e,f;d&&(s(d),d.parentModelViewId&&(f=d._options.parentModel,e=a.get(f),e&&(e.unSubscribe(d.parentModelViewId),a.release(f))),d._data=null,d._index=null,d._selection=null,c.info("Model: destroy model: "+b))}var e,g,h=f(b);if(e=w[h[0]]){if(h[1])d(e.instances[h[1]]),delete e.instancesRef[h[1]],delete e.instances[h[1]];else if(d(e.model),delete e.model,delete e.modelRef,"string"==typeof b&&!h[1])for(g in e.instances)e.instances.hasOwnProperty(g)&&(d(e.instances[g]),delete e.instances[g]);0!==Object.keys(e.instances).length||e.model||delete w[h[0]]}},a.getMaxCachedModels=function(){return z},a.setMaxCachedModels=function(a){z=parseInt(a,10)||v}}(apex.model,apex.server,apex.debug,apex.jQuery);
!function(a,b,c,d){"use strict";var e=".",f="a-Toolbar",g=f+"--small",h=f+"--simple",i=f+"-group",j=f+"-groupContainer",k=j+"--start",l=j+"--center",m=j+"--end",n=i+"--together",o=f+"-item",p=f+"-input",q=f+"-inputText",r=f+"-inputCheckbox",s=f+"-static",t=f+"-button",u=t+"-item",v=f+"-radioGroup",w=f+"-toggleButton",x=f+"-menu",y=f+"-selectList",z="a-Button",A=z+"--hot",B="a-Button-label",C="a-Button--withIcon",D="a-Button--noLabel",E="a-Icon",F=E+" icon-menu-drop-down",G="js-menuButton",H="js-actionButton",I="js-actionRadioGroup",J="js-actionCheckbox",K="js-actionSelect",L="is-active",M=e+p,N="start",O="center",P="end",Q=a.ui.keyCode;a.widget("apex.toolbar",{version:"5.1",widgetEventPrefix:"toolbar",options:{label:"",toolbarFor:null,idPrefix:null,actionsContext:null,small:!1,simple:!1,toolbarClass:"",cursorKeyNavigation:!1,data:[]},_create:function(){function b(b,d){"update"!==d&&"updateChoices"!==d||(e.enterActions[b.name]&&c.find('[data-enter-action="'+b.name+'"]').prop("disabled",!!b.disabled),c.find("."+i).show().each(function(){var b=a(this);0===b.children(":visible").length&&b.hide()}))}var c=this.element,e=this,j=this.options;this.menus={},this.enterActions={},this.nextId=1,c.addClass(f).attr("role","toolbar").attr("aria-label",j.label?j.label:d.formatMessage("APEX.TB.TOOLBAR")),j.toolbarFor&&c.attr("aria-controls",j.toolbarFor),j.small&&c.addClass(g),j.simple&&c.addClass(h),j.toolbarClass&&c.addClass(j.toolbarClass),apex.actions&&(this.actionsContext=j.actionsContext||apex.actions,this.actionsContext.observe(b),this.actionObserver=b),this.refresh(),j.cursorKeyNavigation&&(this.toolbarHasChanged(),this._on(this._keyNavHandlers))},_keyNavHandlers:{keydown:function(b){function c(a){var d,f;a.attr("tabindex","-1"),f=parseFloat(e.focusableElements.index(a[0])+1),d=f>=e.focusableElements.length?e.focusableElements.first():e.focusableElements.filter(":eq("+f+")"),a.is(":input[type=radio]")&&a.attr("name")===d.attr("name")?c(d):d.attr("tabindex","0").focus(),b.preventDefault()}function d(a){var c,f;a.attr("tabindex","-1"),f=parseFloat(e.focusableElements.index(a[0])-1),c=f<0?e.focusableElements.last():e.focusableElements.filter(":eq("+f+")"),a.is(":input[type=radio]")&&a.attr("name")===c.attr("name")?d(c):c.attr("tabindex","0").focus(),b.preventDefault()}var e=this,f=b.which,g=a(b.target);g.is(":input[type=text],:input[type=radio],select")?b.shiftKey&&f===Q.TAB?d(g):f===Q.TAB&&c(g):f===Q.LEFT?d(g):f===Q.RIGHT&&c(g)}},_destroy:function(){var b,c=this.element,d=this.options;c.removeClass(f+" "+g+" "+h+" "+d.toolbarClass).removeAttr("role").empty(),this.actionsContext&&this.actionsContext.unobserve(this.actionObserver);for(b in this.menus)this.menus.hasOwnProperty(b)&&a("#"+b).remove()},_setOption:function(a,b){var c=this.element;"small"===a&&c.toggleClass(g,b),"simple"===a&&c.toggleClass(h,b),"toolbarClass"===a&&c.removeClass(this.options.toolbarClass).addClass(b),this._super(a,b),"data"===a&&this.refresh()},_getControlProperty:function(a,b){var c,d;return d=a[b],void 0===d&&a.action&&(c=this.actionsContext.lookup(a.action),c&&c[b]&&(d=c[b])),d},_getLocalizedControlProperty:function(a,b){var c,e=null;return a[b+"Key"]?e=d.getMessage(a[b+"Key"]):void 0!==a[b]&&(e=a[b]),!e&&a.action&&(c=this.actionsContext.lookup(a.action),c&&void 0!==c[b]&&(e=c[b])),e},_getNoUpdate:function(a){return a.label||a.labelKey||a.icon||a.title||a.titleKey?"true":null},_getId:function(a){var b=this.options.idPrefix||this.element[0].id||"tb";return a.id?b+"_"+a.id:null},_forceId:function(a){a.id||(a.id="m"+this.nextId,this.nextId+=1)},_buildText:function(b,c){var d=a.extend({id:"",label:"",size:"30",maxChars:"4000",placeholder:"",action:""},c);d.enterAction&&(this.enterActions[d.enterAction]=!0),b.markup("<input").optionalAttr("id",this._getId(d)).attr("class",p+" "+q+" "+o).attr("title",this._getLocalizedControlProperty(d,"label")).attr("type","text").attr("size",d.size).attr("maxlength",d.maxChars).attr("value","").optionalAttr("placeholder",this._getLocalizedControlProperty(d,"placeholder")).optionalAttr("data-enter-action",d.enterAction).markup(" />")},_buildStatic:function(a,b){a.markup("<span").optionalAttr("id",this._getId(b)).attr("class",s+" "+o).markup(">"),b.content?a.markup(b.content):a.content(this._getLocalizedControlProperty(b,"label")),a.markup("</span>")},_buildSelect:function(a,b){var c,d=this.actionsContext.lookup(b.action);c=this._getLocalizedControlProperty(b,"title"),c||(c=this._getLocalizedControlProperty(b,"label")),a.markup("<select").optionalAttr("id",this._getId(b)).attr("class",y+" "+K+" "+o).attr("size","1").optionalAttr("title",c).optionalAttr("aria-label",c).optionalBoolAttr("disabled",d&&!!d.disabled).attr("data-action",b.action).markup("></select>")},_buildButton:function(a,b){function c(){a.markup("<span").attr("class",E+" "+f).markup("></span>")}var d,e,f,g,h,i=z+" "+o,j=b.menu||b.menuId;j?(b.menu?(this._forceId(b),d=this._getId(b)+"_menu"):d=b.menuId,i+=" "+G):i+=" "+H,f=this._getControlProperty(b,"icon"),f&&(i+=" "+C),b.iconOnly&&(i+=" "+D),b.hot&&(i+=" "+A),h=this.actionsContext.lookup(b.action),h&&h.get&&!h.onLabel&&h.get(b.action)&&(i+=" "+L),a.markup("<button type='button'").attr("class",i).optionalAttr("id",this._getId(b)).optionalBoolAttr("disabled",h&&!!h.disabled),e=this._getLocalizedControlProperty(b,"label"),g=this._getLocalizedControlProperty(b,"title"),!e&&h&&h.get&&(e=h.get()?h.onLabel:h.offLabel),b.iconOnly?(g||(g=e),a.attr("title",g).attr("aria-label",e)):g&&a.attr("title",g),j?a.attr("data-menu",d).attr("aria-haspopup",!0).attr("aria-expanded",!1):a.attr("data-action",b.action).optionalAttr("data-no-update",this._getNoUpdate(b)),a.markup(">"),f&&b.iconBeforeLabel&&c(),b.iconOnly||a.markup("<span class='"+B+"'>").content(e).markup("</span>"),f&&!b.iconBeforeLabel&&c(),j&&a.markup("<span").attr("class",F).markup("></span>"),a.markup("</button>"),b.menu&&(this.menus[d]=b.menu)},_buildRadioButtonGroup:function(a,b){a.markup("<div role='group'").attr("aria-label",this._getLocalizedControlProperty(b,"label")).attr("class",v+" "+I+" "+o).attr("data-action",b.action).attr("data-item",z).attr("data-item-wrap",u).markup("></div>")},_buildToggle:function(a,b){var c,d,e=this.actionsContext.lookup(b.action);this._forceId(b),c=e&&e.get(b.action),d=p+" "+r,c&&(d+=" "+L),a.markup("<div").attr("class",w+" "+J+" "+o).attr("data-action",b.action).optionalAttr("data-no-update",this._getNoUpdate(b)).markup(">"),a.markup("<input type='checkbox'").attr("class",d).attr("name",b.action).attr("id",this._getId(b)).optionalBoolAttr("checked",c).optionalBoolAttr("disabled",e&&!!e.disabled).markup(" />"),a.markup("<label").attr("for",this._getId(b)).attr("class",z).markup(">").content(this._getLocalizedControlProperty(b,"label")).markup("</label>"),a.markup("</div>")},_buildToolbar:function(a,b){var c,d=[],e=[],f=[];for(c=0;c<b.length;c++)b[c].align&&b[c].align!==N?b[c].align===O?e.push(b[c]):b[c].align===P&&f.push(b[c]):d.push(b[c]);d.length&&this._buildGroupContainer(a,N,d),e.length&&this._buildGroupContainer(a,O,e),f.length&&this._buildGroupContainer(a,P,f)},_buildGroupContainer:function(a,b,d){var e,f,g,h,o,p=j;switch(b){case N:p+=" "+k;break;case O:p+=" "+l;break;case P:p+=" "+m}for(a.markup("<div").attr("class",p).markup(">"),e=0;e<d.length;e++){for(o=i,g=d[e],g.customCSS&&(o+=" "+g.customCSS),g.groupTogether&&(o+=" "+n),a.markup("<div").attr("class",o).markup(">"),f=0;f<g.controls.length;f++)switch(h=g.controls[f],h.type){case"STATIC":this._buildStatic(a,h);break;case"TEXT":this._buildText(a,h);break;case"SELECT":this._buildSelect(a,h);break;case"MENU":case"BUTTON":this._buildButton(a,h);break;case"RADIO_GROUP":this._buildRadioButtonGroup(a,h);break;case"TOGGLE":this._buildToggle(a,h);break;default:c.error("Unknown toolbar control type: "+h.type)}a.markup("</div>")}a.markup("</div>")},refresh:function(){var c,d,e,f,g,h,i,j=this,k=this.element,l=this.options,m=l.data,n=b.htmlBuilder();for(this._buildToolbar(n,l.data),k.html(n.toString()),c=0;c<m.length;c++)if(e=m[c].controls)for(d=0;d<e.length;d++)f=e[d],i=this.actionsContext.lookup(f.action),i&&(i.hide&&this.actionsContext.update(f.action),i.choices&&this.actionsContext.updateChoices(f.action));k.find(M).on("keydown",function(b){var c=a(b.target),d=c.attr("data-enter-action");d&&13===b.which&&j.actionsContext.invoke(d)});for(g in this.menus)this.menus.hasOwnProperty(g)&&(a("<div/>",{id:g,"class":x,style:"display:none;"}).appendTo("body"),h=this.menus[g],h.actionsContext=this.actionsContext,h.idPrefix=this.options.idPrefix||this.element[0].id||"tb",a("#"+g).menu(h))},toolbarHasChanged:function(){var a,b;this.focusableElements=this.element.find(":focusable"),a=this.focusableElements.filter("[tabindex=0]"),b=a.length?this.focusableElements.index(a[0]):0,this.focusableElements.filter(":eq("+b+")").attr("tabindex","0").end().not(":eq("+b+")").attr("tabindex","-1")},hideControl:function(a){var b=this.find(a);b&&(b.action?this.actionsContext.hide(b.action):(this.findElement(a).hide(),this.actionObserver&&this.actionObserver({},"update")))},showControl:function(a){var b=this.find(a);b&&(b.action?this.actionsContext.show(b.action):(this.findElement(a).show(),this.actionObserver&&this.actionObserver({},"update")))},disableControl:function(a){var b=this.find(a);b&&(b.action?this.actionsContext.disable(b.action):this.findElement(a).prop("disabled",!0))},enableControl:function(a){var b=this.find(a);b&&(b.action?this.actionsContext.enable(b.action):this.findElement(a).prop("disabled",!1))},findGroup:function(a){var b,c,d=this.options.data;for(b=0;b<d.length;b++)if(c=d[b],c.id===a)return c;return null},find:function(b){var c,d,e,f,g,h=this.options.data;for(c=0;c<h.length;c++)if(e=h[c].controls)for(d=0;d<e.length;d++)if(f=e[d],f.id===b)return f;for(g in this.menus)if(this.menus.hasOwnProperty(g)&&(f=a("#"+g).menu("find",b)))return f;return null},findElement:function(b){var c,d=this._getId({id:b});return c=a("#"+d)}})}(apex.jQuery,apex.util,apex.debug,apex.lang);
!function(a,b,c){"use strict";function d(a){return a.parent().children().index(a)}function e(a){var b=a.find("a");return b.length?b[0]:a[0]}var f="a-IconList",g="a-IconList-item",h="."+g,i="is-selected",j="."+i,k="is-focused",l="is-disabled",m="aria-selected",n="aria-multiselectable",o="aria-labelledby",p="u-RTL",q=b.ui.keyCode,r=0;b.widget("apex.iconList",{version:"5.0",widgetEventPrefix:"iconlist",options:{multiple:!1,label:!0,navigation:!1,contextMenuAction:null,contextMenu:null,contextMenuId:null,selectionChange:null,activate:null},columns:0,rows:0,forwardKey:q.RIGHT,backwardKey:q.LEFT,searchString:"",searchTimerId:null,_create:function(){var c,d=this,e=this.options,g=this.element;if(e.navigation&&(e.multiple=!1),g.addClass(f).attr("role","listbox"),e.multiple&&g.attr(n,"true"),"rtl"===g.css("direction")&&(g.addClass(p),this.forwardKey=q.LEFT,this.backwardKey=q.RIGHT),g.attr(o)?(c=b("#"+g.attr(o).split(" ").join(",#")).last(),this.infoId=c.attr("id")+"_info",c.append("<span id='"+this.infoId+"' class='u-VisuallyHidden'></span>")):(this.infoId=(g.attr("id")||"il"+r++)+"_info",g.before("<span id='"+this.infoId+"' class='u-VisuallyHidden'></span>"),g.attr(o,this.infoId),this.addedLabel=!0),e.contextMenu)if(b.apex.menu){if(e.contextMenu.menubar)throw"IconList contextMenu must not be a menubar";e.contextMenu._originalBeforeOpen=e.contextMenu.beforeOpen,e.contextMenu.beforeOpen=function(a,b){e.contextMenu._originalBeforeOpen&&(b.menuElement=d.contextMenu$,b.iconList=g,b.selection=d.getSelection(),e.contextMenu._originalBeforeOpen(a,b))},e.contextMenu._originalAfterClose=e.contextMenu.afterClose,e.contextMenu.afterClose=function(a,b){e.contextMenu._originalAfterClose&&(b.menuElement=d.contextMenu$,b.iconList=g,e.contextMenu._originalAfterClose(a,b)),b.actionTookFocus||d.focus()},this.contextMenu$=b("<div style='display:none'></div>").appendTo("body"),e.contextMenuId&&(this.contextMenu$[0].id=e.contextMenuId),this.contextMenu$.menu(e.contextMenu),e.contextMenuAction&&a.warn("IconList contextMenuAction option ignored when contextMenu option present"),e.contextMenuAction=function(a){var c,e;"contextmenu"===a.type?d.contextMenu$.menu("toggle",a.pageX,a.pageY):(c=b(a.target),e=c.offset(),d.contextMenu$.menu("toggle",e.left,e.top+c.closest("a-IconList-item").outerHeight()))}}else a.warn("IconList contextMenu option ignored because menu widget not preset");this._on(this._eventHandlers),this.refresh(),e.disabled&&this._setOption("disabled",e.disabled)},_eventHandlers:{resize:function(a){a.target===this.element[0]&&(this._dim(),a.stopPropagation())},click:function(a){var c;this.options.navigation&&b(a.target).closest("a").length>0&&(a.shiftKey||a.ctrlKey)||(c=b(a.target).closest(h),c.length&&(this._select(c,a,!0,!1),this.options.navigation&&this._activate(a),a.preventDefault()))},dblclick:function(a){var c;this.options.navigation||(c=b(a.target).closest(h),c.length&&this._activate(a))},mousedown:function(a){a.preventDefault()},keydown:function(a){var c,e,f,g=this.element,j=null,k=a.which;k===q.HOME?j=g.children().first():k===q.END?j=g.children().last():k===q.DOWN?this.lastFocused&&(c=this._index2RowCol(d(b(this.lastFocused).closest(h))),e=g.children(),c.row<Math.floor((e.length-1)/this.columns)&&(f=this._rowCol2Index(c.row+1,c.column),f>=e.length&&(f=e.length-1),j=e.eq(f))):k===q.UP?this.lastFocused&&(c=this._index2RowCol(d(b(this.lastFocused).closest(h))),e=g.children(),f=this._rowCol2Index(c.row-1,c.column),f>=0&&(j=e.eq(f)),a.stopPropagation()):k===this.backwardKey?this.lastFocused&&(j=b(this.lastFocused).closest(h).prev(),0===j.length&&(j=b(this.lastFocused).closest(h))):k===this.forwardKey?this.lastFocused&&(j=b(this.lastFocused).closest(h).next(),0===j.length&&(j=b(this.lastFocused).closest(h))):k===q.SPACE?this.lastFocused&&!this.searchTimerId&&(j=b(this.lastFocused).closest(h)):k===q.ENTER?"A"!==a.target.nodeName&&this._activate(a):this.options.contextMenuAction&&a.shiftKey&&121===k&&(this.lastFocused&&!b(this.lastFocused).closest(h).hasClass(i)&&this._select(b(this.lastFocused).closest(h),{},!0,!1),this.options.contextMenuAction(a),a.preventDefault()),j&&(this._select(j,a,!0,!0),a.preventDefault())},keypress:function(a){var b,c,d=this;if(0!==a.which&&this.options.label){if(b=String.fromCharCode(a.which).toLowerCase(),this.searchTimerId)b!==this.searchString&&(this.searchString+=b),clearTimeout(this.searchTimerId),this.searchTimerId=null;else{if(" "===b)return;this.searchString=b}this.searchTimerId=setTimeout(function(){d.searchTimerId=null},500),c=this._findItem(this.searchString),c&&this._select(c,{},!0,!0)}},focusin:function(a){var c=b(a.target).closest(h);0!==c.length&&(c.addClass(k),this._setFocusable(a.target))},focusout:function(a){var c=b(a.target).closest(h);c.removeClass(k)},contextmenu:function(a){var c,d=this.options.contextMenuAction;d&&(c=b(a.target).closest(h).not(j),c.length&&this._select(c,{},!0,!1),d(a),a.preventDefault())}},_destroy:function(){this.element.removeClass(f+" "+l+" "+p).removeAttr("role").removeAttr(n).children().removeClass(g).removeAttr("role").removeAttr(m).removeAttr("tabindex"),this.element.find("a").removeAttr("tabindex").removeAttr("role"),this.contextMenu$&&this.contextMenu$.remove(),b("#"+this.infoId).remove(),this.addedLabel&&this.element.removeAttr(o)},_setOption:function(a,b){var c=this.options;if("multiple"===a)c.navigation&&(b=!1);else{if("contextMenu"===a||"contextMenuId"===a)throw"IconList "+a+" cannot be set";if("contextMenuAction"===a&&this.options.contextMenu)throw"IconList contextMenuAction cannot be set when the contextMenu option is used";if("navigation"===a)throw"IconList navigation option cannot be set"}this._super(a,b),"disabled"===a?(this.element.toggleClass(l,b),this.lastFocused&&(b?this.lastFocused.tabIndex=-1:this._setFocusable(this.lastFocused)),b&&this._dim()):"multiple"===a&&(b?this.element.attr(n,"true"):this.element.removeAttr(n))},refresh:function(){var a,c=this.options,d=this.element;d.find("a").attr("tabindex",-1).attr("role","option"),d.children().addClass(g).filter(function(){return 0===b(this).find("a").length}).attr("role","option").attr("tabindex",-1),this._dim(),a=d.find(j+h),a.length>0?this.setSelection(a,!1):(this.lastFocused&&b(this.lastFocused).is(":visible")||(this.lastFocused=e(d.children().first())),this.selectAnchor=this.lastFocused,this.lastFocused&&!c.disabled&&this._setFocusable(this.lastFocused))},resize:function(){this._dim()},focus:function(){this.lastFocused&&this.lastFocused.focus()},getColumns:function(){return this.columns},getRows:function(){return this.rows},getSelection:function(){return this.element.find(j)},getSelectionValues:function(){var a=[];return this.element.find(j).each(function(){a.push(b(this).attr("data-value"))}),a},setSelection:function(a,b){b=!!b,this._select(a,null,b,!1,!0)},_rowCol2Index:function(a,b){return a*this.columns+b},_index2RowCol:function(a){var b=Math.floor(a/this.columns);return{row:Math.floor(a/this.columns),column:a-b*this.columns}},_dim:function(){var a,c,d,e=this,f=this.element.width(),g=this.element.children(),h=g.length;h&&(a=g.first().position().top,d=g.first().outerWidth()),this.columns=h,g.each(function(c){var d=b(this).position().top;if(d>a)return a=d,e.columns=c,!1}),h>0?this.rows=Math.floor((h+this.columns-1)/this.columns):this.rows=0,1===this.rows&&(this.columns=Math.floor(f/d)),c=apex.lang.formatMessage("APEX.ICON_LIST.GRID_DIM",this.columns,this.rows),b("#"+this.infoId).text(c)},_findItem:function(a){var c,d,e,f=a.length,g=this.options.label;for(d=e=b(this.lastFocused).closest(h),1===f&&(d=d.next()),0===d.length&&(d=this.element.children().first());d.length>0;){if(c=g===!0?d.text():d.find(g).text(),c.substring(0,f).toLowerCase()===a)return d;if(d=d.next(),0===d.length&&(d=this.element.children().first()),d[0]===e[0])break}return null},_setFocusable:function(a){this.lastFocused&&this.lastFocused!==a&&(this.lastFocused.tabIndex=-1),a.tabIndex=0,this.lastFocused=a},_activate:function(a){var b,c;this._trigger("activate",a,{values:this.getSelectionValues()}),this.options.navigation&&!a.isDefaultPrevented()&&(b=this.getSelection(),c=b.attr("href")||b.find("a").attr("href"),c&&(a.preventDefault(),apex.navigation.redirect(c)))},_select:function(a,c,f,g,h){var k,l,n,o,p,q,r,s,t,u="set",v=this,w=this.element.find(j);a=a.filter(":visible"),c&&this.options.multiple&&("click"===c.type?c.ctrlKey||c.metaKey?u="toggle":c.shiftKey&&(u="range"):"keydown"===c.type&&(c.keyCode===b.ui.keyCode.SPACE?u=c.ctrlKey?"toggle":c.shiftKey?"range":"add":c.ctrlKey?u="none":c.shiftKey&&(u="range"))),"range"!==u||this.selectAnchor||(u="set"),"set"!==u&&"range"!==u||w.removeClass(i).removeAttr(m),k=a.hasClass(i),"set"===u||"add"===u||"toggle"===u&&!k?(a.addClass(i).attr(m,!0),this.selectAnchor=a[0]):"range"===u?(this.element.children().removeClass(i).removeAttr(m),q=d(b(this.selectAnchor)),r=d(a.last()),q>r&&(s=r,r=q,q=s),this.element.children().filter(function(a){return a>=q&&a<=r}).addClass(i).attr(m,!0)):"toggle"===u&&k&&(a.removeClass(i).removeAttr(m),this.selectAnchor=a[0]),a.length>0&&(t=e(a.first()),f?(t.tabIndex=0,t.focus()):this._setFocusable(t),n=this.element.scrollParent(),o=n.offset(),o&&(p=this.element.offset(),l=a.first().offset(),(l.top<o.top||l.top>o.top+n[0].offsetHeight)&&(n[0].scrollTop=l.top-p.top),(l.left+a[0].offsetWidth<o.left||l.left>o.left+n[0].offsetWidth)&&(n[0].scrollLeft=l.left-p.left))),h||this.options.navigation&&"click"===c.type||("toggle"===u||"range"===u&&!k||"add"===u&&!k||"set"===u&&(w[0]!==a[0]||w.length!==a.length))&&(v.triggerTimerId&&(clearTimeout(v.triggerTimerId),v.triggerTimerId=null),v.triggerTimerId=setTimeout(function(){v.triggerTimerId=null,v._trigger("selectionChange",c)},g?350:1))}})}(apex.debug,apex.jQuery);
!function(a,b,c,d,e,f){"use strict";var g="a-Combobox",h="."+g,i=g+"-wrapper",j="."+i,k="a-Button",l=k+"--withIcon",m=k+"--noLabel",n="a-Icon",o="icon-menu-drop-down",p="js-menuButton",q="combobox",r="-values",s="-menu",t="-showAll";a.widget("apex."+q,{version:"5.1",widgetEventPrefix:q,options:{source:[],multipleValues:!1,multipleValueDelimiter:",",label:""},_create:function(){var f=b.htmlBuilder(),k=this,l=this.options,m=a(h).length;this.baseId=this.element[0].id||q+(m+1),this.actions=c.createContext(q,this.element[0]),l.label&&e.warn("Label not provided, which is an accessibility issue (unless the 'label' option is later set)."),f.markup("<span").attr("class",i).markup("></span>"),this.element.wrap(f.toString()).addClass(g),this.wrapper$=this.element.closest(j),this._createShowAllButton(),this._on(this.element,{keydown:function(b){(b.altKey||b.metaKey)&&b.which===a.ui.keyCode.DOWN&&(k.menu$.menu("open",k.element,!1),k.menu$.find(":focusable").first().focus())}}),this.actions.add({name:this.baseId+r,label:d.getMessage("APEX.COMBOBOX.LIST_OF_VALUES"),set:function(a){var b=k.element.val();l.multipleValues?k.element.val((b?b+l.multipleValueDelimiter:b)+a):k.element.val(a),b!==k.element.val()&&k.element.change()},get:function(){return k.element.val()},choices:l.source})},_setOption:function(b,c){switch(this._super(b,c),b){case"multipleValues":break;case"source":this.actions.lookup(this.baseId+r).choices=c,this.actions.updateChoices(this.baseId+r);break;case"label":a("#"+this.baseId+t,this.wrapper$).attr("title",d.formatMessage("APEX.COMBOBOX.SHOW_ALL_VALUES",c)).attr("aria-label",d.formatMessage("APEX.COMBOBOX.SHOW_ALL_VALUES",c))}},_createShowAllButton:function(){var c=b.htmlBuilder();c.markup("<button type='button'").attr("id",this.baseId+t).attr("tabindex","-1").attr("title",d.formatMessage("APEX.COMBOBOX.SHOW_ALL_VALUES",this.options.label)).attr("aria-label",d.formatMessage("APEX.COMBOBOX.SHOW_ALL_VALUES",this.options.label)).attr("class",k+" "+l+" "+m+" "+p).attr("data-menu",this.baseId+s).attr("aria-haspopup",!0).attr("aria-expanded",!1).markup(">"),c.markup("<span").attr("aria-hidden",!0).attr("class",n+" "+o).markup(">").markup("</span>"),c.markup("</button>"),this.wrapper$.append(c.toString()),this.menu$=a("<div/>",{id:this.baseId+s,"class":"",style:"display:none;"}).appendTo("body"),this.menu$.menu({actionsContext:this.actions,items:[{type:"radioGroup",action:this.baseId+r}]})},_destroy:function(){this.element.insertBefore(this.wrapper$),this.wrapper$.remove(),this.menu$.remove(),this.element.removeClass(g),c.removeContext(q,this.element[0])}})}(apex.jQuery,apex.util,apex.actions,apex.lang,apex.debug);
!function(a,b,c,d){"use strict";var e="a-Splitter",f="."+e,g="a-Splitter-barH",h="a-Splitter-barV",i="."+g+",."+h,j="a-Splitter--end",k="a-Splitter-thumb",l="."+k,m="u-RTL",n="is-focused",o="is-active",p="is-collapsed",q="is-disabled",r="button",s="title";a.widget("apex.splitter",{version:"5.0",widgetEventPrefix:"splitter",options:{orientation:"horizontal",positionedFrom:"begin",minSize:60,position:100,noCollapse:!1,dragCollapse:!0,collapsed:!1,snap:!1,inc:10,realTime:!1,iframeFix:!1,restoreText:null,collapseText:null,title:null,change:null},lastPos:null,bar$:null,before$:null,after$:null,horiz:!0,fromEnd:!1,barSize:1,_create:function(){var d,g,h,i,j,k,p=this,q=this.options,s=this.element,t=b.htmlBuilder(),u=a.ui.keyCode,v=!!q.snap&&[1*q.snap,1*q.snap],w=q.noCollapse?0:1,x=null;if(2!==s.children().length)throw new Error("Splitter must have exactly two children.");if("horizontal"!==q.orientation&&"vertical"!==q.orientation)throw new Error("Orientation bad value");if("begin"!==q.positionedFrom&&"end"!==q.positionedFrom)throw new Error("PositionedFrom bad value");if(q.minSize<w&&(q.minSize=w,c.warn("Option minSize adjusted")),this.horiz="horizontal"===q.orientation,this.fromEnd="end"===q.positionedFrom,k=this.horiz?"left":"top",this.before$=s.children().eq(0),this.after$=s.children().eq(1),s.addClass(e+" resize"),"rtl"===s.css("direction")&&(s.addClass(m),this.horiz&&(this.before$=s.children().eq(1),this.after$=s.children().eq(0),this.fromEnd=!this.fromEnd)),s.parent(f).length>0||this.before$.is(f)||this.after$.is(f))throw new Error("Child of splitter cannot be a splitter");this.before$[0].id||(this.before$[0].id=(s[0].id||"splitter")+"_first"),this.after$[0].id||(this.after$[0].id=(s[0].id||"splitter")+"_second"),q.position<q.minSize&&(q.position=q.minSize),this.lastPos=q.position,q.snap&&(q.inc=q.snap),this._renderBar(t),this.bar$=a(t.toString()).insertAfter(s.children().eq(0)),this.horiz?this.barSize=this.bar$.width():this.barSize=this.bar$.height(),s.css({position:"relative"}).children().css({position:"absolute"}),this.horiz?(d=this.bar$.position()[k],g=0,h="e-resize",this.fromEnd?(i=u.LEFT,j=u.RIGHT):(i=u.RIGHT,j=u.LEFT)):(d=0,g=this.bar$.position()[k],h="s-resize",this.fromEnd?(i=u.UP,j=u.DOWN):(i=u.DOWN,j=u.UP)),this.bar$.css({left:d,top:g}).draggable({axis:p.horiz?"x":"y",containment:"parent",cancel:r,cursor:h,iframeFix:q.iframeFix,grid:v,scroll:!1,drag:function(a,b){var c;q.realTime&&(c=b.position[k],p.fromEnd&&(c=(p.horiz?s.width():s.height())-c-p.barSize),p._setPos(c,!1))},start:function(a,b){p.bar$.addClass(o)},stop:function(a,b){var c=b.position[k];p.bar$.removeClass(o),p.fromEnd&&(c=(p.horiz?s.width():s.height())-c-p.barSize),p._setPos(c,!1)}}).click(function(){a(this).find(l).focus()}).find(r).click(function(){p._setPos(p._getPos(),!p._isCollapsed())}),this.bar$.find(l).focus(function(){a(this).parent().addClass(n+" "+o)}).blur(function(){a(this).parent().removeClass(n+" "+o)}).keydown(function(a){var b,c,d=a.keyCode,e=null,f=!1;if(d!==j||q.collapsed?d===i&&(e=p._getPos(),e<0?(q.noCollapse||(f=!0),e=0):e+=q.inc,b=p._getMaxPos(),e>b&&(e=b)):(e=p._getPos(),e-=q.inc,e<q.minSize&&q.noCollapse&&(e=q.minSize),e<0&&(e=0)),null!==e)return c=e,p.fromEnd&&(c=(p.horiz?s.width():s.height())-c-p.barSize),p.bar$.css(k,c),x&&(clearTimeout(x),x=null),x=setTimeout(function(){x=null,p._setPos(e,f)},100),!1}),this._on(!0,this._eventHandlers),q.disabled&&this._setOption("disabled",q.disabled),this.refresh()},_eventHandlers:{resize:function(c){var d,e,f,g,h=this.options,i=this.element;if(c.target===i[0]){if(d=i.height(),e=i.width(),0===d||0===e)throw new Error("Splitter needs to be in a component with size");g=i.offset(),this.horiz?(i.children().each(function(){b.setOuterHeight(a(this),d)}),this.fromEnd?(f=[g.left+h.minSize,g.top,g.left+e-this.barSize,g.top+d],h.dragCollapse&&!h.noCollapse||(f[2]-=h.minSize)):(f=[g.left,g.top,g.left+e-this.barSize-h.minSize,g.top+d],h.dragCollapse&&!h.noCollapse||(f[0]+=h.minSize+1))):(i.children().each(function(){b.setOuterWidth(a(this),e)}),this.fromEnd?(f=[g.left,g.top+h.minSize,g.left+e,g.top+d-this.barSize],h.dragCollapse&&!h.noCollapse||(f[3]-=h.minSize)):(f=[g.left,g.top,g.left+e,g.top+d-this.barSize-h.minSize],h.dragCollapse&&!h.noCollapse||(f[1]+=h.minSize+1))),this._setPos(h.position,h.collapsed),this.bar$.draggable("option","containment",f),i.children(".resize").filter(":visible").trigger("resize"),c.stopPropagation()}}},_destroy:function(){this.element.removeClass(e+" "+q+" "+m+" resize").children(i).remove(),this.element.children().css("position","")},refresh:function(){this.element.is(":visible")&&this.element.trigger("resize")},_setOption:function(b,d){var e,f,g;if(this.options.noCollapse&&("collapsed"===b||"restoreText"===b||"collapseText"===b))return void c.warn("Setting "+b+" option on noCollapse splitter has no effect.");if("orientation"===b||"positionedFrom"===b||"noCollapse"===b)throw new Error("Readonly option: "+b);"position"===b?this._setPos(1*d,this._isCollapsed()):"collapsed"===b?this._setPos(this._getPos(),!!d):"snap"===b?(d=!!d&&1*d,this.options.snap=d,e=!!d&&[d,d],this.bar$.draggable("option","grid",e),d&&(this.options.inc=d)):"inc"===b?(d=1*d,this.options.snap&&(d=this.options.snap),this.options.inc=d):"disabled"===b?(this.options.disabled=d,g=this.bar$.find(l),this.options.noCollapse?d?g.removeAttr("tabindex"):g.attr("tabindex","0"):(g[0].disabled=d,d?g.attr(s,this.options.title):g.attr(s,this.options.collapsed?this.options.restoreText:this.options.collapseText)),this.bar$.draggable("option","disabled",d),d?(this.element.addClass(q),this.bar$.addClass(q),g.attr("aria-disabled",!0)):(g.removeAttr("aria-disabled"),this.bar$.removeClass(q),this.element.removeClass(q))):"minSize"===b?(f=this.options.noCollapse?0:1,d<f&&(d=f,c.warn("Option minSize adjusted")),this.options.minSize=d):a.Widget.prototype._setOption.apply(this,arguments),"title"===b?(this.bar$.attr(s,d),(this.options.noCollapse||this.options.disabled)&&this.bar$.find(l).attr(s,d)):"restoreText"===b&&this.options.collapsed&&!this.options.disabled?this.bar$.find(r).attr(s,d):"collapseText"!==b||this.options.collapsed||this.options.disabled?"iframeFix"===b?this.bar$.draggable("option","iframeFix",d):"dragCollapse"===b&&this.refresh():this.bar$.find(r).attr(s,d)},_renderBar:function(a){var b=this.options,c=this.horiz?g:h;this.fromEnd&&(c+=" "+j),b.noCollapse&&(b.collapsed=!1),b.collapsed&&(c+=" "+p),a.markup("<div").attr("class",c).optionalAttr(s,b.title).markup("><div></div>"),b.noCollapse?a.markup("<span role='separator' class='"+k+"' tabindex='0' aria-expanded='true'").optionalAttr(s,b.title).markup("></span>"):a.markup("<button role='separator' class='"+k+"' type='button'").attr("aria-expanded",!b.collapsed).optionalAttr(s,b.collapsed?b.restoreText:b.collapseText).markup("></button>"),a.markup("</div>")},_getPos:function(){var a=this.element,b=this.horiz?"left":"top",c=this.bar$.position()[b];return this.fromEnd&&(c=(this.horiz?a.width():a.height())-c-this.barSize),c},_isCollapsed:function(){return this.bar$.hasClass(p)},_getMaxPos:function(){var a=this.options,b=this.element;return this.horiz?b.width()-this.barSize-a.minSize:b.height()-this.barSize-a.minSize},_setPos:function(a,c){var d,e,f,g,h,i,j=this.options,k=this.element,m=this.horiz?"left":"top",n=this._isCollapsed(),o=this.lastPos;j.noCollapse&&(c=!1),n&&!c&&(a=this.lastPos,a<j.minSize&&(a=j.minSize)),a<j.minSize?j.noCollapse?a=j.minSize:c=!0:(d=this._getMaxPos(),a>d&&(a=d)),j.noCollapse&&a<=0&&(a=0),a>0&&(this.lastPos=a),c&&(a=0,j.position=0),e=this.horiz?k.width():k.height(),h=a,this.fromEnd&&(h=e-a-this.barSize),this.bar$.css(m,h),i=this.bar$.find(l),this.fromEnd?(f=this.after$,g=e-h-this.barSize):(f=this.before$,g=h),c?(this.bar$.addClass(p),j.disabled||i.attr("aria-expanded",!1).attr(s,j.restoreText),f.hide()):(j.noCollapse?f.toggle(0!==a):(this.bar$.removeClass(p),j.noCollapse||j.disabled||i.attr("aria-expanded",!0).attr(s,j.collapseText),f.show()),this.horiz?b.setOuterWidth(f,g):b.setOuterHeight(f,g)),this.fromEnd?(f=this.before$,g=h):(f=this.after$,g=e-h-this.barSize),this.horiz?b.setOuterWidth(f,g):b.setOuterHeight(f,g),j.noCollapse&&f.toggle(0!==g),this.after$.css(m,h+this.barSize+"px"),this.before$.css(m,0),(!c&&a!==o||n!==c)&&(j.collapsed=c,j.position=a,k.children(".resize").filter(":visible").trigger("resize"),this._trigger("change",{},{position:j.position,collapsed:j.collapsed,lastPosition:this.lastPos}))}});var t=0,u=0;a.apex.splitter.nextSplitter=function(b){var c,d,e,j=b?-1:1,k=a(document.activeElement);if(!(t>0||u>0))return d=a(f+" >."+g+","+f+" >."+h).filter(":visible").not(".ui-state-disabled").add(k),e=d.index(k),e>=0&&(e+=j,b&&k.parent().is(i)&&(e+=j),e>=0&&e<d.length&&(c=d.eq(e))),(c&&0===c.length&&!k.parent().is(i)||k.is("html,body"))&&(c=a(f+" >."+g+","+f+" >."+h).filter(":visible").not(".ui-state-disabled")[b?"last":"first"]()),c&&c.length>0?(c.children(l).focus(),!0):void 0},a(document).ready(function(){a(document.body).on("menubeforeopen",function(){u+=1}).on("menuafterclose",function(){u-=1}).on("dialogopen",function(){t+=1}).on("dialogclose",function(){t-=1})}),apex.message&&apex.message.addVisibilityCheck(function(b){var c=a("#"+b);c.parents(".a-Splitter").each(function(){c.is(":visible")||a(this).splitter("option","collapsed",!1)})})}(apex.jQuery,apex.util,apex.debug);
!function(a,b,c,d,e,f,g){"use strict";var h="a-GV-noDataMsg",i="a-GV-moreDataMsg",j="a-GV-altMessage",k="."+j,l=j+"-text",m="."+l,n=j+"-icon",o="a-GV-footer",p="a-GV--hideDeleted",q="a-GV-scrollFiller",r="."+q,s="is-deleted",t="."+s,u="aria-selected",v="is-active",w="is-selected",x="is-expanded",y="."+w,z="aria-labelledby",A="js-tabbable",B="."+A,C=":tabbable",D="data-start",E="data-end",F=300,G="apexbeginrecordedit",H="apexendrecordedit";f.widget("apex.tableModelViewBase",{version:"5.1",widgetEventPrefix:"tableModelViewBase",options:{modelName:null,noDataMessage:null,moreDataMessage:null,autoAddRecord:!1,hasSize:!1,stickyFooter:!1,pagination:{scroll:!1,loadMore:!1,showPageLinks:!1,maxLinks:5,showPageSelector:!1,showRange:!0,firstAndLastButtons:!1},rowsPerPage:null,hideDeletedRows:!1,footer:!0},firstPage:function(){var a;this.options.pagination.scroll?(a=this.scrollParent$,a.scrollTop(this.scrollDelta)):this.pageOffset>0&&(this.pageOffset=0,this.refresh(!1))},previousPage:function(){var a,b;this.options.pagination.scroll?(a=this.scrollParent$,b=a.scrollTop()-this.scrollDelta-this.displayPageHeight,b<0&&(b=0),a.scrollTop(b+this.scrollDelta)):this.pageOffset>0&&(this.pageOffset-=this.pageSize,this.pageOffset<0&&(this.pageOffset=0),this.refresh(!1))},nextPage:function(){var a,b,c,d;this.options.pagination.scroll?(a=this.scrollParent$,b=this._getDataContainer().first().height()-this.displayPageHeight,c=a.scrollTop()-this.scrollDelta+this.displayPageHeight,c>b&&(c=b),a.scrollTop(c+this.scrollDelta)):(d=this.model.getTotalRecords(),(d<0||this.pageOffset+this.pageCount<d)&&(this.pageOffset+=this.pageSize,this.refresh(!1)))},lastPage:function(){var a,b,c,d;this.options.pagination.scroll?(b=this.scrollParent$,c=this._getDataContainer().first().height()-this.displayPageHeight,b.scrollTop(c+this.scrollDelta)):(d=this.model.getTotalRecords(),d>0&&(a=Math.ceil(d/this.pageSize),this.pageOffset=(a-1)*this.pageSize,this.refresh(!1)))},loadMore:function(){var a=this.model.getTotalRecords();this.options.pagination.scroll&&!this.scrollPaging?(a<0||this.pageOffset+this.pageCount<a-1)&&(this.pageOffset+=this.pageSize,this._addPageOfRecords()):this.nextPage()},gotoPage:function(a){var b,c=this.model.getTotalRecords();c>0&&(b=Math.ceil(c/this.pageSize),a>=0&&a<b&&(this.pageOffset=a*this.pageSize,this.refresh(!1)))},addStateIcon:function(b,c,d){var e=a.htmlBuilder();this.stateIconMessages[b]=d,0===this.stateIcons$.find("[data-state='"+b+"']").length&&(e.markup("<span tabindex='0'").attr("class",c).attr("data-state",b).markup("></span>"),this.stateIcons$.append(e.toString()))},removeStateIcon:function(a){this.stateIcons$.find("[data-state='"+a+"']").remove(),delete this.stateIconMessages[a]},_tableModelViewInit:function(){var a=this.options;a.hideDeletedRows&&this.element.addClass(p),this.pageOffset=0,this.pageCount=0,this.pageSize=10,this.noData=!0,this.onLastPage=!1,this.lastScrollLeft=null,this.lastScrollTop=null,this.stateIconMessages={},this.reinitCallbacks=null,this.columnItems=null,this.columnItemsContainer$=null,a.pagination.scroll&&(a.rowsPerPage=null),a.rowsPerPage&&(this.pageSize=a.rowsPerPage)},_tableModelViewDestroy:function(){this.footer$.remove(),this.footer$=null,this.pageRange$=null,this.pageSelector$=null,this.status$=null,this.stateIcons$=null,this.element.removeClass(p),f(window).off("scroll.gv")},_initModel:function(a,c){function d(a,b){var c,d,h,i,j,k,l,m,n,o;if("refresh"===a)g.pageOffset=0,g.pageCount=0,g.refresh(!1,!0);else if("refreshRecords"===a||"revert"===a)for(d=g._elementsFromRecordIds(b.recordIds),c=0;c<d.length;c++)h=d[c],h&&(i=b.records[c],k=b.recordIds[c],j=b.newIds[k]||k,l=g.model.getRecordMetadata(j),g._replaceRecord(h,i,k,j,l));else if("move"===a)for(o=b.records,b.insertAfterId&&(d=g._elementsFromRecordIds([b.insertAfterId]),h=d.length>0?d[0]:null),c=o.length-1;c>=0;c--)i=o[c],j=g.model.getRecordId(i),l=g.model.getRecordMetadata(j),d=g._elementsFromRecordIds([j]),d.length>0&&d[0]&&g._removeRecord(d[0]),m=g._insertRecord(h,i,j,l,h?"after":"before");else if("insert"===a||"copy"===a){if(o="insert"===a?[b.record]:b.records,b.insertAfterId&&(d=g._elementsFromRecordIds([b.insertAfterId]),h=d.length>0?d[0]:null),g.noData)g.refresh(!1,!0),n=g._elementsFromRecordIds([g.model.getRecordId(o[0])]);else for(n=[],c=o.length-1;c>=0;c--)i=o[c],j=g.model.getRecordId(i),l=g.model.getRecordMetadata(j),m=g._insertRecord(h,i,j,l,h?"after":"before"),n.push(m);g._afterInsert(n)}else if("clearChanges"===a){if(e)for(d=g._elementsFromRecordIds(b.deletedIds),c=0;c<d.length;c++)d[c]&&g._removeRecord(d[c]);for(d=g._elementsFromRecordIds(b.changedIds),c=0;c<d.length;c++)h=d[c],h&&(j=b.changedIds[c],l=g.model.getRecordMetadata(j),g._updateRecordState(h,j,l))}else if(b.recordIds){for(d=g._elementsFromRecordIds(b.recordIds),c=0;c<d.length;c++)h=d[c],h&&(j=b.recordIds[c],l=g.model.getRecordMetadata(j),"delete"===a?(!f.hideDeletedRows&&e||g._removeFocus(h),e&&null!==l?g._updateRecordState(h,j,l):g._removeRecord(h)):g._updateRecordState(h,j,l));"delete"===a&&(0===g.model.getTotalRecords()?g.refresh(!0,!0):f.hideDeletedRows&&(g.element.find(t).removeClass(w).removeAttr(u),g._updateStatus()))}else"set"===a||"metaChange"===a?g.ignoreFieldChange||(j=g.model.getRecordId(b.record),b.oldIdentity&&g._identityChanged(b.oldIdentity,j),l=g.model.getRecordMetadata(j),d=g._elementsFromRecordIds([j]),d.length>0&&d[0]&&("set"===a&&g._updateRecordField(d[0],b.record,b.field,l),g._updateRecordState(d[0],j,l))):"instanceRename"===a&&g.modelName[1]===b.oldInstance&&(g.modelName[1]=b.newInstance);g._updateTotalRecords()}var e,f=this.options,g=this;if(this.model&&(this.model.unSubscribe(this.modelViewId),this.modelName!==a&&b.release(this.modelName),this.model=null,this.modelName=null),a){if(this.modelName=a,this.model=b.get(a),!this.model)throw new Error("Model not found: "+a);this.modelViewId=this.model.subscribe({onChange:c||d,progressView:this.element}),e=this.model.getOption("onlyMarkForDelete")}},_renderButton:function(a,b,c,d){a.markup("<button class='"+b+"' type='button'").attr("aria-label",d).attr("title",d).markup("><span aria-hidden='true' class='a-Icon ").attr(c).markup("'></span></button>")},_renderAltDataMessages:function(a){function b(b,c,d){a.markup("<div class='"+b+" "+j+"' style='display:none;'><div class='"+n+"'>").markup("<span aria-hidden='true' class='a-Icon "+c+"'></span>").markup("</div><span class='"+l+"'>").content(d).markup("</span></div>")}b(h,"icon-irr-no-results",this.options.noDataMessage),b(i,"icon-warning",this.options.moreDataMessage)},_renderLoadMore:function(a){var b=this.options;b.pagination.scroll&&b.pagination.loadMore&&!this.scrollPaging&&a.markup("<div class='a-GV-loadMore'><button type='button' class='js-load a-GV-loadMoreButton'>").content(d.getMessage("APEX.GV.LOAD_MORE")).markup("</button></div>")},_renderFooter:function(a){var b,c,e=this.options;e.footer&&(a.markup("<div class='"+o+"'><div class='a-GV-stateIcons'></div><div class='a-GV-status'></div><div class='a-GV-pagination'>"),e.pagination&&(b=!1,c=this.model.getOption("hasTotalRecords"),e.pagination.scroll||(c&&e.pagination.firstAndLastButtons&&this._renderButton(a,"a-GV-pageButton a-GV-pageButton--nav js-pg-first","icon-first",d.getMessage("APEX.GV.FIRST_PAGE")),this._renderButton(a,"a-GV-pageButton a-GV-pageButton--nav js-pg-prev","icon-prev",d.getMessage("APEX.GV.PREV_PAGE"))),c&&(e.pagination.showPageLinks||e.pagination.showPageSelector)?a.markup("<span class='a-GV-pageSelector'></span>"):e.pagination.showRange&&(a.markup("<span class='a-GV-pageRange'></span>"),b=!0),e.pagination.scroll||(this._renderButton(a,"a-GV-pageButton a-GV-pageButton--nav js-pg-next","icon-next",d.getMessage("APEX.GV.NEXT_PAGE")),c&&e.pagination.firstAndLastButtons&&this._renderButton(a,"a-GV-pageButton a-GV-pageButton--nav js-pg-last","icon-last",d.getMessage("APEX.GV.LAST_PAGE"))),!b&&e.pagination.showRange&&a.markup("<span class='a-GV-pageRange'></span>")),a.markup("</div></div>"))},_refreshPagination:function(a){var b=this.options;this.scrollPaging=b.pagination.scroll&&(this.model.getOption("hasTotalRecords")||!b.pagination.loadMore),this.lastScrollTop=0,this.lastScrollLeft=0,a.length&&(b.hasSize||(a=f(window)),this.lastScrollLeft=a.scrollLeft(),this.lastScrollTop=a.scrollTop())},_initPaginationFooter:function(a){var b=this,c=this.options,d=this.element.hasClass("u-RTL")?"right":"left";this.pageKey=null,this.footer$=this.element.find("."+o),this.status$=this.footer$.find(".a-GV-status"),this.stateIcons$=this.footer$.find(".a-GV-stateIcons"),this.pageRange$=this.footer$.find(".a-GV-pageRange"),this.pageSelector$=this.footer$.find(".a-GV-pageSelector"),this.noData$=this.element.find("."+h),this.moreData$=this.element.find("."+i),f.ui.tooltip&&this.stateIcons$.tooltip({content:function(){var a=f(this).attr("data-state");return b.stateIconMessages[a]},items:"[data-state]",show:apex.tooltipManager.defaultShowOption(),tooltipClass:"a-GV-tooltip",position:{my:d+" bottom",at:d+" top-10",collision:"flipfit"}}),c.hasSize?(this.scrollParent$=a,a.scroll(function(){b.scrollPaging&&b._scrollPage()}),this.scrollDelta=0):(this.scrollParent$=f(window),this.scrollPaging&&(f(window).off("scroll.gv"),f(window).on("scroll.gv",function(){b._scrollPage()})),this.scrollDelta=this.element.offset().top-this._getStickyTop()),c.pagination.scroll&&(this.pageOffset=0,this.pageCount=0),!c.hasSize&&c.footer&&c.stickyFooter&&f.apex.stickyWidget&&this.footer$.stickyWidget({isFooter:!0,toggleWidth:!0,stickToEnd:!0,top:function(){return b.element.offset().top+b._getHeaderHeight()}}),c.pagination.showPageLinks?this.pageSelector$.click(function(a){var c=f(a.target).parent();c.length&&b.gotoPage(parseInt(c.attr("data-value"),10)),a.preventDefault()}):c.pagination.showPageSelector&&this.pageSelector$.change(function(a){b.gotoPage(parseInt(f(a.target).val(),10))}),this.footer$.find(".js-pg-first").click(function(){b.firstPage()}),this.footer$.find(".js-pg-prev").click(function(){b.previousPage()}),this.footer$.find(".js-pg-next").click(function(){b.nextPage()}),this.footer$.find(".js-pg-last").click(function(){b.lastPage()}),this.element.find(".js-load").click(function(){b.loadMore()})},_footerHeight:function(){return this.footer$?this.footer$.outerHeight()||0:0},_addPageOfRecords:function(){function a(){var a,c,d,g,k,n=null,o=j.displayPageHeight/j.displayPageSize;if(j.pageCount=b,0===j.pageOffset&&0===b)j.noData=!0,i.hide(),j.moreData$.hide(),j.noData$.show(),l.autoAddRecord&&j.model.allowAdd()&&j._autoAddRecord();else{if(0===b)return void(l.pagination.scroll||(j.pageOffset-=j.pageSize,j.pageOffset<0&&(j.pageOffset=0),j._addPageOfRecords()));j.noData=!1,j.noData$.hide(),j.model.getDataOverflow()&&l.moreDataMessage?(j.moreData$.show(),i.hide()):(j.moreData$.hide(),i.show()),j.scrollPaging&&j.model.getOption("hasTotalRecords")?(a=h.last().find(r),d=j.model.getTotalRecords(),k=d,0===a.length?(c=j._getDataRenderContext(),j._renderFillerRecord(c,q),a=j._insertFiller(c,null),a.attr(D,0),a.attr(E,d-1),a=a.last()):0===a.last().next().length&&(k=parseInt(a.last().attr(E),10)),2===h.length&&(n=h.first().find(r)),d!==k&&(a.last().attr(E,d),n&&n.last().attr(E,d)),g=j._getRecordsPerRow(),a.each(function(d){var h,i,k=f(n?[n[d],this]:this),l=!1,p=parseInt(k.last().attr(D),10),r=parseInt(k.last().attr(E),10);if(j.pageOffset<=p?(l=!0,j._insertData(m,e,b,k,"before"),p=j.pageOffset+b):j.pageOffset+b<=r?(c=j._getDataRenderContext(),j._renderFillerRecord(c,q),i=j._insertFiller(c,k),h=Math.floor((j.pageOffset-p)/g)*o,i.attr(D,p),i.attr(E,j.pageOffset-1),i.css("height",h),j.scrollParent$.scrollTop(j.scrollParent$.scrollTop()-j.scrollParent$.height()),l=!0,j._insertData(m,e,b,k,"before"),p=j.pageOffset+b):j.pageOffset+b!==r+1&&d!==a.length-1||(l=!0,j._insertData(m,e,b,k,"after"),r=j.pageOffset-1),l)return p>=r?k.remove():(k.attr(D,p),k.attr(E,r),h=Math.floor((r-p)/g)*o,k.css("height",h)),!1})):j._insertData(m,e,b)}j._updateTotalRecords()}var b,c,d,e,h,i,j=this,l=this.options,m=this._getDataRenderContext();i=j.noData$.parent().children().not(k),(this.noData||this.moreData$.is(":visible"))&&(this.noData$.hide(),this.moreData$.hide(),i.show(),this.resize()),h=j._getDataContainer(),0!==this.pageOffset&&l.pagination.scroll||(this.lastControlBreak=null,this.pageFirstOffset="",this.pageLastOffset=""),this.controlBreakCollapsed=!1,l.pagination.scroll&&this.pageLastOffset>=this.pageOffset&&h.find(".a-GV-controlBreak").last().each(function(){j.controlBreakCollapsed=!f(this).hasClass(x)}),b=0,d=this.pageSize,e=this.pageOffset,this.renderInProgress=!0,this.model.forEachInPage(this.pageOffset,d,function(e,f,h){var i,j,k;!l.pagination.scroll&&f>=0&&(f<this.pageOffset||f>=this.pageOffset+this.pageSize)||(e&&(i=h?this.model.getRecordMetadata(h):{},this._hasControlBreaks()&&!i.agg&&(j=!0,c=this._controlBreakLabel(e),null===this.lastControlBreak&&(this.lastControlBreak=c,this._renderBreakRecord(m,j,c),this.controlBreakCollapsed=!1),i.endControlBreak&&(this.lastControlBreak=null)),this._renderRecord(m,e,f,h,i),k=i.serverOffset,k!==g&&(k+=1,""===this.pageFirstOffset&&(this.pageFirstOffset=k),this.pageLastOffset=k),b+=1),b!==d&&e||(a(),this.renderInProgress=!1))},this)},_initPageSize:function(){var b,c,d,e,g=this.options,h=g.hasSize?this.scrollParent$[0]:document;h||(h=document),b=this._getRecordHeight(),h===document?(c=f(window).height(),this.footer$.hasClass("js-stickyWidget-toggle")&&(c-=this._footerHeight()),e=this._getStickyTop(),e>0&&(c-=e+this._getHeaderHeight())):c=h.offsetHeight,c-=a.getScrollbarSize().height,b<=0&&(b=24),d=Math.floor(c/b),d<1&&(d=1),this.displayPageSize=d,this.displayPageHeight=d*b,d*=this._getRecordsPerRow(),this.options.rowsPerPage||(this.pageSize=g.pagination.scroll?Math.max(40,2*d):d)},_updateStatus:function(){var a,b=this._selectedCount(),c="";this.options.hideDeletedRows&&(a=this._deletedCount()),b>0&&(c+=d.formatMessage("APEX.GV.SELECTION_COUNT",b)),a>0&&(c&&(c+=", "),c+=d.formatMessage("APEX.GV.DELETED_COUNT",a)+" "),this.status$.text(c)},_setModelValue:function(a,b,c,e){var f,g,h,i,j,k;a.removeClass(v),g=b.getValue(),this.ignoreFieldChange=!0,k=this.model.getRecordId(c),h=this.model.getValue(c,e),null!==h&&"object"==typeof h&&h.hasOwnProperty("v")&&(g={v:g,d:b.displayValueFor(g)}),f=this.model.setValue(c,e,g),"DUP"===f?(this._setColumnItemValue(b,c,e),apex.message.alert(d.getMessage("APEX.GV.DUP_REC_ID"))):(i=b.getValidity(),j=this.model.getRecordId(c),i.valid?this.model.setValidity("valid",j,e):this.model.setValidity("error",j,e,b.getValidationMessage()),j!==k&&this._identityChanged(k,j)),this.ignoreFieldChange=!1},_initColumnItems:function(a){var b,d,g;for(this.columnItems={},this.columnItemsContainer$=null,b=0;b<a.length;b++)d=a[b],d.elementId&&(g=e(d.elementId),g.node&&(this.columnItems[d.property]={element$:f("#"+d.elementId).closest(".a-GV-columnItem"),item:g},this.columnItemsContainer$||(this.columnItemsContainer$=this.columnItems[d.property].element$.parent())));return this.columnItemsContainer$?void this.columnItemsContainer$.find(C).addClass(A).attr("tabindex",-1):void c.error("An editable "+this.widgetName+" must have at least one column with a column item.")},_activateColumnItem:function(a,b){var c=a.element$;c.find(B).attr("tabindex",0).removeClass(A),c.find(C).first().attr(z,b)},_deactivateColumnItem:function(a,b){var c=a.element$;c.find(C).first().removeAttr(z),this.columnItemsContainer$.append(c),c.find(C).addClass(A).attr("tabindex",-1)},_renderFieldDataValue:function(b,c,d,e,f){var g,h,i,j=null,k=this.options;(f&&f.url||c.linkTargetColumn)&&!e.agg&&(j=c.linkTargetColumn?this.model.getValue(d,c.linkTargetColumn)||null:f.url),g=this.model.getValue(d,c.property),(e.agg||e.inserted&&c.readonly)&&this.model.isIdentityField(c.property)&&(g=""),(c.linkText||c.linkAttributes||c.cellTemplate)&&(h={model:this.model,record:d}),j&&(b.markup("<a").attr("href",j),c.linkAttributes&&b.markup(a.applyTemplate(c.linkAttributes,h)),b.markup(" tabindex='-1'>")),j&&c.linkText?b.markup(a.applyTemplate(c.linkText,h)):c.cellTemplate?e.agg?b.content(""):b.markup(a.applyTemplate(c.cellTemplate,h)):null!==g&&""!==g||!(k.showNullAs||e.agg||j)?(null===g&&(g=""),"object"==typeof g&&g.hasOwnProperty("d")?g=g.d:(i=this.columnItems[c.property],i&&(g=i.item.displayValueFor(g))),b[c.escape===!1?"markup":"content"](g)):(g=e.agg||e.inserted||f&&(f.changed||f.error||f.warning)?"":j?j:k.showNullAs,b.content(g)),j&&b.markup("</a>")},_beginSetColumnItems:function(){this.reinitCallbacks=[]},_setColumnItemValue:function(a,b,c,d){var e,f=null,g=this.model.getValue(b,c);null!==g&&"object"==typeof g&&g.hasOwnProperty("d")&&(f=g.d,g=g.v),this.reinitCallbacks?(e=a.reinit(g,f),e&&this.reinitCallbacks.push(e)):a.setValue(g,f),d&&(d.fields&&d.fields[c]&&d.fields[c].disabled?a.disable():a.enable())},_endSetColumnItems:function(){var a,b=this.reinitCallbacks;if(b)for(a=0;a<b.length;a++)b[a]();this.reinitCallbacks=null},_autoAddRecord:function(a){var b=this.model.insertNewRecord(null,a);this.model.getRecordMetadata(b).autoInserted=!0},_triggerBeginEditing:function(a,b){this.element.trigger(G,[{model:this.model,record:a,recordId:b}])},_triggerEndEditing:function(a,b){this.element.trigger(H,[{model:this.model,record:a,recordId:b}])},_updateHighlights:function(){var a,b,c=this.options,d=[],e="";for(a in c.highlights)c.highlights.hasOwnProperty(a)&&(b=c.highlights[a],b.id=a,d.push(b));for(d.sort(function(a,b){return b.seq-a.seq}),a=0;a<d.length;a++)b=d[a],b.cssClass||(b.cssClass=(b.row?"hlr_":"hlc_")+b.id),(b.color||b.background)&&(e+=b.row?"."+b.cssClass+" td":"td."+b.cssClass,e+=" { ",b.color&&(e+="color: "+b.color+" !important; "),b.background&&(e+="background-color: "+b.background+" !important; "),e+="}\n");!this.gridStyles$&&e&&(this.gridStyles$=f("<style type='text/css'></style>"),f("head").append(this.gridStyles$)),this.gridStyles$&&(this.gridStyles$=this.gridStyles$.text(e))},_setOption:function(a,b){var c=this.options;this._super(a,b),"noDataMessage"===a?this.element.find(k+" > "+m).text(b):"rowsPerPage"===a?(c.pagination.scroll&&(c.rowsPerPage=null),c.rowsPerPage&&(this.pageSize=c.rowsPerPage)):"hideDeletedRows"===a&&(this.element.toggleClass(p,b),b===!0&&this.element.find(t).removeClass(w).removeAttr(u),this._updateStatus())},_scrollPage:function(){function a(a){return Math.floor(a/b.pageSize)*b.pageSize}var b=this,c=!this.model.getOption("hasTotalRecords"),d=this.scrollParent$.scrollTop();d!==this.lastScrollTop&&(this.lastScrollTop=d,this.scrollPageTimer||(this.scrollPageTimer=setTimeout(function(){var d,e,g,h,i,j=b.displayPageHeight/b.displayPageSize,k=b.scrollParent$.height(),l=0-k/2,m=l+2*k;b.scrollPageTimer=null,k=2*k,b.renderInProgress||(c?(e=b._getDataContainer().first(),h=e.height(),g=b.scrollParent$[0]===window?e.offset().top-b.scrollParent$.scrollTop():e.position().top,0-g+1.5*k>h&&(b.pageOffset+=b.pageSize,b._addPageOfRecords())):(d=b._getDataContainer().find(r),i=b.pageOffset,d.each(function(){var c,d,e=f(this),g=e.height(),h=parseInt(e.attr(D),10),n=parseInt(e.attr(E),10);if(h!==n)return d=b.scrollParent$[0]===window?e.offset().top-b.scrollParent$.scrollTop():e.position().top,c=d+g,d<=m&&c>=l?(g<3*k||d+k>m?b.pageOffset=h:c-k<=m?b.pageOffset=a(n):b.pageOffset=a(h+Math.floor((g-c)/j)),b.pageOffset!==i&&b._addPageOfRecords(),!1):void 0})))},F)))},_updateTotalRecords:function(){var a,b,c,e,f,g,h,i=null,j=null,k=this.options,l=k.pagination,m=this.model.getTotalRecords(),n=this.model.getServerTotalRecords();if(m>=0&&(i=Math.ceil(m/this.pageSize),j=Math.floor(this.pageOffset/this.pageSize)),null!==this.lastScrollLeft&&(this.scrollParent$.scrollLeft(this.lastScrollLeft),this.scrollParent$.scrollTop(this.lastScrollTop),this.lastScrollLeft=null,this.lastScrollTop=null),this.onLastPage=!1,0===this.pageCount&&0===this.pageOffset?(e="",this.onLastPage=!0,this.footer$.find(".js-pg-prev,.js-pg-next,.js-pg-first,.js-pg-last").attr("disabled",!0)):(this.footer$.find(".js-pg-prev,.js-pg-next,.js-pg-first,.js-pg-last").attr("disabled",!1),this.element.find(".js-load").attr("disabled",!1),0===this.pageOffset&&this.footer$.find(".js-pg-prev,.js-pg-first").attr("disabled",!0),m>0&&j===i-1&&(this.onLastPage=!0,this.footer$.find(".js-pg-next,.js-pg-last").attr("disabled",!0),this.element.find(".js-load").attr("disabled",!0)),h=this.model.getOption("hasTotalRecords"),e=this.scrollPaging&&h?d.formatMessage("APEX.GV.TOTAL_PAGES",n):h?d.formatMessage("APEX.GV.PAGE_RANGE_XYZ",this.pageFirstOffset,this.pageLastOffset,n):d.formatMessage("APEX.GV.PAGE_RANGE_XY",this.pageFirstOffset,this.pageLastOffset)),this.pageRange$.text(e),i>0){if(l.showPageLinks){if(g=m+"_"+this.pageSize+"_"+j,this.pageKey!==g){for(this.pageKey=g,f="<ul class='a-GV-pageSelector-list'>",b=j-Math.floor(l.maxLinks/2),b<0&&(b=0),c=b+l.maxLinks,c>=i&&(c=i,b=c-l.maxLinks,b<0&&(b=0)),b>0&&(f+="<li class='a-GV-pageSelector-item'>&hellip;</li>"),a=b;a<c;a++)f+="<li class='a-GV-pageSelector-item' data-value='"+a+"'><button class='a-GV-pageButton' type='button'>"+(a+1)+"</button></li>";c<i&&(f+="<li class='a-GV-pageSelector-item'>&hellip;</li>"),f+="</ul>",this.pageSelector$.html(f)}this.pageSelector$.find(y).removeClass(w),this.pageSelector$.find("[data-value="+j+"]").addClass(w)}else if(l.showPageSelector){if(g=m+"_"+this.pageSize,this.pageKey!==g){for(this.pageKey=g,f="<select class='a-GV-pageSelectlist' size='1'>",a=0;a<i;a++)f+="<option value='"+a+"'>"+d.formatMessage("APEX.GV.SELECT_PAGE_N",a+1)+"</option>";f+="</select>",this.pageSelector$.html(f)}this.pageSelector$.children("select").val(j)}}else this.pageSelector$.empty(),this.pageKey=null},_getHeaderHeight:function(){return 0},_getStickyTop:function(){return 0},_getRecordsPerRow:function(){return 1},_getDataRenderContext:function(){return a.htmlBuilder()},_getDataContainer:function(){return f()},_selectedCount:function(){return 0},_deletedCount:function(){return 0},_hasControlBreaks:function(){return!1},_elementsFromRecordIds:function(a){return[]},_renderFillerRecord:function(a,b){},_insertFiller:function(a,b){return f()},_insertData:function(a,b,c,d,e){},_controlBreakLabel:function(a){return""},_renderBreakRecord:function(a,b,c){a.markup("<h3>").content(c).markup("</h3>")},_renderRecord:function(a,b,c,d,e){},_removeRecord:function(a){},_insertRecord:function(a,b,c,d,e){return f()},_afterInsert:function(a){},_identityChanged:function(a,b){},_replaceRecord:function(a,b,c,d,e){},_updateRecordField:function(a,b,c,d){},_removeFocus:function(a){},_updateRecordState:function(a,b,c){}});var I="a-TMV",J="a-TMV-body",K="a-TMV-w-scroll",L="."+K,M="is-disabled";f.widget("apex.tableModelView",f.apex.tableModelViewBase,{version:"5.1",widgetEventPrefix:"tableModelView",options:{beforeTemplate:"<ul>",recordTemplate:null,afterTemplate:"</ul>",collectionClasses:null,iconClassColumn:null,imageURLColumn:null,imageAttributes:null,labelColumn:null,linkTarget:!1,linkTargetColumn:null,linkAttributes:null,useIconList:!1,iconListOptions:{},highlights:{},selectionChange:null,pageChange:null},_create:function(){var a=this.options,b=this.element;c.info("TabelModelView '"+b[0].id+"' created. Model: "+a.modelName),b.addClass(I),this.rowHeight=null,this.recPerRow=null,this._tableModelViewInit(),this._initModel(a.modelName),this._on(this._eventHandlers),this._initRecordTemplate(),this.refresh(),a.disabled&&this._setOption("disabled",a.disabled)},_eventHandlers:{resize:function(a){a.target===this.element[0]&&(this.resize(),a.stopPropagation())}},_destroy:function(){this._tableModelViewDestroy(),this.element.removeClass(I+" "+M).empty(),this.data$=null,this._initModel(null)},_setOption:function(a,b){this.options;if(c.info("TabelModelView '"+this.element[0].id+"' set option '"+a+"' to: ",b),"iconListOptions"===a)throw"TabelModelView "+a+" cannot be set. Set options directly on the iconList widget";if(this._super(a,b),"disabled"===a){if(this.element.toggleClass(M,b),this.options.useIconList)return this.getIconList().option(a,b);b&&this.resize()}else"modelName"===a?(this._initModel(b),this.refresh(!1)):"highlights"===a?this._updateHighlights():"beforeTemplate"===a||"recordTemplate"===a||"afterTemplate"===a||"collectionClasses"===a||"iconClassColumn"===a||"imageURLColumn"===a||"imageAttributes"===a||"labelColumn"===a||"linkTarget"===a||"linkTargetColumn"===a||"linkAttributes"===a?(this._initRecordTemplate(),this.refresh()):"footer"!==a&&"useIconList"!==a&&"pagination"!==a||this.refresh()},refresh:function(a){var b;this.data$&&(b=this.getSelectedRecords()),this._refreshPagination(this.element.find(L)),this._initView(),this._updateStatus(),this.resize(),this._addPageOfRecords(),b&&b.length>0&&this.setSelectedRecords(b,a)},resize:function(){var a,b,c,d,e=this.element,g=this.options,h=e.height(),i=e.children().first(),j=e.find(L);a=e.width(),j.width(a),this.rowHeight=null,this.recPerRow=null,g.hasSize&&(b=h-this._footerHeight(),i.height(b),j.height(b)),g.useIconList&&(this.data$.iconList("resize"),this.scrollPaging&&(c=this._getRecordsPerRow(),d=this._getRecordHeight(),this.data$.find(r).each(function(){var a,b=f(this),e=parseInt(b.last().attr(D),10),g=parseInt(b.last().attr(E),10);a=Math.floor((g-e)/c)*d,b.css("height",a)}))),this._initPageSize()},getSelection:function(){return this.options.useIconList?this.getIconList().getSelection():null},setSelection:function(a,b){if(this.options.useIconList)return this.getIconList().setSelection(a,b)},getRecords:function(a){var b,c,d=this,e=[];return a.each(function(){b=f(this).attr("data-id"),b&&(c=d.model.getRecord(b),c&&e.push(c))}),e},getSelectedRecords:function(){return this.options.useIconList?this.getRecords(this.getSelection()):null},setSelectedRecords:function(a,b){var c,d=[],e={};if(this.options.useIconList){for(c=0;c<a.length;c++)e[this.model.getRecordId(a[c])]=!0;this.data$.children().each(function(){var a=f(this).attr("data-id");e[a]&&d.push(this)}),this.setSelection(f(d),b)}},getIconList:function(){return this.options.useIconList?this.data$.data("apex-iconList"):null},_initRecordTemplate:function(){var a,b,c,d,e=/^\s*<[\w]+[^>]*>/,f=this.options;if(!f.recordTemplate){if(f.collectionClasses||(f.collectionClasses="a-TMV-defaultIconView"),!f.labelColumn)throw new Error("Option recordTemplate or labelColumn is required");f.beforeTemplate="<ul>",f.afterTemplate="</ul>",b="<li data-id='&APEX$ROW_ID.' class='&APEX$ROW_STATE_CLASSES.'>",f.linkTarget||f.linkTargetColumn?(d=f.linkTargetColumn?f.linkTargetColumn:"APEX$ROW_URL",b+="<a href='&"+d+".' class='a-IconList-content'"+(f.linkAttributes?" "+f.linkAttributes+" ":"")+">",c="</a>"):(b+="<span class='a-IconList-content'>",c="</span>"),(f.iconClassColumn||f.imageURLColumn)&&(b+="<span class='a-IconList-icon'>",b+=f.iconClassColumn?"<span class='&"+f.iconClassColumn+".'></span>":"<img src='&"+f.imageURLColumn+".'"+(f.imageAttributes?" "+f.imageAttributes+" ":"")+"/>",b+="</span>"),b+="<span class='a-IconList-label'>&"+f.labelColumn+".</span>",b+=c+"</li>",f.recordTemplate=b}a=e.exec(f.recordTemplate),a||(f.beforeTemplate.toLowerCase().match(/<ul|<ol/)?f.recordTemplate="<li>"+f.recordTemplate+"</li>":f.recordTemplate="<div>"+f.recordTemplate+"</div>")},_initView:function(){var a=this,b=this.options,c=this._getDataRenderContext();this.recordElement=f(b.recordTemplate)[0].nodeName.toLowerCase(),c.markup("<div").attr("class",J).markup(">"),this._renderAltDataMessages(c),c.markup("<div").attr("class",K).markup(">").markup(b.beforeTemplate).markup("<"+this.recordElement+" class='js-data-placeholder' style='display:none;'></"+this.recordElement+">").markup(b.afterTemplate),this._renderLoadMore(c),c.markup("</div></div>"),this._renderFooter(c),this.element.html(c.toString()),this.data$=this.element.find(".js-data-placeholder").parent(),this.data$.empty().addClass(b.collectionClasses||""),b.useIconList&&(this.data$.iconList(b.iconListOptions),this.data$.on("iconlistselectionchange",function(b){a._updateStatus(),a._trigger("selectionChange",b)})),this._initPaginationFooter(this.element.find(L))},_initRecordMetrics:function(){var a,b=this.options;this.recPerRow=1,a=this.data$.children().filter(":visible").first(),a.length?(b.useIconList&&(this.recPerRow=this.getIconList().getColumns()),this.rowHeight=a.outerHeight()):(a=f(apex.util.applyTemplate(b.recordTemplate,{})),a=this.data$.append(a),b.useIconList&&(this.getIconList().refresh(),this.recPerRow=this.getIconList().getColumns()),this.rowHeight=a.outerHeight(),this.data$.empty())},_getRecordHeight:function(){return this.rowHeight||this._initRecordMetrics(),this.rowHeight},_getRecordsPerRow:function(){return this.recPerRow||this._initRecordMetrics(),this.recPerRow},_getDataContainer:function(){return this.data$},_selectedCount:function(){return this.options.useIconList?this.getIconList().getSelection().length:0},_hasControlBreaks:function(){return!1},_elementsFromRecordIds:function(a){return[]},_renderFillerRecord:function(a,b){a.markup("<"+this.recordElement+" class='"+b+"'></"+this.recordElement+">")},_insertFiller:function(a,b){var c=f(a.toString());return b?b.before(c):this.data$.html(c),c},_insertData:function(a,b,c,d,e){d?d[e](a.toString()):this.data$.append(a.toString()),this.options.useIconList&&this.data$.iconList("refresh"),this._trigger("pageChange",null,{offset:b,count:c})},_controlBreakLabel:function(a){return""},_renderBreakRecord:function(a,b,c){a.markup("<h3>").content(c).markup("</h3>")},_renderRecord:function(a,b,c,d,e){var f,g=this.options,h="",i={};i.APEX$ROW_ID=""+d,i.APEX$ROW_INDEX=""+(c+1),e.url&&(i.APEX$ROW_URL=e.url),e.deleted?h+=" "+s:(e.inserted?h+=" is-inserted":e.updated&&(h+=" is-updated"),e.error?h+=" is-error":e.warning&&(h+=" is-warning"),e.highlight&&(f=g.highlights[e.highlight],h+=f&&f.cssClass?" "+f.cssClass:" "+e.highlight)),h&&(i.APEX$ROW_STATE_CLASSES=h),a.markup(apex.util.applyTemplate(this.options.recordTemplate,{extraSubstitutions:i,model:this.model,record:b}))},_removeRecord:function(a){},_insertRecord:function(a,b,c,d,e){return f()},_afterInsert:function(a){},_identityChanged:function(a,b){},_replaceRecord:function(a,b,c,d,e){},_updateRecordField:function(a,b,c,d){},_removeFocus:function(a){},_updateRecordState:function(a,b,c){}})}(apex.util,apex.model,apex.debug,apex.lang,apex.item,apex.jQuery);
!function(a,b,c,d,e,f){"use strict";function g(a,b){var c="";return"start"===a?c=" u-tS":"end"===a?c=" u-tE":"left"===a?c=" u-tL":"right"===a?c=" u-tR":"center"!==a||b||(c=" u-tC"),c}function h(a){return a.parent().children().index(a)}function i(a){var b=f(a.toString());return b.find("a,button,input,select,textarea").prop("tabIndex",-1),b}function j(a){return f(a).closest(S)}function k(a){return f(a).closest(W)}function l(a){return f(a).closest(D)}function m(a,b){var c,d,e=a.children();return e.last().hasClass(H)?(d=0,e.each(function(){if(d+=parseInt(f(this).attr(La),10)||1,d>b)return c=f(this),!1})):c=e.eq(b),c}function n(a){var b;return a.hasClass(H)?(b=0,a.parent().children().each(function(){return this!==a[0]&&void(b+=parseInt(f(this).attr(La),10)||1)})):b=h(a),b}function o(a){f("body").on(Pa,function(b){b.which===Oa.ESCAPE&&(f("body").off(Pa),a())})}function p(){f("body").off(Pa)}function q(a){var b=a.groupName||null;return b&&a.useGroupFor&&a.useGroupFor.indexOf("heading")<0&&(b=null),b}var r="a-GV",s="a-GV-hdr",t="."+s,u="a-GV-bdy",v="."+u,w="a-GV-w-frozen",x="a-GV-w-hdr",y="a-GV-w-scroll",z="a-GV-table",A="a-GV-row",B="tr",C="a-GV-cell",D="."+C,E="a-GV-scrollFiller",F="a-GV-header",G="."+F,H="a-GV-headerGroup",I="."+H,J="a-GV-rowSelect",K="."+J,L="a-GV-headerLabel",M="a-GV-columnControls",N="."+M,O="a-GV-columnHandle",P="a-GV-rowHeader",Q="."+P,R=Q+G,S=".a-GV-header,.a-GV-headerGroup,.a-GV-cell,.a-GV-controlBreakHeader",T="a-GV-controlBreak",U="a-GV-controlBreakHeader",V="."+U,W="."+C+",."+U,X="js-tabTrap",Y="."+X,Z="a-GV-floatingItemContent",$="."+Z,_="is-selected",aa="."+_,ba="is-focused",ca="is-hover",da="."+ca,ea="is-disabled",fa="is-expanded",ga="is-active",ha="."+ga,ia=ha+D,ja="is-deleted",ka="tr."+ja,la="aria-selected",ma="aria-multiselectable",na="aria-readonly",oa="aria-label",pa="aria-expanded",qa="aria-labelledby",ra="u-RTL",sa=":visible",ta=":tabbable",ua="none",va="sequence",wa="label",xa="selectionChange",ya="modeChange",za="sortChange",Aa="columnReorder",Ba="columnResize",Ca="activateColumnHeader",Da="cancelColumnHeader",Ea="pageChange",Fa=10,Ga=40,Ha=200,Ia=10,Ja=10,Ka="title",La="colspan",Ma="data-idx",Na="data-id",Oa=f.ui.keyCode,Pa="keydown.gridGlobalEscape";f.widget("apex.grid",f.apex.tableModelViewBase,{version:"5.1",widgetEventPrefix:"grid",options:{showNullAs:"-",stickyTop:!1,columns:null,columnGroups:null,columnSort:!0,columnSortMultiple:!0,resizeColumns:!0,reorderColumns:!0,aggregateLabels:{},aggregateTooltips:{},tabbableCellContent:"a,button",editable:!1,allowEditMode:!0,allowDelete:!0,allowInsert:!0,highlights:{},rowHeader:ua,rowHeaderCheckbox:!1,rowHeaderLabelColumn:null,rowHeaderWidth:null,multiple:!1,selectAll:!0,persistSelection:!1,tooltip:{tooltipClass:"a-GV-tooltip"},contextMenuAction:null,contextMenu:null,contextMenuId:null,selectionChange:null,activateColumnHeader:null,cancelColumnHeader:null,sortChange:null,columnReorder:null,columnResize:null,modeChange:null,pageChange:null},forwardKey:Oa.RIGHT,backwardKey:Oa.LEFT,_create:function(){var a,b=this,d=this.options,e=this.element;if(c.info("Grid '"+e[0].id+"' created. Model: "+d.modelName),e.addClass(r).attr("role","grid"),d.multiple&&e.attr(ma,"true"),d.editable||e.attr(na,"true"),"rtl"===e.css("direction")&&(e.addClass(ra),this.forwardKey=Oa.LEFT,this.backwardKey=Oa.RIGHT),this._enforceOptionConstraints(),this._tableModelViewInit(),this.tableFrozenHeader$=null,this.tableHeader$=null,this.tableFrozenData$=null,this.tableData$=null,this.lastEditModeCell=null,this.activeItem=null,this.activeItemId=null,this.activeRowLockCount=0,this.activeRowUnlockCallback=null,this.editMode=!1,this.columns=null,this.columnGroups=null,this.lastFrozenColIndex=-1,this.lastFocused=null,this.lastRow$=null,this.focusInHeader=!1,this.lastHoverCell=null,this.lastHoverRow=null,this.columnControls$=null,this.columnHandle$=null,this.scrollTimerId=null,this.deactivateDelayTimer=null,this.gotoCellPending=null,d.contextMenu||d.contextMenuId)if(f.apex.menu){if(d.contextMenu){if(d.contextMenu.menubar)throw new Error("Grid contextMenu must not be a menubar");d.contextMenu._originalBeforeOpen=d.contextMenu.beforeOpen,d.contextMenu.beforeOpen=function(a,c){d.contextMenu._originalBeforeOpen&&(c.menuElement=b.contextMenu$,c.grid=e,c.selection=b.getSelection(),d.contextMenu._originalBeforeOpen(a,c))},d.contextMenu._originalAfterClose=d.contextMenu.afterClose,d.contextMenu.afterClose=function(a,c){d.contextMenu._originalAfterClose&&(c.menuElement=b.contextMenu$,c.grid=e,d.contextMenu._originalAfterClose(a,c)),c.actionTookFocus||b.focus()},this.contextMenu$=f("<div style='display:none'></div>").appendTo("body"),d.contextMenuId&&(this.contextMenu$[0].id=d.contextMenuId),this.contextMenu$.menu(d.contextMenu)}else if(this.contextMenu$=f("#"+d.contextMenuId),0===this.contextMenu$.length||!this.contextMenu$.is(":apex-menu"))throw new Error("Grid contextMenuId not found");d.contextMenuAction&&c.warn("Grid contextMenuAction option ignored when contextMenu option present"),d.contextMenuAction=function(a){var c,d;"contextmenu"===a.type&&0!==a.button?b.contextMenu$.menu("toggle",a.pageX,a.pageY):(c=f(a.target),d=c.offset(),b.contextMenu$.menu("toggle",d.left,d.top+c.closest("tr").outerHeight()))}}else c.warn("Grid contextMenu option ignored because menu widget not preset");this._initModel(d.modelName),"onwheel"in e[0]||!this._eventHandlers.wheel||(a=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",this._eventHandlers[a]=this._eventHandlers.wheel,delete this._eventHandlers.wheel),this._on(this._eventHandlers),this._updateHighlights(),this.refresh(),d.disabled&&this._setOption("disabled",d.disabled)},_eventHandlers:{resize:function(a){a.target===this.element[0]&&(this.resize(),a.stopPropagation())},click:function(a){var b,c,d=this,e=this.options,g=f(a.target);if(!(g.closest("a,button,.a-GV-footer").length>0||g.closest(".a-GV-floatingItem").length>0)){if(b=g.closest(R),b.length)return this.focusInHeader=!0,d.lastColIndex=null,void(e.rowHeaderCheckbox&&e.multiple&&e.selectAll?(c=b.find(K)[0].checked,g.hasClass(J)&&(c=!c),setTimeout(function(){c?d.setSelection(f()):d.selectAll(),d._select(b,a,!0,!1),d._setFocusable(b[0])},10),a.preventDefault()):d._select(b,a,!0,!1));if(b=g.closest(I),b.length)return this.focusInHeader=!0,d.lastColIndex=null,d._select(b,a,!0,!1),void a.preventDefault();if(b=g.closest(G),b.length&&0===g.closest("button").length)return this.focusInHeader=!0,d.lastColIndex=null,d._select(b,a,!0,!1),this._activateColumnHeader(a,b),void a.preventDefault();if(g.hasClass(J))return b=g.closest(Q),void setTimeout(function(){a.ctrlKey=!0,a.shiftKey=!1,d.focusInHeader=!1,d.lastColIndex=null,d._select(b,a,!0,!1)},10);if(b=g.closest(Q),b.length)return e.rowHeaderCheckbox&&(a.ctrlKey=!0,a.shiftKey=!1),this.focusInHeader=!1,d.lastColIndex=null,this._select(b,a,!0,!1),void a.preventDefault();b=g.closest(D),b.length&&(this.focusInHeader=!1,d.lastColIndex=null,b.hasClass(ga)||(this._select(b,a,!0,!1),a.preventDefault())),b=g.closest(V),b.length&&(this.focusInHeader=!1,d.lastColIndex=null,this._select(b,a,!0,!1),a.preventDefault())}},dblclick:function(a){var b=this.options,c=f(a.target).closest(D).not(Q);c.length&&!this.editMode&&b.editable&&b.allowEditMode&&this.setEditMode(!0)},mousedown:function(a){var b=f(a.target);b.closest(".a-GV-footer").length>0||(b.closest(".a-GV-expandCollapse").length>0||!this.editMode||!b.closest(D).hasClass(ga)&&!b.closest(".a-GV-floatingItem"))&&a.preventDefault()},keydown:function(a){function b(){g.hasClass(P)?g.find(K).click():(r._activateColumnHeader(a,g),a.preventDefault())}function c(a,b){var c,d=null;for(a+=b,c=a;c>=0&&c<r.columns.length;c+=b)if(!r.columns[c].hidden){d=c;break}return d}var d,e,g,i,m,n,o,p,q,r=this,s=this.options,t=null,u=a.which;if(!(f(a.target).closest(".a-GV-footer").length>0)){if(u!==Oa.PAGE_UP&&u!==Oa.PAGE_DOWN||(n=this.displayPageSize),u===Oa.HOME)!this.editMode&&this.lastFocused&&(this.lastColIndex=null,t=this.lastRow$.first());else if(u===Oa.END)!this.editMode&&this.lastFocused&&(this.lastColIndex=null,t=this.lastRow$.last());else if(u===Oa.PAGE_DOWN)this.focusInHeader||(t=this._getNextCellDown(k(this.lastFocused),n));else if(u===Oa.PAGE_UP)this.focusInHeader||(t=this._getPrevCellUp(k(this.lastFocused),n,!0));else if(u===Oa.DOWN){if(g=j(this.lastFocused),s.columnSort&&a.altKey&&g.hasClass(F))return void r._sortChange(a,g,"desc");this.editMode&&!this.focusInHeader||!this.lastFocused||(t=this._getNextCellDown(g,1)),f(a.target).closest(".js-menuButton").length&&a.stopPropagation(),a.shiftKey&&a.preventDefault()}else if(u===Oa.UP){if(g=j(this.lastFocused),s.columnSort&&a.altKey&&g.hasClass(F))return void r._sortChange(a,g,"asc");this.editMode&&!this.focusInHeader||!this.lastFocused||(t=this._getPrevCellUp(g,1),a.stopPropagation())}else if(u===this.backwardKey){if(a.altKey)return;if(g=j(this.lastFocused),(a.ctrlKey||a.shiftKey)&&(g.hasClass(F)||g.hasClass(H))&&(!g.hasClass(P)||s.rowHeader===va||s.rowHeader===wa)&&(m=parseInt(g.attr(Ma),10),!isNaN(m)||a.ctrlKey||s.rowHeader===va||s.rowHeader===wa))if(m>=0&&(i=this.columns[m]),a.shiftKey)a.preventDefault(),g.hasClass(H)?(o=h(g.parent()),m>0&&(this.moveColumnGroup(o,m,m-1),g=f(this.lastFocused).closest(I))):(m=c(m,-1),m&&(this.moveColumn(i,m),g=f(this.lastFocused).closest(G)));else if(!g.hasClass(H))return void(i?g.outerWidth()>Ga&&(q=g.outerWidth()-Fa,q<Ga&&(q=Ga),this.setColumnWidth(i,q)):r.rowHeaderWidth>Ga&&(q=r.rowHeaderWidth-Fa,q<Ga&&(q=Ga),r.rowHeaderWidth=q,this._calculateColumnWidths(g,!0)));this.editMode&&!this.focusInHeader||!this.lastFocused||(this.lastColIndex=null,e=this.lastRow$.index(g),e>0&&(e-=1,t=this.lastRow$.eq(e)),a.preventDefault())}else if(u===this.forwardKey){if(a.altKey)return;if(g=j(this.lastFocused),(a.ctrlKey||a.shiftKey)&&(g.hasClass(F)||g.hasClass(H))&&(!g.hasClass(P)||s.rowHeader===va||s.rowHeader===wa)&&(m=parseInt(g.attr(Ma),10),!isNaN(m)||a.ctrlKey||s.rowHeader===va||s.rowHeader===wa))if(m>=0&&(i=this.columns[m]),a.shiftKey)a.preventDefault(),g.hasClass(H)?(o=h(g.parent()),m<this.columnGroups[o].length-1&&(this.moveColumnGroup(o,m,m+1),g=f(this.lastFocused).closest(I))):(m=c(m,1),m&&(this.moveColumn(i,m),g=f(this.lastFocused).closest(G)));else if(!g.hasClass(H))return void(i?this.setColumnWidth(i,g.outerWidth()+Fa):(r.rowHeaderWidth+=Fa,this._calculateColumnWidths(g,!0)));this.editMode&&!this.focusInHeader||!this.lastFocused||(this.lastColIndex=null,e=this.lastRow$.index(g),e<this.lastRow$.length-1&&(e+=1,t=this.lastRow$.eq(e)),a.preventDefault())}else if(65===u&&a.ctrlKey&&!this.editMode)this.selectAll(),a.preventDefault();else if(u===Oa.SPACE){if("BUTTON"===a.target.nodeName)return;if(g=f(a.target).find(K),g.length)return g.click(),void a.preventDefault();g=j(this.lastFocused),g.hasClass(F)?b():g.hasClass(C)&&!this.editMode&&(this._select(g,a,!0,!0),a.preventDefault())}else if(u===Oa.ENTER){if(!f(a.target).hasClass("a-GV-expandCollapse")&&f(a.target).closest("a,button,"+$).length>0)return;if(g=f(a.target).find(K),g.length)return g.click(),void a.preventDefault();g=j(this.lastFocused),this.editMode&&(g.hasClass(C)||g.hasClass(U))?a.shiftKey?(t=this._getPrevCellUp(g,1),t&&t.hasClass(F)&&(t=null),a.shiftKey=!1):t=this._getNextCellDown(g,1):(a.preventDefault(),s.editable&&s.allowEditMode&&g.hasClass(C)&&!g.hasClass(P)?this.setEditMode(!0):g.hasClass(F)&&b())}else if(113===u)g=l(this.lastFocused),g.length&&s.editable&&s.allowEditMode&&!this.editMode&&this.setEditMode(!0);else if(u===Oa.ESCAPE)s.editable&&s.allowEditMode&&this.editMode&&(g=l(this.lastFocused),g.length&&this._setFocusable(g[0]),this.setEditMode(!1),g.length&&this._setFocus(this._getCellFocusable(g)),a.stopPropagation());else if(!this.editMode&&s.contextMenuAction&&a.shiftKey&&121===u){if(f(a.target).closest("a").length>0)return;g=l(this.lastFocused),g.length&&(g.parent().hasClass(_)||this._select(g,{},!0,!1),s.contextMenuAction(a),a.preventDefault())}else if(u===Oa.DELETE){if(s.editable&&s.allowDelete&&!this.editMode&&!this.focusInHeader){for(p=this.getSelectedRecords(),d=0;d<p.length;d++)this.model.allowDelete(p[d])||(p.splice(d,1),d-=1);p.length>0&&this.model.deleteRecords(p)}}else 45===u?s.editable&&s.allowInsert&&!this.editMode&&this.model.allowAdd()&&(p=this.getSelectedRecords(),p.length>0?this.model.insertNewRecord(null,p[p.length-1]):this.model.insertNewRecord()):112===u&&a.altKey&&(g=j(this.lastFocused),g.hasClass(P)||g.hasClass(H)||g.hasClass(U)||(i=this._getColumnMetadata(g),i&&i.helpid&&apex.theme.popupFieldHelp(i.helpid,$v("pInstance"))));t&&(this._select(t,a,!0,!0),a.preventDefault())}},focusin:function(a){var b,c,d=f(a.target);return d.closest(".a-GV-floatingItem").length?void this._clearDeactivate():(b=d.closest(S),0===b.length?void(d.hasClass(X)||(this.lastEditModeCell=null)):(b.addClass(ba),this.lastEditModeCell===b[0]?void this._clearDeactivate():void(this.editMode&&(b.hasClass(C)||b.hasClass(U))?(this.focusInHeader=!1,c=f(this.lastEditModeCell),this._clearDeactivate(),c.length&&this._deactivateCell(c),this._activateCell(b)):this._setFocusable(a.target))))},focusout:function(a){var b=f(a.target),c=b.closest(S);!c.length&&this.lastEditModeCell&&b.closest(".a-GV-floatingItem").length&&(c=f(this.lastEditModeCell)),c.removeClass(ba),this.editMode&&c.hasClass(C)&&this._beginDeactivate(c)},contextmenu:function(a){var b,c=this.options.contextMenuAction;f(a.target).closest("a").length>0||!this.editMode&&c&&(b=f(a.target).closest(D),b.length&&(b.parent().hasClass(_)||this._select(b,{},!0,!1),c(a),a.preventDefault()))},mousemove:function(a){var b,c,d,e,g,h=f(a.target),i=this.options,j=h.closest(S);j.length?j[0]!==this.lastHoverCell&&(b=j.parent(),b[0]!==this.lastHoverRow&&(this._clearHoverStates(),this.lastHoverRow=b[0],!b.hasClass(A)&&!b.hasClass(T)||this.columnReordering||this.columnWidthDragging||this._setRowHoverState(b)),this.lastHoverCell=j[0],this.columnControls$.hide(),this.columnHandle$.hide(),"TH"!==j[0].nodeName||j.hasClass(C)||b.hasClass(T)||(e=this.columns[j.attr(Ma)],!i.columnSort||this.columnReordering||this.columnWidthDragging||j.hasClass(P)||j.hasClass(H)||!e.canSort||(j.append(this.columnControls$.show()),this._updateColumnControls(e)),!i.reorderColumns||this.columnReordering||this.columnWidthDragging||j.hasClass(P)||(this.columnReorderCell$=j,j.append(this.columnHandle$.show().css("left",""))),!i.resizeColumns||this.columnReordering||this.columnWidthDragging||j.hasClass(P)&&i.rowHeader!==va&&i.rowHeader!==wa||(c=j.closest("div")[0],d=j[0].offsetLeft+c.offsetLeft-c.scrollLeft,this.element.hasClass(ra)||(d+=j.outerWidth()),this.columnWidthHandle$.show().css("left",d-this.columnWidthHandle$.width()/2),g=j.attr(Ma),g?this.columnWidthCell$=this._columnFromIndex(g):this.columnWidthCell$=this.element.find(".a-GV-header.a-GV-rowHeader")))):null!==this.lastHoverCell&&(this.lastHoverCell=null,this.lastHoverRow=null,this._clearHoverStates())},mouseleave:function(){null!==this.lastHoverCell&&(this.lastHoverCell=null,this.lastHoverRow=null,this._clearHoverStates())},wheel:function(a){var b,c,d;this.options.hasSize&&(d=f(a.target).closest("."+w),d.length&&d.parent().hasClass(u)&&(a.preventDefault(),b=d.parent().children("."+y)[0],c=a.originalEvent.deltaY||a.originalEvent.detail||-.025*a.originalEvent.wheelDelta,void 0!==a.originalEvent.deltaMode&&1!==a.originalEvent.deltaMode||(c=30*c),b.scrollTop+=c))}},_initTooltips:function(b){var d,e=this;return f.ui.tooltip?(this.tooltipOptions&&(this.element.find(v).filter(":data('ui-tooltip')").tooltip("destroy"),this.tooltipOptions=null),void(b&&(d=this.tooltipOptions=f.extend(!0,{show:apex.tooltipManager.defaultShowOption(),tooltipClass:"a-GV-tooltip"},b),d.items="td,th",d._originalContent=d.content,d.content=function(b){var c,g,h,i=f(this),j=i.parent(),k=null,l=null,m=e._getColumnMetadata(i);if(c=j.attr(Na),c&&(k=e.model.getRecordMetadata(c)),m&&k&&k.fields&&(l=k.fields[m.property]),k&&!k.deleted){if(l&&(l.error||l.warning))return g=l.error?"is-error":"is-warning","<span class='"+g+"'>"+a.escapeHTML(l.message)+"</span>";if((k.error||k.warning)&&i.hasClass(P))return g=k.error?"is-error":"is-warning","<span class='"+g+"'>"+a.escapeHTML(k.message)+"</span>";if(k.agg&&m&&(h=e.options.aggregateTooltips[k.agg+"|"+m.property]))return"<span class='"+g+"'>"+a.escapeHTML(h)+"</span>"}return d._originalContent?d._originalContent.call(this,b,e.model,k,l,m):null},d.open=function(a,b){b.tooltip.find(".is-error").length&&b.tooltip.addClass("is-error"),b.tooltip.find(".is-warning").length&&b.tooltip.addClass("is-warning")},this.element.find(v).tooltip(d)))):void c.warn("tooltip option ignored because missing tooltip widget dependency")},_destroy:function(){this._tableModelViewDestroy(),this.element.removeClass(r+" "+ea+" "+ra).removeAttr("role").removeAttr(ma).removeAttr(na).empty(),c.info("Grid '"+this.element[0].id+"' destroyed. Model: "+this.options.modelName),this.tableData$=null,this.tableFrozenData$=null,this._initModel(null),this.gridStyles$&&this.gridStyles$.remove(),this.options.contextMenu&&this.contextMenu$&&this.contextMenu$.remove()},_setOption:function(a,b){var d=this.options;if(c.info("Grid '"+this.element[0].id+"' set option '"+a+"' to: ",b),"contextMenu"===a||"contextMenuId"===a)throw new Error("Grid "+a+" cannot be set");if("contextMenuAction"===a&&(d.contextMenu||d.contextMenuId))throw new Error("Grid contextMenuAction cannot be set when the contextMenu option is used");"editable"===a&&!b&&this.editMode?this.setEditMode(!1):"multiple"===a&&this.setSelection(f()),this._super(a,b),this._enforceOptionConstraints(),"disabled"===a?(this.element.toggleClass(ea,b),this.lastFocused&&(b?this.lastFocused.tabIndex=-1:this._setFocusable(this.lastFocused)),b&&this.resize()):"multiple"===a?(b?this.element.attr(ma,"true"):this.element.removeAttr(ma),d.rowHeader!==ua&&d.rowHeaderCheckbox&&this.refreshColumns(),this.refresh()):"modelName"===a?(this.editMode&&this.setEditMode(!1),this._initModel(b),this.refresh(!1,!0)):"highlights"===a?this._updateHighlights():"tooltip"===a?this._initTooltips(b):"rowHeader"!==a&&"rowHeaderCheckbox"!==a&&"rowHeaderLabelColumn"!==a&&"columnSort"!==a&&"resizeColumns"!==a&&"reorderColumns"!==a&&"editable"!==a&&"pagination"!==a&&"selectAll"!==a&&"footer"!==a&&"autoAddRecord"!==a||("editable"===a&&(b?this.element.removeAttr(na):this.element.attr(na,"true")),this._refreshGrid())},_enforceOptionConstraints:function(){var a=this.options;a.rowHeaderCheckbox&&a.rowHeader===ua&&(apex.debug.warn("Option rowHeaderCheckbox cannot be true when rowHeader is 'none'."),a.rowHeaderCheckbox=!1),a.editable&&a.allowEditMode||(a.autoAddRecord=!1),a.rowHeader!==ua&&(a.rowHeaderWidth?this.rowHeaderWidth=a.rowHeaderWidth:(a.rowHeaderCheckbox?this.rowHeaderWidth=32:this.rowHeaderWidth=16,a.rowHeader!==va&&a.rowHeader!==wa||(this.rowHeaderWidth+=38)))},refresh:function(a,b){var d,e,g=null,i=[],j=null,k=this,l=this.options,m=this.element;c.info("Grid '"+m[0].id+"' refreshed. Model: "+l.modelName),null!==m[0].offsetParent&&(g=m.find(ia),g.length&&this._deactivateCell(g),this.focusInHeader?this.columns||(j=h(f(this.lastFocused).closest("tr")),d=f(this.lastFocused).closest("th").attr(Ma),this.lastFocused=null):(this.focusInHeader=null,this.lastFocused=null),this.tableData$&&!l.persistSelection&&(i=this.getSelectedRecords()),this._refreshPagination(m.find("."+y)),this.columns?(this.tableFrozenData$&&this.tableFrozenData$.empty(),this.tableData$.empty()):this._initGrid(),this._updateStatus(),this.resize(),this._addPageOfRecords(),e=m.find(t),m.find(K).prop("disabled",this.noData),this.lastHoverCell=null,this.lastHoverRow=null,this.lastFocused&&f(this.lastFocused).is(sa)&&null===j||(null!==j&&(e.find("thead").each(function(){if(g=f(this).children().eq(j).find("th[data-idx='"+d+"']"),g.length)return k._select(g,{},!0,!1,!0),!1}),g&&g.length||(g=e.find("thead").first().find("tr").eq(j).children().first(),g&&k._select(g,{},!0,!1,!0))),this.lastFocused||(this.lastRow$=null,this.lastFocused=this._getCellFocusable(m.children(v).find("tbody tr").first().children().first()),this.lastFocused?(this.selectAnchor=this.lastFocused,this.focusInHeader=!1):(this.lastFocused=this._getCellFocusable(e.find("thead").first().find("tr").last().children().first()),this.focusInHeader=!0),this.lastFocused&&!l.disabled&&(this._setFocusable(this.lastFocused),this._setCurrentRow(this.lastFocused)))),i.length>0?this.setSelectedRecords(i,a):(b&&k._trigger(xa,{}),a&&this.focus()))},focus:function(){this.lastFocused&&this.lastFocused.focus()},gotoCell:function(a,b){var d,e,f,g,h=this.options,i=!1,j=null,k=null,l=this.element.find("[data-id='"+a+"']");if(this.gotoCellPending=null,this.tableData$){if(b&&(j=h.columns[0][b],j?j.hidden&&j.canHide&&(j.hidden=!1,i=!0,this.refreshColumns(),this.gotoCellPending={record:a,column:b}):c.warn("Warning column not found "+b)),!l.length){if(d=this.model.getRecord(a),!d)return void c.warn("Warning record not found "+a);e=this.model.indexOf(d),this.gotoCellPending={record:a,column:b},h.pagination.scroll?(f=this.scrollParent$,g=Math.floor(e/this.displayPageSize)*this.displayPageHeight,f.scrollTop(g)):(this.pageOffset=Math.floor(e/this.pageSize)*this.pageSize,i=!0)}i&&this.refresh(!1),this.gotoCellPending||(b&&j&&(k=this._cellFromColumn(l,b)),k||(k=l.children().first()),this._select(k,null,!0,!1))}},getActiveCellFromColumnItem:function(a){var b,c=this,d=null;return this.activeItemId&&(b=this.element.find("[data-id='"+this.activeItemId+"']"),f.each(this.columnItems,function(e,f){a===f.item.node&&(d=c._cellFromColumn(b,e))})),d},inEditMode:function(){return this.editMode},setEditMode:function(a){function b(){h.columnItemsContainer$.off("change.gridedit"),h.activeItem=null,h.activeItemId=null}var d,e,g=!1,h=this;this.options.editable?(a=!!a,d=a!==this.editMode,this.editMode=a,this.element.toggleClass("a-GV--editMode",a),e=f(this.lastFocused).closest(D),e.length&&(a?this._activateCell(e):(this.lastEditModeCell=null,this.deactivateDelayTimer&&(clearTimeout(this.deactivateDelayTimer),this.deactivateDelayTimer=null),this._deactivateCell(e),this.activeItem&&(this._deactivateRow(b),g=!0))),d&&(a?this.columnItemsContainer$.on("change.gridedit",function(a){var b,c,d,e;if(h.activeItem)for(b=0;b<h.columns.length;b++)if(c=h.columns[b],c.elementId===a.target.id){e=c.property,d=h.columnItems[e],h.ignoreItemChange=!0,h.model.setValue(h.activeItem,e,d.item.getValue()),h.ignoreItemChange=!1;break}}):g||b(),this._trigger(ya,null,{editMode:a}))):a&&c.warn("Grid is not editable.")},getSelection:function(){var a,b,c=[];return this.tableData$&&(b=this.tableData$.find(aa),this.tableFrozenData$?(a=this.tableFrozenData$.find(aa),a.each(function(a){c.push(f([this,b[a]]))})):b.each(function(){c.push(f(this))})),c},setSelection:function(a,b,c){var d,e,g=this.lastFocused,h=this.focusInHeader,i=[];if(this.tableData$){if(f.isArray(a))for(d=0;d<a.length;d++)e=a[d].children("td,th")[0],e&&i.push(e);else a.each(function(){e="TR"===this.nodeName?f(this).children("td,th")[0]:f(this).closest("td,th")[0],e&&i.push(e)});b=!!b,this.focusInHeader=!1,this._select(f(i),null,b,!1,c),b||(this.focusInHeader=h,h&&(this._setFocusable(g),this._setCurrentRow(g)))}},selectAll:function(a,b){var c=[],d=this.tableFrozenData$||this.tableData$;d&&this.options.multiple&&this.options.selectAll&&(d.children().each(function(){c.push(f(this).children()[0])}),this.setSelection(f(c),a,b))},getRecords:function(a){var b,c,d,e=[];for(b=0;b<a.length;b++)c=a[b].first().attr(Na),void 0!==c&&(d=this.model.getRecord(c),d&&e.push(d));return e},getSelectedRecords:function(){return this.options.persistSelection?this.model.getSelectedRecords():this.getRecords(this.getSelection())},setSelectedRecords:function(a,b){var c,d=[],e={},g=this.tableFrozenData$||this.tableData$;if(g){for(c=0;c<a.length;c++)e[this.model.getRecordId(a[c])]=!0;g.children().each(function(){var a=f(this),b=a.attr(Na);e[b]&&d.push(a)}),this.setSelection(d,b)}},getActiveRecordId:function(){return this.activeItemId},getActiveRecord:function(){return this.activeItem},lockActiveRow:function(){this.activeItem&&(this.activeRowLockCount+=1)},unlockActiveRow:function(){this.activeItem&&(this.activeRowLockCount-=1,this.activeRowLockCount<0&&(this.activeRowLockCount=0),0===this.activeRowLockCount&&this.activeRowUnlockCallback&&(this.activeRowUnlockCallback(),this.activeRowUnlockCallback=null))},resize:function(){var a,b,c,d,e,g,h=this.element,i=this.options,j=h.height(),k=h.width(),l=h.children(t),m=h.children(v);if(null!==h[0].offsetParent){if(!m.length)return void this.refresh();if(e=this.tableData$.prev().height(),h.find(v+" .a-GV-table").css("margin-top",-(e+parseInt(this.tableHeader$.find("th").first().css("border-bottom-width"),10))),b=k,this.tableFrozenData$&&(d=this.tableFrozenData$.closest(".a-GV-w-frozen").width(),h.find(".a-GV-w-frozen").width(d).toggleClass("a-GV-w-frozen--showLabels",d>Ha),this.tableData$.parent().parent().find(".a-GV-loadMoreButton").css("visibility",d>Ha?"hidden":"visible"),b-=d),h.find(".a-GV-w-scroll,.a-GV-w-hdr").width(b),this.tableData$.parent().width()>b)for(a=0;a<this.columns.length;a++)g=this.columns[a],g.width&&(g.curWidth=g.width);this._calculateColumnWidths(null,!0),f.apex.stickyWidget&&h.find(".js-stickyWidget-toggle").stickyWidget("refresh"),i.hasSize&&(c=j-l.height()-this._footerHeight(),m.children("."+y).addBack().height(c),this._adjustSizeForScrollBars(c,b,e)),this._initPageSize()}},expandControlBreak:function(a){this._expandCollapseControlBreak(a,!0)},collapseControlBreak:function(a){this._expandCollapseControlBreak(a,!1)},getColumns:function(){return this.columns},refreshColumns:function(){this.columns=null},setColumnWidth:function(a,b){var c=this._updateColumnWidth(a,b,!0);this._trigger(Ba,null,{header$:c[1],column:c[0],width:b})},hideColumn:function(a){var b=this._columnName(a);this.options.columns[0][b].hidden=!0,this._refreshGrid()},showColumn:function(a){var b=this._columnName(a);this.options.columns[0][b].hidden=!1,this._refreshGrid()},freezeColumn:function(a){var b,c,d=this.columns,e=this._columnName(a);for(b=0;b<d.length&&(c=d[b],b<d.length-1&&(c.frozen=!0),c.property!==e);b++);this._refreshGrid()},unfreezeColumn:function(a){var b,c,d=this._columnName(a);for(b=this.columns.length-1;b>=0&&(c=this.columns[b],c.frozen=!1,c.property!==d);b--);this._refreshGrid()},moveColumn:function(a,b){var c=this._moveColumn(a,b);this._refreshGrid(),c.header$=this._columnFromIndex(b),this._trigger(Aa,null,c)},moveColumnGroup:function(a,b,c){var d,e,f,g,h,i,j,k=[];if(f=this.columnGroups[a],!f)throw new Error("Invalid column group level: "+a);for(g=-1,d=0;d<f.length;d++)e=f[d],d===b&&(g=e.start,h=e.end),d===c&&(i=g===-1?e.start:e.end);if(c>b)for(d=g;d<=h;d++)j=this._moveColumn(this.columns[g],i),j.newPosition=i-(h-d),j.oldPosition=d,k.push(j),this._updateColumns();else for(d=h;d>=g;d--)j=this._moveColumn(this.columns[h],i),j.newPosition=i+(d-g),j.oldPosition=d,k.push(j),this._updateColumns();for(this._refreshGrid(),d=0;d<k.length;d++)j=k[d],j.header$=this._columnFromIndex(j.newPosition),this._trigger(Aa,null,j)},_refreshGrid:function(){var a;a=this.element.find(ia),a.length&&this._deactivateCell(a),this.refreshColumns(),this.refresh()},_cellFromColumn:function(a,b){var d,e,f,g=this.columns,h=this.options,i=null,j=0;if(e=h.columns[0][b],!e)return c.warn("Warning column not found "+b),null;for(h.rowHeader!==ua&&(j=1),d=0;d<g.length;d++)if(f=g[d],!f.hidden){if(f.property===b){i=a.children().eq(j);break}j+=1}return d>=g.length&&c.warn("Warning column is hidden "+b),i},_columnFromIndex:function(a){return this.element.find(".a-GV-header[data-idx="+a+"]")},_columnName:function(a){var b;if(b="object"==typeof a?a.property:a,!this.options.columns[0].hasOwnProperty(b))throw new Error("Unknown column: "+b);return b},_moveColumn:function(a,b){var c,d,e,f,g=this.columns,h=this._columnName(a);for(e=-1,c=0;c<g.length;c++)if(d=g[c],d.property===h){e=c;break}if(f=g[b].seq,e!==b){if(e<b)for(c=b;c>e;c--)g[c].seq=g[c-1].seq;else for(c=b;c<e;c++)g[c].seq=g[c+1].seq;return g[e].frozen=b<=this.lastFrozenColIndex,g[e].seq=f,{column:d,newPosition:b,oldPosition:e}}},_updateColumns:function(){var a,b,c,d,e,g,h,i,j,k,l,m,n,o=this.options,p=o.columns[0];this.columns=[],this.columnGroups=[],this.breakColumns=[],this.fieldToColumnIndex={};for(d in p)p.hasOwnProperty(d)&&(p[d].property=d,p[d].seq=p[d].seq||"0",this.columns.push(p[d]));for(this.columns.sort(function(a,b){return a.seq-b.seq}),this.lastFrozenColIndex=-1,a=0;a<this.columns.length;a++)if(c=this.columns[a],!c.hidden){if(!c.frozen)break;this.lastFrozenColIndex=a}for(l=o.rowHeader!==ua?1:0,a=0;a<this.columns.length;a++)c=this.columns[a],c.controlBreakIndex>0&&this.breakColumns.push(c),this.fieldToColumnIndex[c.property]=l,c.hidden||(l+=1);for(this.breakColumns.sort(function(a,b){return a.controlBreakIndex-b.controlBreakIndex}),g=null,i=null,j=null,m=!0,l=0,h=0,b=0,n=[],a=0;a<this.columns.length;a++)if(c=this.columns[a],!c.hidden){if(null===g&&(g=[],this.columnGroups.push(g)),k=q(c),k!==i||a===this.lastFrozenColIndex+1){if(i=k,j&&(j.span=l-h,j.end=b,j.children=n,n=[]),h=l,k){if(j=f.extend({},o.columnGroups[k]),!j)throw new Error("Unknown column group name: "+k);j.heading&&(m=!1),g.push(j)}else j={},g.push(j);j.start=a,a<=this.lastFrozenColIndex&&(j.frozen=!0)}n.push(c),l+=1,b=a,null===j&&(j={start:a},this.lastFrozenColIndex>=0&&(j.frozen=!0),g.push(j))}for(j&&(j.span=l-h,j.end=b,j.children=n),m&&(this.columnGroups=[],g=null);g;){for(e=g,g=null,i=null,j=null,m=!0,l=0,n=[],a=0;a<e.length;a++){if(c=e[a],(c.parentGroupName||null)!==i||c.frozen!==(!!j&&j.frozen)){if(i=c.parentGroupName||null,null===g&&(g=[],this.columnGroups.unshift(g),l>0&&(j={},c.frozen&&(j.frozen=!0),g.push(j))),j&&(j.span=l-h,j.children=n,n=[]),h=l,c.parentGroupName){if(j=f.extend({},o.columnGroups[c.parentGroupName]),!j)throw new Error("Unknown column group name: "+c.parentGroupName);j.heading&&(m=!1),g.push(j)}else j={},g.push(j);j.start=c.start,c.frozen&&(j.frozen=!0)}n.push(c),j.end=c.end,l+=c.span}j&&(j.span=l-h,j.end=c.end,j.children=n),m&&(this.columnGroups.shift(),g=null)}},_initGrid:function(){function a(){var a=o.element.find(ia);o.floatingItem$.hasClass(fa)?o._collapseFloatingItem(a):o._expandFloatingItem(a)}var b,d,e,g,h,i,j,k,l,m,n,o=this,p=!1,q=this.options,r=this.element,s="a-GV-table--checkbox";c.info("Grid render and initialize."),this._updateColumns(),this.columnItems||this._initColumnItems(this.columns),this._renderGrid(),r.find(ta).prop("tabIndex",-1),q.tooltip&&this._initTooltips(q.tooltip),q.rowHeader!==ua&&q.rowHeaderCheckbox&&(this.tableFrozenHeader$.parent().addClass(s),this.tableFrozenData$.parent().addClass(s)),g=r.children(v),l=g.find("col"),m=g.find("thead").find(".a-GV-header"),l.each(function(a){var b=f(this),c=o.columns[b.attr(Ma)];c&&(c.width?c.curWidth=c.width:c.curWidth=m.eq(a).outerWidth(),c.curWidth<Ga&&(c.curWidth=Ga))}),this._calculateColumnWidths(null,!0),b=r.find("."+x),d=r.find("."+y),e=r.find("."+w).last(),d.scroll(function(){p=!0,b.scrollLeft(this.scrollLeft),e.scrollTop(this.scrollTop),o.tableData$.parent().parent().find(".a-GV-loadMoreButton").css("left",this.scrollLeft),setTimeout(function(){p=!1},60)}),b.scroll(function(){p||d.scrollLeft(this.scrollLeft),p=!1}),e.scroll(function(){p||d.scrollTop(this.scrollTop),p=!1}),i=this.element.find(Y),this.tabTraps$=i,2===i.length?j=0:(3===i.length?(j=1,k=0):(j=4,k=3,i.eq(0).on("focus",function(){o.tableData$.find(ta).first().focus()}),i.eq(1).on("focus",function(){o.tableData$.find(ta).last().focus()}),i.eq(2).on("focus",function(){o.tableFrozenData$.find(ta).first().focus()})),i.eq(k).on("focus",function(){f(this).hasClass("js-autoAdd")?o._autoAddRecord(o.activeItem):o.tableFrozenData$.find(ta).last().focus()})),i.eq(j).on("focus",function(){var a,b,c=f(o.lastEditModeCell).closest("tbody"),d=c.find(ta).add(o.lastEditModeCell),e=d.index(o.lastEditModeCell);e>0?d.first().focus():o.tableFrozenData$&&0===i.eq(0).prop("tabIndex")?(c=c[0]===o.tableFrozenData$[0]?o.tableData$:o.tableFrozenData$,c.find(ta).first().focus()):(a=f(ta),
b=o.element.find(ta).first(),e=a.index(b),a.eq(e-1).focus())}),i.eq(j+1).on("focus",function(){var a=f(o.lastEditModeCell).closest("tbody"),b=a.find(ta).add(o.lastEditModeCell),c=b.index(o.lastEditModeCell);f(this).hasClass("js-autoAdd")?o._autoAddRecord(o.activeItem):c<b.length-1?b.last().focus():o.tableFrozenData$&&(a=a[0]===o.tableFrozenData$[0]?o.tableData$:o.tableFrozenData$,a.find(ta).last().focus())}),i.prop("tabIndex",-1),q.reorderColumns&&this._initColumnReorder(),q.resizeColumns&&this._initColumnResize(),this.columnControls$.on("click","button",function(a){var b=f(a.target);o._sortChange(a,b.closest(G),b.closest("button").hasClass("js-asc")?"asc":"desc")}),this.floatingItem$.draggable({handle:".a-GV-cellMoveHandle",containment:"document"}).on("keydown",function(b){if(b.ctrlKey&&117===b.which)return a(),!1}).children(".a-GV-expandCollapse").click(a),this._initPaginationFooter(d),!q.hasSize&&q.stickyTop&&f.apex.stickyWidget&&(n={stickToEnd:!0,toggleWidth:!0,bottom:function(){return r.offset().top+r.outerHeight()-o._footerHeight()}},f.isFunction(q.stickyTop)&&(n.top=q.stickyTop),r.find(t).stickyWidget(n)),this.breakColumns.length>0&&r.find(v).on("click",".js-toggleBreak",function(){h=f(this).closest("."+T),o._expandCollapseControlBreak([h],!h.hasClass(fa))})},_initColumnReorder:function(){var a,b,c,d,e,g,i,j,k,l,m,n,q,r,s=this.element.hasClass(ra),u=this.element.find(t),v=this;u.append(this.columnMoveMarker$),r=parseInt(v.columnHandle$.css("margin-left"),10),s&&(r=-r),v.columnHandle$.draggable({appendTo:this.element,containment:u,cursor:"move",cursorAt:s?{right:-2*r}:{left:0},axis:"x",delay:100,distance:4,helper:function(){var a=f("<div class='a-GV-header-dragHelper'></div>"),b=v.columnReorderCell$;return a.append(b.find(".a-GV-headerLabel,."+O).clone()),a.width(b.outerWidth()),a},start:function(p,r){v.columnControls$.hide(),v._trigger(Da,p,{}),a=v.columnReorderCell$.parent().offset().top-v.element.offset().top,b=a+v.element[0].offsetTop,g=u.css("position"),j="absolute",i=2,k=-u.offset().left,"relative"!==g&&("fixed"===g&&(k=0,a=b=v.columnReorderCell$.parent()[0].offsetTop+u[0].offsetTop,j="fixed",r.helper.css("margin-left",v.element.offset().left+"px")),i=parseInt(u.css("z-index"),10)+1),l=-v.columnMoveMarker$.width()/2,r.helper.css({top:b+"px",position:j,"z-index":i}),n=r.helper.outerWidth(),v.columnMoveMarker$.show().css({top:a+"px",left:v.columnReorderCell$.offset().left+k+(s?v.columnReorderCell$.width():0)+"px",position:j,"z-index":i}),v.columnReorderCell$.find(".a-GV-headerLabel,.a-GV-header-sort").hide(),v.columnHandle$.hide(),v.columnWidthHandle$.hide(),o(function(){v.columnReorderCancel=!0}),m=parseInt(v.columnReorderCell$.attr(Ma),10),v.hdrScrollParent=v.element.find(".a-GV-w-hdr")[0],q=v.hdrScrollParent.scrollLeft,c=[],e=null,d=v.columnReorderCell$.parent(),v.tableFrozenHeader$&&(d=d.add(v._getOtherTable(d).children().eq(h(d)))),d.children().each(function(){var a=f(this),b=!0,d=a.offset().left+k;a.parent().parent().parent().parent()[0]===v.hdrScrollParent&&(d+=q,b=!1),c.push({colIdx:parseInt(a.attr(Ma),10),start:d,end:d+a.outerWidth(),frozen:b})}),v.columnReordering=!0,v.columnReorderCancel=!1},drag:function(a,b){function d(){var b,d,h,i=!1,j=a.pageX-r+k+v.hdrScrollParent.scrollLeft;for(b=0;b<c.length;b++)if(d=c[b],j>=d.start&&j<d.end){b!==e&&(e=b,h=s?(d.colIdx<m?d.end:d.start)+l:(d.colIdx<m?d.start:d.end)+l,d.frozen||(h-=v.hdrScrollParent.scrollLeft),g=h,f=v.hdrScrollParent.scrollLeft,v.columnMoveMarker$.css("left",h+"px"),i=!0);break}i||f===v.hdrScrollParent.scrollLeft||(h=g-(v.hdrScrollParent.scrollLeft-f),v.columnMoveMarker$.css("left",h+"px"))}var f=v.hdrScrollParent.scrollLeft,g=parseInt(v.columnMoveMarker$.css("left"),10);return v.columnReorderCancel?void a.preventDefault():(d(),void(v._headerScrollCheck(a.pageX-r,n)?v.scrollTimerId||v._headerScrollStart(a.pageX-r,n,d):v.scrollTimerId&&v._headerScrollStop()))},stop:function(a,b){var f=null;null!==e&&(f=c[e].colIdx),isNaN(f)&&e+1<c.length&&(f=c[e+1].colIdx),isNaN(f)||(v.columnReordering=!1,v.columnReorderCell$.find(".a-GV-headerLabel,.a-GV-header-sort").show(),f===m&&(v.columnHandle$.show(),v.columnWidthHandle$.show(),v.columnControls$.show()),v.columnMoveMarker$.hide(),v.lastHoverCell=null,p(),v.scrollTimerId&&v._headerScrollStop(),v.columnReorderCancel||null===f||f===m||(v.columnReorderCell$.hasClass(H)?v.moveColumnGroup(h(d),m,f):v.moveColumn(v.columns[m],f),v.focus()))}})},_initColumnResize:function(){var a,b,c,d=this,e=this.element.hasClass(ra)?-1:1,g=this.element.find(t),h=g.find("tr").last();this.columnWidthHandle$=f("<div class='a-GV-columnWidthHandle'></div>").appendTo(g).css("top",h[0].offsetTop).height(h.height()),this.columnWidthHandle$.draggable({axis:"x",containment:g,start:function(e,f){d.columnWidthDragging=!0,d.columnWidthCancel=!1,d.columnWidthStartPos=f.position.left,d.columnWidthStartWidth=d.columnWidthCell$.first().outerWidth(),a=f.helper.outerWidth(),d.hdrScrollParent=d.element.find(".a-GV-w-hdr")[0],c=d.columnWidthCell$.parent().parent().parent().parent()[0]!==d.hdrScrollParent,b=d.hdrScrollParent.scrollLeft,o(function(){d.columnWidthCancel=!0})},drag:function(f,g){function h(a){var f,h,i=d.columnWidthStartWidth+e*(g.position.left-d.columnWidthStartPos);f=d.hdrScrollParent.scrollWidth,c||(i+=d.hdrScrollParent.scrollLeft-b),i>Ga&&(d.columnWidthCell$.hasClass(P)?(d.rowHeaderWidth=i,d._calculateColumnWidths()):d._updateColumnWidth(d._getColumnMetadata(d.columnWidthCell$.first()),i)),h=d.hdrScrollParent.scrollWidth-f,h<0&&!a&&d.hdrScrollParent.scrollLeft!==b&&(d.hdrScrollParent.scrollLeft+=h,b+=h)}return d.columnWidthCancel?void f.preventDefault():(h(),void(d._headerScrollCheck(g.offset.left,a)?d.scrollTimerId||d._headerScrollStart(g.offset.left,a,function(){h(!0)}):d.scrollTimerId&&d._headerScrollStop()))},stop:function(a,f){var g=d.columnWidthStartWidth+e*(f.position.left-d.columnWidthStartPos);c||(g+=d.hdrScrollParent.scrollLeft-b),d.columnWidthDragging=!1,p(),d.scrollTimerId&&d._headerScrollStop(),d.columnWidthCancel&&(g=d.columnWidthStartWidth),g<Ga&&(g=Ga),d.columnWidthCell$.hasClass(P)?(d.rowHeaderWidth=g,d._calculateColumnWidths(null,!0)):d.setColumnWidth(d._getColumnMetadata(d.columnWidthCell$.first()),g)}})},_updateColumnWidth:function(a,b,c){var d,e,f,g=this._columnName(a);return d=this.options.columns[0][g],d.width=b,d.curWidth=b,f=this.columns.indexOf(d),e=this._columnFromIndex(f),this._calculateColumnWidths(e,c),[d,e]},_calculateColumnWidths:function(a,b){function c(a){var b,c;for(b=a+1;b<q.columns.length;b++)if(c=q.columns[b],!c.hidden&&!c.noStretch&&b!==o)return!1;return!0}function d(a,b){var c,d=b.parent().find("col"),e=a.parent().find("col");return c=0,e.each(function(a){var b,e,g=f(this),h=g.attr(Ma);h?(e=q.columns[h],b=e.curWidth,g[0].width=b,d[a].width=b,c+=b):(b=q.rowHeaderWidth,g.width(b),d.eq(a).width(b),c+=b)}),b.parent().width(c),a.parent().width(c),c}var e,g,h,i,j,k,l,m,n,o,p=this.element,q=this;if(a&&(k=a.parent().parent()[0],o=parseInt(a.attr(Ma),10)),!this.tableFrozenData$||k&&k!==this.tableFrozenHeader$[0]||(d(this.tableFrozenData$,this.tableFrozenHeader$),i=this.tableFrozenData$.parent().outerWidth(),p.find(".a-GV-w-frozen").width(i),h=p.width()-i,p.find(".a-GV-w-scroll,.a-GV-w-hdr").width(h)),h=k&&k!==this.tableHeader$[0]?this.tableData$.parent().width():d(this.tableData$,this.tableHeader$),b&&(j=p.find(".a-GV-w-scroll")[0].clientWidth,h<j)){if(j=j-h-1,j>10)for(n=j,e=0;e<this.columns.length;e++)g=this.columns[e],g.hidden||g.frozen||g.noStretch||e===o||(c(e)?g.curWidth+=n:(m=Math.floor(j*(g.curWidth/h)),g.curWidth+=m,n-=m));else for(e=this.columns.length-1;e>0;e--)if(g=this.columns[e],!(g.hidden||g.frozen||g.noStretch||e===o)){g.curWidth=g.curWidth+j;break}d(this.tableData$,this.tableHeader$)}this.options.hasSize&&(l=this.element.children(v),this._adjustSizeForScrollBars(l.height(),l.find(".a-GV-w-scroll").width(),this.tableData$.prev().height()))},_renderGrid:function(){function b(a,b){var c,d;for(b&&k.rowHeader!==ua&&a.markup("<col").optionalAttr("width",j.rowHeaderWidth).markup("/>"),c=0;c<j.columns.length;c++)d=j.columns[c],(d.frozen||!1)!==b||d.hidden||a.markup("<col").optionalAttr("width",d.width).attr(Ma,c).markup("/>")}function c(a,b,c){var e,f,h,l,m,n,o,p,q=j.columns,r=j.lastFrozenColIndex+1,s=q.length;for(f=0;f<j.columnGroups.length;f++){for(n=j.columnGroups[f],a.markup("<tr class='"+A+"' role='row'>"),e=0;e<n.length;e++)for(b&&k.rowHeader!==ua&&(a.markup("<th scope='colgroup' role='columnheader' class='"+H+" "+P+"'"),c&&a.markup(" style='visibility: hidden;'"),a.markup(">")),e=0;e<n.length;e++)h=n[e],(h.frozen||!1)===b&&(l=H,l+=g(h.headingAlignment||"center",!0),a.markup("<th scope='colgroup' role='columnheader' ").attr("class",l).attr(La,h.span).attr(Ma,e),c&&a.markup(" style='visibility: hidden;'"),a.markup(" tabindex='-1'><span class='"+L+"'>").markup(h.heading||"").markup("</span></th>"));a.markup("</tr>")}for(a.markup("<tr class='"+A+"' role='row'>"),b&&k.rowHeader!==ua&&(p=null,c&&(p+="visibility: hidden;"),a.markup("<th scope='col' role='columnheader' class='"+F+" "+P+"'").optionalAttr("style",p).markup(">"),k.rowHeaderCheckbox&&k.multiple&&k.selectAll&&a.markup("<span class='a-GV-rowSelector'><input class='"+J+"' tabindex='-1' type='checkbox'/></span>"),k.rowHeader===va?a.markup("<span class='a-GV-rownum'></span>"):k.rowHeader===wa&&a.markup("<span class='a-GV-rowLabel'></span>"),a.markup("</th>")),b&&(r=0,s=j.lastFrozenColIndex+1),e=r;e<s;e++)h=q[e],h.hidden||(l=F,l+=g(h.headingAlignment||"center",!0),h.isRequired&&(l+=" is-required"),h.elementId&&!h.readonly||(l+=" is-readonly"),h.headingCssClasses&&(l+=" "+h.headingCssClasses),o=null,1===h.sortIndex&&("asc"===h.sortDirection?o="ascending":"desc"===h.sortDirection&&(o="descending")),p=null,c&&(p="visibility: hidden;"),a.markup("<th scope='col' role='columnheader' ").attr("class",l).attr(Ma,e).optionalAttr("style",p).optionalAttr("aria-sort",o).optionalAttr("aria-haspopup",k.activateColumnHeader?"true":null).markup(" tabindex='-1'><span class='"+L+"'").optionalAttr("id",h.elementId?h.elementId+"_HDR":null).markup(">").markup(h.heading).markup("</span>"),h.sortDirection&&(m=i>1?d.formatMessage("asc"===h.sortDirection?"APEX.GV.SORT_ASCENDING_ORDER":"APEX.GV.SORT_DESCENDING_ORDER",h.sortIndex):d.getMessage("asc"===h.sortDirection?"APEX.GV.SORT_ASCENDING":"APEX.GV.SORT_DESCENDING"),a.markup("<span class='a-GV-header-sort'><span").attr("class","a-Icon "+("asc"===h.sortDirection?"icon-irr-sort-asc":"icon-irr-sort-desc")).attr(Ka,m).attr(oa,m).markup("></span>"),i>1&&a.content(h.sortIndex),a.markup("</span>")),a.markup("</th>"));a.markup("</tr>")}var e,f,h,i,j=this,k=this.options,l=a.htmlBuilder(),m="<table role='presentation' class='"+z+"'>",n="<thead role='rowgroup'>",o="<input type='text' class='"+X+" u-vh is-focusable' tabindex='-1'>";for(h=this.lastFrozenColIndex>=0||k.rowHeader!==ua,i=0,e=0;e<this.columns.length;e++)this.columns[e].sortDirection&&(i+=1);l.markup("<div class='"+s+"'>"),h&&(l.markup("<div class='"+w+"'>"+m),b(l,!0),l.markup(n),c(l,!0,!1),l.markup("</thead></table></div>")),l.markup("<div class='"+x+"'>"+m),b(l,!1),l.markup(n),c(l,!1,!1),l.markup("</thead></table></div></div><div class='"+u+"'>"),this._renderAltDataMessages(l),h&&(l.markup(o+"<div class='"+w+"'>"+m),b(l,!0),l.markup(n),c(l,!0,!0),l.markup("</thead><tbody></tbody></table>"),this._renderLoadMore(l),l.markup("</div>"+o+o)),l.markup("<div class='"+y+"' tabindex='-1'>"+m),b(l,!1),l.markup(n),c(l,!1,!0),l.markup("</thead><tbody></tbody></table>"),this._renderLoadMore(l),l.markup("</div>"),(h||k.autoAddRecord)&&l.markup(o),l.markup("</div>"),k.editable&&l.markup("<div class='a-GV-floatingItem' tabindex='-1' style='display: none;'>").markup("<div class='a-GV-cellMoveHandle'></div>").markup("<button type='button' class='a-GV-expandCollapse' tabindex='-1'><span aria-hidden='true' class='a-Icon'></span></button>"+o+"<div class='"+Z+"'></div>"+o+"</div>"),this._renderFooter(l),k.columnSort&&(l.markup("<div class='"+M+"' style='display:none'>"),this._renderButton(l,"a-Button js-asc","icon-up-chevron",d.getMessage("APEX.GV.SORT_ASCENDING")),this._renderButton(l,"a-Button js-desc","icon-down-chevron",d.getMessage("APEX.GV.SORT_DESCENDING")),l.markup("</div>")),k.reorderColumns&&l.markup("<div class='"+O+"' style='display:none'></div>").markup("<div class='a-GV-colMoveMarker' style='display:none'>").markup("<span class='a-GV-colMoveMarker-x'></span></div>"),this.element.html(l.toString()),this.pageKey=null,f=this.element.find("tbody,thead"),h?(this.tableFrozenHeader$=f.eq(0),this.tableHeader$=f.eq(1),this.tableFrozenData$=f.eq(3),this.tableData$=f.eq(5)):(this.tableFrozenHeader$=null,this.tableFrozenData$=null,this.tableHeader$=f.eq(0),this.tableData$=f.eq(2)),this.columnControls$=this.element.find(N),this.columnControls$.find("button").attr("tabindex",-1),this.columnHandle$=this.element.find("."+O),this.columnMoveMarker$=this.element.find(".a-GV-colMoveMarker"),this.floatingItem$=this.element.find(".a-GV-floatingItem")},_calcSpanAllColumns:function(a){var b,c,d,e;for(c=0,a?(d=0,e=this.lastFrozenColIndex+1,this.options.rowHeader!==ua&&(c+=1)):(d=this.lastFrozenColIndex+1,e=this.columns.length),b=d;b<e;b++)this.columns[b].hidden||(c+=1);return c},_getHeaderHeight:function(){return this.element.find(t).outerHeight()},_getStickyTop:function(){return f.isFunction(this.options.stickyTop)?this.options.stickyTop():0},_selectedCount:function(){return this.options.persistSelection?this.model.getSelectedCount():this.tableData$.find(aa).length},_deletedCount:function(){return this.tableData$.find(ka).length},_hasControlBreaks:function(){return this.breakColumns.length>0},_getRecordHeight:function(){var a,b;return a=this.tableData$.find("tr").filter(sa).first(),a.length?b=a.outerHeight():(a=f("<tr class='"+A+"'><td class='"+C+"'></td></tr>"),a=this.tableData$.append(a),b=a.outerHeight(),this.tableData$.empty()),b},_getDataRenderContext:function(){return{hasFrozenColumns:this.lastFrozenColIndex>=0||this.options.rowHeader!==ua,dataOut:a.htmlBuilder(),frozenOut:a.htmlBuilder()}},_getDataContainer:function(){return this.tableFrozenData$?f([this.tableFrozenData$[0],this.tableData$[0]]):this.tableData$},_insertFiller:function(a,b){var c,d;return a.hasFrozenColumns&&(d=f(a.frozenOut.toString()),b?b.first().before(d):this.tableFrozenData$.html(d)),c=f(a.dataOut.toString()),b?b.last().before(c):this.tableData$.html(c),a.hasFrozenColumns&&(c=f([d[0],c[0]])),c},_insertData:function(a,b,c,d,e){var f,g,h,j=this;a.hasFrozenColumns&&(h=i(a.frozenOut)),g=i(a.dataOut),d?(a.hasFrozenColumns&&d.first()[e](h),d.last()[e](g)):(a.hasFrozenColumns&&this.tableFrozenData$.append(h),this.tableData$.append(g)),this.options.hasSize&&(f=this.element.children(v),this._adjustSizeForScrollBars(f.height(),f.find(".a-GV-w-scroll").width(),this.tableData$.prev().height())),this.gotoCellPending&&setTimeout(function(){j.gotoCell(j.gotoCellPending.record,j.gotoCellPending.column)},1),this._trigger(Ea,null,{offset:b,count:c})},_controlBreakLabel:function(b){var c,d,e,f,g=this.options,h="";for(c=0;c<this.breakColumns.length;c++)d=this.breakColumns[c],c>0&&(h+=", "),e=this.model.getValue(b,d.property),null===e&&(e=""),"object"==typeof e&&e.hasOwnProperty("d")?e=e.d:(f=this.columnItems[d.property],f&&(e=f.item.displayValueFor(e))),""===e&&g.showNullAs&&(e=g.showNullAs),d.escape===!1&&(e=a.escapeHTML(e)),h+="<span class='a-GV-breakLabel'>"+(d.label?a.escapeHTML(d.label):d.heading)+":</span> <span class='a-GV-breakValue'> "+e+"</span>";return h},_renderBreakRecord:function(a,b,c){a.hasFrozenColumns&&(this._renderBreakRow(a.frozenOut,!0,b,c),b=!1),this._renderBreakRow(a.dataOut,!1,b,c)},_renderFillerRecord:function(a,b){a.hasFrozenColumns&&a.frozenOut.markup("<tr class='"+b+"'><td ").attr(La,this._calcSpanAllColumns(!0)).markup("></td></tr>"),a.dataOut.markup("<tr class='"+b+"'><td ").attr(La,this._calcSpanAllColumns(!1)).markup("></td></tr>")},_renderRecord:function(a,b,c,d,e){a.hasFrozenColumns&&this._renderRow(a.frozenOut,b,c,d,e,!0),this._renderRow(a.dataOut,b,c,d,e,!1)},_insertRecord:function(b,c,d,e,g){var h,j,k=this.lastFrozenColIndex>=0||this.options.rowHeader!==ua,l=a.htmlBuilder(),m=[];return k&&(this._renderRow(l,c,null,d,e,!0),h=i(l),m.push(h[0]),"after"===g&&b?(j=b.first(),j.after(h)):this.tableFrozenData$.prepend(h),l.clear()),this._renderRow(l,c,null,d,e,!1),h=i(l),m.push(h[0]),"after"===g&&b?(j=b.last(),j.after(h)):this.tableData$.prepend(h),f(m)},_afterInsert:function(a){var b,c,d=!!this.element.find("."+ba).length,e=a[0].find(".a-GV-cell").first();for(b=0;b<this.columns.length;b++)if(c=this.columns[b],!c.hidden&&!c.readonly&&this.columnItems[c.property]){e=m(a[0],this.fieldToColumnIndex[c.property]);break}this._select(e,null,d,!1,!1),d&&this.options.editable&&!this.editMode&&this.setEditMode(!0)},_updateRecordField:function(b,c,d,e){var f,g,h,i,j=a.htmlBuilder();f=m(b,this.fieldToColumnIndex[d]),this.editMode&&c===this.activeItem&&!this.ignoreItemChange&&(g=this.columnItems[d],g&&this._setColumnItemValue(g.item,c,d)),f.hasClass(ga)||(h=this.options.columns[0][d],i=null,e.fields&&(i=e.fields[h.property]),j=a.htmlBuilder(),this._renderFieldDataValue(j,h,c,e,i),f.html(j.toString()))},_updateRecordState:function(a,b,c){var d,e,f,g,h=!this.tooltipOptions;if(a.removeClass(ja+" is-inserted is-updated is-error is-warning"),g="",c.deleted?g+=" "+ja:(c.inserted?g+=" is-inserted":c.updated&&(g+=" is-updated"),c.error?g+=" is-error":c.warning&&(g+="is-warning")),g&&a.addClass(g),h&&(c.message?a.first().find(".a-GV-rowHeader").attr(Ka,c.message):a.first().find(".a-GV-rowHeader").removeAttr(Ka)),c.fields)for(d in c.fields)c.fields.hasOwnProperty(d)&&(e=c.fields[d],f=m(a,this.fieldToColumnIndex[d]),f.removeClass("is-changed is-error is-warning"),c.deleted||(g="",e.error?g+=" is-error":e.warning?g+=" is-warning":e.changed&&(g+=" is-changed"),g&&f.addClass(g)),h&&(e.message&&!c.deleted?f.attr(Ka,e.message):f.removeAttr(Ka)))},_removeRecord:function(a){a.remove()},_identityChanged:function(a,b){var c=this._elementsFromRecordIds([a])[0];c.attr(Na,b),this.activeItemId===a&&(this.activeItemId=b)},_replaceRecord:function(b,c,d,e,g){var j,l,n,o=null,p=null,q=[],r=b.first().children().first().find(".a-GV-rownum").text()||null,s=this.lastFrozenColIndex>=0||this.options.rowHeader!==ua,t=a.htmlBuilder();this.activeItem=null,r&&(r=parseInt(r,10)-1),l=b.hasClass(_),n=b.find(this.lastFocused).length,n&&(o=0,p=h(k(this.lastFocused))),s&&(n&&b.last().find(this.lastFocused).length&&(o=1),this._renderRow(t,c,r,e,g,!0),j=i(t),q.push(j[0]),b.first().replaceWith(j),t.clear()),this._renderRow(t,c,r,e,g,!1),j=i(t),q.push(j[0]),b.last().replaceWith(j),j=f(q),n?this._select(m(j.eq(o),p),{},!1,!1):l&&j.addClass(_)},_removeFocus:function(a){var b,c,d;b=f(this.lastFocused).closest("tr"),(b[0]===a[0]||a.length>1&&b[0]===a[1])&&(c=l(this.lastFocused),d=this._getNextCellDown(c,1),d||(d=this._getPrevCellUp(c,1)),d&&this._select(d,{},!0,!1))},_elementsFromRecordIds:function(a){var b,c,d=!0,e=[],g={};for(b=0;b<a.length;b++)g[a[b]]=b,e[b]=null;return this.tableFrozenData$||(d=!1),d&&(c=this.tableFrozenData$.children()),this.tableData$.children().each(function(a){var b=f(this),h=b.attr(Na);void 0!==g[h]&&(d?e[g[h]]=f([c[a],this]):e[g[h]]=b)}),e},_renderBreakRow:function(a,b,c,e){var f;f=this._calcSpanAllColumns(b),a.markup("<tr role='row' class='a-GV-controlBreak is-expanded'><th class='a-GV-controlBreakHeader' scope='colgroup'").attr(La,f).markup(">"),c&&this._renderButton(a,"a-Button js-toggleBreak","icon-down-arrow",d.getMessage("APEX.GV.BREAK_COLLAPSE")),a.markup("<span class='a-GV-controlBreakLabel'>").markup(e).markup("</span></th></tr>")},_renderRow:function(a,b,c,d,e,f){var h,i,j,k,l,m,n=null,o=null,p=null,q=this.options,r=this.columns,s=this.lastFrozenColIndex+1,t=r.length,u=!this.tooltipOptions;for(j=A,e.agg?(j+=" is-aggregate",j+=" a-GV-aggregate--"+e.agg,e.grandTotal?(j+=" is-grandTotal",n=q.aggregateLabels[e.agg].overallLabel):n=q.aggregateLabels[e.agg].label):(e.sel&&(j+=" "+_),e.deleted?j+=" "+ja:(e.inserted?j+=" is-inserted":e.updated&&(j+=" is-updated"),e.error?j+=" is-error":e.warning&&(j+=" is-warning"),e.highlight&&(k=q.highlights[e.highlight],j+=k&&k.cssClass?" "+k.cssClass:" "+e.highlight),e.message&&u&&(o=e.message),this.model.allowEdit(b)||(j+=" is-readonly"))),a.markup("<tr role='row'").attr(Na,d).attr("class",j).optionalAttr(Ka,n).optionalAttr(la,e.sel?"true":null).optionalAttr("style",this.controlBreakCollapsed?"display:none;":null).markup(">"),f&&q.rowHeader!==ua&&(a.markup("<th role='rowheader'").attr("class",C+" "+P).optionalAttr(Ka,o).optionalAttr("scope",e.agg||q.rowHeader===wa?"row":null).markup(">"),q.rowHeaderCheckbox&&!e.agg&&a.markup("<span").attr("class",q.multiple?"a-GV-rowSelector":"a-GV-rowSelector a-GV-rowSelector--single").markup("><input class='"+J+"' tabindex='-1'").attr("type",q.multiple?"checkbox":"radio").optionalBoolAttr("checked",!!e.sel).markup("/></span>"),q.rowHeader!==va||e.agg||a.markup("<span class='a-GV-rownum'>").content(void 0!==e.serverOffset?e.serverOffset+1:"").markup("</span>"),(e.agg||q.rowHeader===wa)&&(a.markup("<span class='a-GV-rowLabel'>"),e.agg?a.content(q.aggregateLabels[e.agg][e.grandTotal?"overallLabel":"label"]):q.rowHeaderLabelColumn&&a.markup(this.model.getValue(b,q.rowHeaderLabelColumn)),a.markup("</span>")),a.markup("</th>")),f&&(s=0,t=this.lastFrozenColIndex+1),h=s;h<t;h++)i=r[h],l=null,e.fields&&(l=e.fields[i.property]),i.hidden||(j=C,j+=g(i.alignment),i.columnCssClasses&&(j+=" "+i.columnCssClasses),p=null,l&&(l.error?j+=" is-error":l.warning?j+=" is-warning":l.changed?j+=" is-changed":l.highlight&&(k=q.highlights[l.highlight],j+=k&&k.cssClass?" "+k.cssClass:" "+l.highlight),l.disabled&&(j+=" is-disabled"),l.ck&&(j+=" is-readonly")),u&&(l&&l.message?p=l.message:e.agg&&(p=q.aggregateTooltips[e.agg+"|"+i.property])),m="td",i.usedAsRowHeader&&(m="th"),a.markup("<"+m+" role='gridcell' tabindex='-1'").attr("class",j).optionalAttr(Ka,p).optionalAttr("scope",i.usedAsRowHeader?"row":null).markup(">"),this._renderFieldDataValue(a,i,b,e,l),a.markup("</"+m+">"));a.markup("</tr>")},_getColumnMetadata:function(a){var b,c,d;if(a.hasClass(C))b=h(a),c=a.closest("."+w).length?this.tableFrozenHeader$:this.tableHeader$,d=c.children().last().children().eq(b);else{if(!a.hasClass(F))return null;d=a}return b=parseInt(d.attr(Ma),10),isNaN(b)?null:this.columns[b]},_activateColumnHeader:function(a,b){var c=this._getColumnMetadata(b);c.noHeaderActivate||this._trigger(Ca,a,{header$:b,column:c})},_activateRow:function(a){var b,c,d,e,f,g,h,i=a.parent(),j=i.attr(Na);for(e=this.model.getRecord(j),f=this.model.getRecordId(e),h=this.model.allowEdit(e),g=this.model.getRecordMetadata(f),i.addClass(ga),this._beginSetColumnItems(),b=0;b<this.columns.length;b++)d=this.columns[b].property,c=this.columnItems[d],c&&this._setColumnItemValue(c.item,e,d,h?g:null);this.activeItem=e,this.activeItemId=f,this._endSetColumnItems(),this._triggerBeginEditing(this.activeItem,this.activeItemId)},_deactivateRow:function(a){var b,c,d,e,f,g,h,i=this.element.find(".a-GV-row.is-active");if(this.activeRowLockCount>0)return void(this.activeRowUnlockCallback=a);if(i.removeClass(ga),f=this.model.getRecordMetadata(this.activeItemId),f&&!f.deleted&&this.model.allowEdit(this.activeItem))for(b=0;b<this.columns.length;b++)d=this.columns[b].property,c=this.columnItems[d],c&&(h=c.item.isDisabled(),h?this.model.setValidity("valid",this.activeItemId,d):(e=c.item.getValidity(),e.valid||this.model.setValidity("error",this.activeItemId,d,c.item.getValidationMessage())),g=f.fields?f.fields[d]:null,(g&&g.hasOwnProperty("disabled")||h)&&(g||(f.fields||(f.fields={}),g={},f.fields[d]=g),g.disabled=h));this._triggerEndEditing(this.activeItem,this.activeItemId),this.activeItem=null,this.activeItemId=null,a()},_beginDeactivate:function(a,b){var c=this;this.deactivateDelayTimer=setTimeout(function(){c.lastEditModeCell=null,c._deactivateCell(a),b&&(c.dontFocusEditableItem=!0,a.focus()),c.deactivateDelayTimer=null},10)},_clearDeactivate:function(){this.deactivateDelayTimer&&(clearTimeout(this.deactivateDelayTimer),this.deactivateDelayTimer=null)},_activateCell:function(a){function b(){c=l._getColumnMetadata(a),c&&(m=l.columnItems[c.property]),m&&l.model.allowEdit(l.activeItem)&&!c.readonly&&!a.hasClass("is-readonly")&&(a.addClass(ga),g=m.item.getPopupSelector(),g&&f(document.body).on("focusin.gridpopup",function(a){f(a.target).closest(g).length&&l._clearDeactivate()}).on("focusout.gridpopup",function(a){var b;f(a.target).closest(g).length&&(b=f(l.lastEditModeCell),l._beginDeactivate(b,!0))}),m.element$.height()>a.height()?(a.empty(),l.floatingItem$.children($).append(m.element$),l._expandFloatingItem(a,!0)):a.empty().append(m.element$),l._activateColumnItem(m,c.elementId+"_HDR"),l.dontFocusEditableItem||m.item.setFocus(),l.dontFocusEditableItem=!1)}var c,d,e,g,h,i,j,k=this.options,l=this,m=null,n=a.hasClass(U),o=this.tabTraps$;if(this.lastEditModeCell=a[0],a.parent().hasClass(_)||this._select(a,null,!1,!1),this._setFocusable(a[0]),a.attr("tabindex",-1),d=this._nextCellWithWrap(a).attr("tabindex",0),e=this._prevCellWithWrap(a).attr("tabindex",0),i=null,this.tableFrozenData$?(i=3,h=5,o.eq(0).prop("tabIndex",e.length?0:-1),j=1===a.parent().children().length,o.eq(1).prop("tabIndex",j?0:-1),o.eq(2).prop("tabIndex",j?0:-1)):k.autoAddRecord?(i=0,h=2):h=1,null!==i&&(k.autoAddRecord&&this.onLastPage&&0===d.length?o.eq(i).prop("tabIndex",0).addClass("js-autoAdd"):o.eq(i).prop("tabIndex",d.length?0:-1).removeClass("js-autoAdd")),k.autoAddRecord&&this.onLastPage&&0===d.length?o.eq(h).prop("tabIndex",0).toggleClass("js-last",!d.length).addClass("js-autoAdd"):o.eq(h).prop("tabIndex",d.length?0:-1).toggleClass("js-last",!d.length).removeClass("js-autoAdd"),!this.activeItem||this.activeItemId!==a.parent().attr(Na)){if(this.activeItem)return void this._deactivateRow(function(){n||(l._activateRow(a),b())});n||this._activateRow(a)}n||b()},_expandFloatingItem:function(a,b){var c,d,e=a.outerWidth();this.floatingItem$.css("position","").css("min-width",e+"px").insertAfter(this.element.find(v)).show().addClass(fa).draggable("enable").find(".a-GV-expandCollapse span").removeClass("icon-ig-expand").addClass("icon-ig-restore"),this.floatingItem$.children($).show().css({width:"",height:""}),b?this.floatingItem$.position({my:"left top",at:"left top",of:a,collision:"fit fit"}):this.floatingItem$.css({left:this.lastFloatingPos.left,top:this.lastFloatingPos.top}),this.floatingItem$.find(Y).not(".js-last").attr("tabindex",0),c=this._getColumnMetadata(a),c&&(d=this.columnItems[c.property]),d.item.setFocus()},_collapseFloatingItem:function(a){var b=a.innerWidth(),c=a.innerHeight();this.lastFloatingPos={left:this.floatingItem$.css("left"),top:this.floatingItem$.css("top")},this.floatingItem$.css({position:"relative",left:"",top:""}).appendTo(a).draggable("disable").removeClass(fa+" ui-state-disabled").find(".a-GV-expandCollapse span").removeClass("icon-ig-restore").addClass("icon-ig-expand"),this.floatingItem$.children($).hide().width(b).height(c),this.floatingItem$.find(".a-GV-expandCollapse").focus(),this.floatingItem$.find(Y).not(".js-last").attr("tabindex",-1)},_deactivateCell:function(b){var c,d,e,g,h=null;b.length<=0||(this._setFocusable(b[0]),this._nextCellWithWrap(b).attr("tabindex",-1),this._prevCellWithWrap(b).attr("tabindex",-1),this.tabTraps$.prop("tabIndex",-1),c=this._getColumnMetadata(b),c&&(h=this.columnItems[c.property]),h&&b.hasClass(ga)&&(f(document.body).off(".gridpopup"),this._setModelValue(b,h.item,this.activeItem,c.property),e=this.model.getRecordMetadata(this.activeItemId),g=null,e.fields&&(g=e.fields[c.property]),this.debugDontDeactivateCell?b.addClass(ba+" "+ga):(this.floatingItem$.insertAfter(this.element.find(v)),this.floatingItem$.hide(),this._deactivateColumnItem(h),d=a.htmlBuilder(),this._renderFieldDataValue(d,c,this.activeItem,e,g),b.html(d.toString())),this._updateRecordState(this.lastRow$.parent(),null,e)))},_setFocus:function(a){a.tabIndex=0,a.focus()},_setFocusable:function(a){var b,c,d,e=this.options.tabbableCellContent,g=j(a);this.lastFocused&&(f(this.lastFocused).removeAttr(qa),c=j(this.lastFocused),g[0]!==c[0]&&c.add(c.find(e).not(":disabled,.js-asc,.js-desc")).prop("tabIndex",-1)),d=g.find(e).not(":disabled,.js-asc,.js-desc").prop("tabIndex",0).length,d||g.prop("tabIndex",0),this.lastFocused=a,b=this._getColumnMetadata(g),b&&b.elementId&&f(a).attr(qa,b.elementId+"_HDR")},_getCellFocusable:function(a){var b=a.find(this.options.tabbableCellContent).not(":disabled,.js-asc,.js-desc");return b.length?b[0]:a[0]},_getPrevCellUp:function(a,b,c){var d,e=null,g=null;return(a.hasClass(U)||a.hasClass(H))&&(g=this.lastColIndex),null===g&&(g=n(a),this.lastColIndex=g),a.closest(B).prevAll(sa).each(function(a){var c=f(this);return!c.hasClass(E)&&(d=c,a<b-1)}),this.focusInHeader||c||d||(this.focusInHeader=!0,d=a.closest("tr").closest("table").parent().hasClass(w)?this.tableFrozenHeader$.children().last():this.tableHeader$.children().last()),d&&(e=d.hasClass(T)?d.children().first():m(d,g)),e},_getNextCellDown:function(a,b){var c,d=null,e=null;return(a.hasClass(U)||a.hasClass(H))&&(e=this.lastColIndex),null===e&&(e=n(a),this.lastColIndex=e),a.closest(B).nextAll(sa).each(function(a){var d=f(this);return!d.hasClass(E)&&(c=d,a<b-1)}),this.focusInHeader&&!c&&(this.focusInHeader=!1,c=a.closest("tr").closest("table").parent().hasClass(w)?this.tableFrozenData$.children().first():this.tableData$.children().first()),c&&(d=c.hasClass(T)?c.children().first():m(c,e)),d},_select:function(a,b,c,d,e){function g(a,b){var c;y.persistSelection&&(c=a.length,A.tableFrozenHeader$&&(c/=2),a.each(function(a){var d;return!(a>=c)&&(d=f(this).attr(Na),void(b&&u[d]===!1?delete u[d]:u[d]=b))}))}var i,j,k,l,m,n,o,p,q,r,s,t,u,w,x=!1,y=this.options,z="set",A=this,B=this.element.children(v).find(aa);if(y.persistSelection&&(u={}),a=a.filter(sa),n=a.parent("tr"),w=this.lastRow$.index(a.first())>=0,this.tableFrozenHeader$&&(s=[],n.each(function(){r=A._getOtherTable(f(this)),s.push(r.children()[h(f(this))])}),n=n.add(f(s))),b&&this.options.multiple&&("click"===b.type?b.ctrlKey||b.metaKey?z="toggle":b.shiftKey&&(z="range"):"keydown"===b.type&&(b.keyCode===Oa.SPACE?z=b.ctrlKey?"toggle":b.shiftKey?"range":"add":b.ctrlKey?z="none":b.shiftKey&&(z="range"))),"range"!==z||this.selectAnchor&&!this.focusInHeader||(z="set"),!this.focusInHeader&&("set"!==z&&"range"!==z||(y.rowHeaderCheckbox&&B.find(K).each(function(){this.checked=!1}),B.removeClass(_).removeAttr(la),y.persistSelection&&this.model.clearSelection()),i=n.hasClass(_),o=n.filter(".a-GV-row").not(".is-aggregate"),"set"===z||"add"===z||"toggle"===z&&!i?(o.addClass(_).attr(la,!0),this.selectAnchor=o[0],x=!0):"range"===z?(j=h(f(this.selectAnchor)),k=h(n.last()),j>k&&(l=k,k=j,j=l),s=[],this.tableData$.children().each(function(a){a>=j&&a<=k&&f(this).hasClass("a-GV-row")&&!f(this).hasClass("is-aggregate")&&s.push(this)}),this.tableFrozenData$&&this.tableFrozenData$.children().each(function(a){a>=j&&a<=k&&f(this).hasClass("a-GV-row")&&!f(this).hasClass("is-aggregate")&&s.push(this)}),o=f(s),o.addClass(_).attr(la,!0),x=!0):"toggle"===z&&i&&(o.removeClass(_).removeAttr(la),this.selectAnchor=o[0],y.rowHeaderCheckbox&&o.find(K).each(function(){this.checked=!1}),g(o,!1)),x&&(y.rowHeaderCheckbox&&o.find(K).each(function(){this.checked=!0}),g(o,!0)),y.rowHeaderCheckbox&&y.multiple&&(p=this.tableFrozenData$.children(".a-GV-row"),q=p.length===p.filter(aa).length,this.tableFrozenHeader$.find(K).first().each(function(){this.checked=q}).closest(Q).toggleClass(_,q)),y.persistSelection))for(t in u)u.hasOwnProperty(t)&&this.model.setSelectionState(t,u[t]);a.length>0&&(m=this._getCellFocusable(a.first()),c?this._setFocus(m):this._setFocusable(m),w||this._setCurrentRow(a[0])),this.focusInHeader||"toggle"!==z&&("range"!==z||i)&&("add"!==z||i)&&("set"!==z||B[0]===n[0]&&B.length===n.length)||(A.triggerTimerId&&(clearTimeout(A.triggerTimerId),
A.triggerTimerId=null),A.triggerTimerId=setTimeout(function(){A._updateStatus(),A.triggerTimerId=null,e||A.options.navigation&&"click"===b.type||A._trigger(xa,b)},d?350:1))},_getOtherTable:function(a){var b;return b=a.parents(v).length?a.closest("table").parent().hasClass(w)?this.tableData$:this.tableFrozenData$:a.closest("table").parent().hasClass(w)?this.tableHeader$:this.tableFrozenHeader$},_setCurrentRow:function(a){var b=f(a),c=b.closest("tr");this.tableFrozenHeader$&&(c=c.add(this._getOtherTable(c).children().eq(h(c)))),this.lastRow$=c.children()},_nextCellWithWrap:function(a){var b,c,d=a.next();return d.length||(b=a.closest("tr"),this.tableFrozenHeader$?(c=this._getOtherTable(b),d=b.closest("table").parent().hasClass(w)?c.children().eq(h(b)).children().first():c.children().eq(h(b)+1).children().first()):d=b.next().children().first()),d},_prevCellWithWrap:function(a){var b,c,d,e=a.prev();return e.length||(b=a.closest("tr"),this.tableFrozenHeader$?(c=this._getOtherTable(b),d=h(b),b.closest("table").parent().hasClass(w)?(d-=1,d>=0&&(e=c.children().eq(h(b)-1).children().last())):e=c.children().eq(d).children().last()):e=b.prev().children().last()),e},_clearHoverStates:function(){this.element.find(da).removeClass(ca),this.columnControls$.hide(),this.columnHandle$.hide()},_setRowHoverState:function(a){var b;this.element.find(da).removeClass(ca),a.addClass(ca),this.tableFrozenHeader$&&(b=this._getOtherTable(a),b.children().eq(h(a)).addClass(ca))},_sortChange:function(a,b,c){var d,e="set",f=this._getColumnMetadata(b);f.canSort&&(d=c===f.sortDirection,this.options.columnSortMultiple&&a.shiftKey?(e="add",e=d?"remove":f.sortDirection?"change":"add"):d&&(e="clear"),this._trigger(za,a,{header$:b,column:f,direction:c,action:e}))},_updateColumnControls:function(a){var b,c,e=!1,f=!1;"asc"===a.sortDirection?(b=d.getMessage("APEX.GV.SORT_OFF"),c=d.getMessage("APEX.GV.SORT_DESCENDING"),e=!0):"desc"===a.sortDirection?(b=d.getMessage("APEX.GV.SORT_ASCENDING"),c=d.getMessage("APEX.GV.SORT_OFF"),f=!0):(b=d.getMessage("APEX.GV.SORT_ASCENDING"),c=d.getMessage("APEX.GV.SORT_DESCENDING")),this.columnControls$.find(".js-asc").attr(Ka,b).attr(oa,b).toggleClass(ga,e),this.columnControls$.find(".js-desc").attr(Ka,c).attr(oa,c).toggleClass(ga,f)},_adjustSizeForScrollBars:function(b,c,d){var e=this.element.children(),f=e.filter(v).children("."+w),g=e.filter(t).children(".a-GV-w-hdr");this.tableData$.parent()[0].clientWidth>this.tableData$.parent().parent()[0].clientWidth&&(b-=a.getScrollbarSize().height),f.height(b),this.tableData$.parent()[0].clientHeight-d>this.tableData$.parent().parent()[0].clientHeight&&(c-=a.getScrollbarSize().width),g.width(c)},_headerScrollCheck:function(a,b,c){var d,e,g,h=0,i=this.hdrScrollParent;return i&&(g=f(this.hdrScrollParent).offset().left,this.element.hasClass(ra)?(a-b-g<Ia?h=-Ja:g+i.offsetWidth-a<Ia&&g+i.offsetWidth-a>0&&(h=Ja),c&&h&&(d=i.scrollLeft+h,d>0?(i.scrollLeft=0,h=0):d>i.scrollWidth-i.clientWidth?(i.scrollLeft=i.scrollWidth-i.clientWidth,h=0):i.scrollLeft=d)):(g+i.offsetWidth-(a+b)<Ia?h=Ja:a-g<Ia&&a-g>0&&(h=-Ja),c&&h&&(d=i.scrollLeft+h,d<0?(i.scrollLeft=0,h=0):d>i.scrollWidth-i.clientWidth?(i.scrollLeft=i.scrollWidth-i.clientWidth,h=0):i.scrollLeft=d)),e=!!h),e},_headerScrollStart:function(a,b,c){function d(){e.scrollTimerId=setTimeout(function(){e._headerScrollCheck(a,b,!0)?(c(),d()):e._headerScrollStop()},g[f]),f<g.length-1&&(f+=1)}var e=this,f=0,g=[151,134,119,106,95,86,79,74,71];this.scrollTimerId&&this._headerScrollStop(),d()},_headerScrollStop:function(){clearTimeout(this.scrollTimerId),this.scrollTimerId=null},_expandCollapseControlBreak:function(a,b){function c(a,c){var d=f(c);return!(!d.hasClass("a-GV-row")||d.hasClass("is-aggregate"))&&void d[b?"show":"hide"]()}var e,g,i,j;for(f.isArray(a)||(a=[a]),e=0;e<a.length;e++)g=a[e],g.hasClass(T)&&(2!==g.length&&this.tableFrozenHeader$&&(i=this._getOtherTable(g),g=f([g[0],i.children()[h(g)]])),g.first().nextAll().each(c),2===g.length&&g.last().nextAll().each(c),b?(j=d.getMessage("APEX.GV.BREAK_COLLAPSE"),g.addClass(fa).find(".js-toggleBreak").attr(pa,"true").attr(Ka,j).attr(oa,j).children(".a-Icon").removeClass("icon-right-arrow").addClass("icon-down-arrow")):(j=d.getMessage("APEX.GV.BREAK_EXPAND"),g.removeClass(fa).find(".js-toggleBreak").attr(pa,"false").attr(Ka,j).attr(oa,j).children(".a-Icon").removeClass("icon-down-arrow").addClass("icon-right-arrow")))},debugCellEdit:function(a){this.debugDontDeactivateCell=!!a}})}(apex.util,apex.model,apex.debug,apex.lang,apex.item,apex.jQuery);
!function(a,b,c,d,e,f,g,h){"use strict";function i(a,b){var c="";return"start"===a?c=" u-tS":"end"===a?c=" u-tE":"left"===a?c=" u-tL":"right"===a?c=" u-tR":"center"!==a||b||(c=" u-tC"),c}function j(a){var b=a.groupName||null;return b&&a.useGroupFor&&a.useGroupFor.indexOf("srv")<0&&(b=null),b}var k="a-RV",l="a-RV-toolbar",m="a-RV-w-scroll",n="."+m,o="a-RV-body",p="."+o,q="a-RV--excludeHidden",r="a-RV--excludeNull",s="u-Form",t="u-Form-groupHeading",u="u-Form-fieldContainer",v="."+u,w=v+".is-active",x="u-Form-labelContainer",y="u-Form-label",z="."+y,A="u-Form-inputContainer",B="."+A,C="a-RV-field--hidden",D="a-RV-field--null",E="is-focused",F="."+E,G="is-disabled",H="is-active",I="."+H,J="is-required",K="u-RTL",L="aria-labelledby",M=":tabbable",N="modeChange",O="recordChange",P=g.ui.keyCode,Q=[{align:"start",controls:[{type:"MENU",labelKey:"APEX.RV.SETTINGS_MENU",iconOnly:!0,icon:"icon-gear",menu:{items:[{type:"toggle",action:"exclude-null-values"},{type:"toggle",action:"exclude-hidden"}]}}]},{align:"end",controls:[{type:"STATIC",id:"status",label:""},{type:"BUTTON",iconOnly:!0,action:"previous-record"},{type:"STATIC",id:"recordNumber",label:""},{type:"BUTTON",iconOnly:!0,action:"next-record"}]}];g.widget("apex.recordView",g.apex.tableModelViewBase,{version:"5.1",widgetEventPrefix:"recordview",options:{idPrefix:null,hasSize:!1,actionsContext:null,recordOffset:0,recordParent:null,showNullAs:"-",fields:null,fieldGroups:null,editable:!1,alwaysEdit:!1,skipDeletedRecords:!1,toolbar:Q,showExcludeNullValues:!0,showExcludeHiddenFields:!0,formCssClasses:null,labelAlignment:"end",modeChange:null,recordChange:null},_create:function(){var a=this,b=this.options,c=this.element;c.addClass(k),this._tableModelViewInit(),delete this.firstPage,delete this.previousPage,delete this.nextPage,delete this.lastPage,delete this.loadMore,delete this.gotoPage,this.editMode=!1,this.fields=null,this.excludeNullValues=!1,this.excludeHiddenFields=!1,this.lastField=null,this.currentRecord=null,this.currentRecordId=null,b.actionsContext?this.actions=b.actionsContext:this.actions=f.createContext("recordView",c[0]),this.actions.add([{name:"exclude-null-values",labelKey:"APEX.RV.EXCLUDE_NULL",get:function(){return a.excludeNullValues},set:function(d){b.showExcludeNullValues&&(a.excludeNullValues=d,c.toggleClass(r,d))}},{name:"exclude-hidden",labelKey:"APEX.RV.EXCLUDE_HIDDEN",get:function(){return a.excludeHiddenFields},set:function(d){b.showExcludeHiddenFields&&(a.excludeHiddenFields=d,c.toggleClass(q,d))}},{name:"next-record",labelKey:"APEX.RV.NEXT_RECORD",shortcut:"Alt+Page Down",icon:"icon-next",action:function(){var c,d;if("tree"===a.modelShape){if(d=a._nextTreeRecord(),!d)return;b.recordParent=d.parent,b.recordOffset=d.offset}else{if(c=a.model.getTotalRecords(),!(c<0||b.recordOffset+1<c))return;b.recordOffset+=1}a.direction=1,a.refresh(!1)}},{name:"previous-record",labelKey:"APEX.RV.PREV_RECORD",shortcut:"Alt+Page Up",icon:"icon-prev",action:function(){var c;if("tree"===a.modelShape){if(c=a._previousTreeRecord(),!c)return;b.recordParent=c.parent,b.recordOffset=c.offset}else{if(!(b.recordOffset>0))return;b.recordOffset-=1}a.direction=-1,a.refresh(!1)}},{name:"insert-record",labelKey:"APEX.RV.INSERT",action:function(){if(b.editable)return a.model.insertNewRecord("tree"===a.modelShape?b.recordParent:null,a.getRecord()),a.actions.invoke("next-record"),a.editMode||a.setEditMode(!0),!0}},{name:"refresh-record",labelKey:"APEX.RV.REFRESH",action:function(){b.editable&&a.model.fetchRecords([a.getRecord()])}},{name:"revert-record",labelKey:"APEX.RV.REVERT",action:function(){b.editable&&a.model.revertRecords([a.getRecord()])}},{name:"delete-record",labelKey:"APEX.RV.DELETE",action:function(){b.editable&&a.model.deleteRecords([a.getRecord()])}},{name:"duplicate-record",labelKey:"APEX.RV.DUPLICATE",action:function(){if(b.editable){var c=a.getRecord();return a.model.copyRecords([c],null,c),a.actions.invoke("next-record"),a.editMode||a.setEditMode(!0),!0}}}]),this.actions[b.showExcludeNullValues?"show":"hide"]("exclude-null-values"),this.actions[b.showExcludeHiddenFields?"show":"hide"]("exclude-hidden"),this._initModel(b.modelName),this._on(this._eventHandlers),this.direction=1,this.refresh(),b.disabled&&this._setOption("disabled",b.disabled)},_eventHandlers:{resize:function(a){a.target===this.element[0]&&(this.resize(),a.stopPropagation())},dblclick:function(a){var b=this.options,c=g(a.target).closest(v);c.length&&!b.alwaysEdit&&b.editable&&!this.editMode&&(a.preventDefault(),this.setEditMode(!0))},click:function(a){var b,c=g(a.target).closest(z);c.length&&(b=c.closest(v),b.find(M).first().focus())},keydown:function(a){var b,c,d,e=this.options,f=a.which;if(!(g(a.target).closest(".a-GV-footer").length>0))if(f===P.ENTER){if(g(a.target).closest("a,button").length>0)return;b=g(a.target).closest(v),b.length&&!e.alwaysEdit&&e.editable&&!this.editMode&&(a.preventDefault(),this.setEditMode(!0))}else if(113===f)b=g(a.target).closest(v),b.length&&!e.alwaysEdit&&e.editable&&!this.editMode&&(a.preventDefault(),this.setEditMode(!0));else if(f===P.ESCAPE)!e.alwaysEdit&&e.editable&&this.editMode&&(this.setEditMode(!1),a.stopPropagation());else if(112===f&&a.altKey&&(b=g(a.target).closest(v),c=b.find(".js-itemHelp"),c.length&&(d=c.attr("data-itemhelp"))))return apex.theme.popupFieldHelp(d,$v("pInstance")),!1},focusin:function(a){function b(){e.deactivateDelayTimer&&(clearTimeout(e.deactivateDelayTimer),e.deactivateDelayTimer=null)}var c,d,e=this,f=g(a.target);return d=f.closest(v),0===d.length?void(this.lastField=null):(d.addClass(E),d[0]===this.lastField?void b():(this.lastField=d[0],void(this.editMode&&(b(),c=this.element.find(I),c.length&&this._deactivateField(c),this._activateField(d)))))},focusout:function(a){var b=this,c=g(a.target).closest(v);0!==c.length&&(c.removeClass(E),this.editMode&&(this.deactivateDelayTimer=setTimeout(function(){b.lastField=null,b._deactivateField(c),b.deactivateDelayTimer=null},10)))}},_destroy:function(){this.element.removeClass(k+" "+G+" "+K+" "+q+" "+r).empty(),this._initModel(null)},_setOption:function(a,b){"editable"===a&&!b&&this.editMode&&this.setEditMode(!1),this._super(a,b),"disabled"===a?(this.element.toggleClass(G,b),b&&this.resize()):"showExcludeNullValues"===a?this.actions[b?"show":"hide"]("exclude-null-values"):"showExcludeHiddenFields"===a?this.actions[b?"show":"hide"]("exclude-hidden"):"recordOffset"===a||"recordParent"===a?this.refresh():"modelName"===a?(this.editMode&&this.setEditMode(!1),this._initModel(b),this.refresh()):"editable"!==a&&"alwaysEdit"!==a&&"toolbar"!==a&&"formCssClasses"!==a&&"labelAlignment"!==a||this._refreshView()},getActions:function(){return this.actions},getToolbar:function(){return this.toolbar$},refresh:function(a){var b,c=this.options,d=this.element;b=d.find(w),b.length&&this._deactivateField(b),this.fields||this._initView(),!this.editMode&&c.alwaysEdit&&this.setEditMode(!0),this._updateRecord(),a&&this.focus()},focus:function(){this.lastField=null,this.element.find(p).find(M).first().focus()},gotoField:function(a,b){var d,e,f,g,h,i=this.options,j=null;if(e=this.model.getRecord(a),!e)return void c.warn("Warning record not found "+a);if(a!==this.currentRecordId&&(i.recordOffset=this.model.indexOf(e),this.refresh()),b)if(g=i.fields[0][b]){for(g.hidden&&g.canHide&&this.excludeHiddenFields&&this.actions.set("exclude-hidden",!1),h=this.model.getValue(e,b),null!==h&&""!==h||!this.excludeNullValues||this.actions.set("exclude-null-values",!1),d=0;d<this.fields.length;d++)if(f=this.fields[d],!(f.virtual||!f.canHide&&f.hidden)&&f.property===b){j=this.element.find("[data-idx='"+d+"']");break}d>=this.fields.length&&c.warn("Warning column is hidden "+b)}else c.warn("Warning column not found "+b);j?(this.lastField=null,j.find(M).first().focus()):this.focus()},refreshFields:function(){this.fields=null},fieldElement:function(a){return g("#"+this.mapFieldToLabelId[a]).closest(v)},inEditMode:function(){return this.editMode},setEditMode:function(a){var b,d,e,f=this;this.options.editable?(a=!!a,e=this.editMode,b=a!==this.editMode,this.editMode=a,this.element.toggleClass("a-RV--editMode",a),b&&(d=g(this.element).find(F),this._updateRecord(e),d.length&&(d.find(M).first().focus(),this.deactivateDelayTimer&&(clearTimeout(this.deactivateDelayTimer),this.deactivateDelayTimer=null),a?this._activateField(d):this._deactivateField(d)),a?this.element.find(p).on("change.rvedit",function(a){var b,c,d,e;if(f.currentRecord&&!g(a.target).closest(w).length)for(b=0;b<f.fields.length;b++)if(c=f.fields[b],c.elementId===a.target.id){e=c.property,d=f.columnItems[e],f.ignoreItemChange=!0,f.model.setValue(f.currentRecord,e,d.item.getValue()),f.ignoreItemChange=!1;break}}):this.element.find(p).off("change.rvedit"),this._trigger(N,null,{editMode:a}))):a&&c.warn("View is not editable.")},getRecord:function(){return this.currentRecord},getActiveRecordId:function(){return this.editMode?this.currentRecordId:null},getActiveRecord:function(){return this.editMode?this.currentRecord:null},resize:function(){var a,b=this.element,c=b.height();this.options.hasSize&&(a=c-b.children("."+l).outerHeight()||0,b.find(n).height(a))},expandGroup:function(a){},collapseGroup:function(a){},_initModel:function(b){function c(b,c){function g(a,g){var h,i;for(h=0;h<a.length;h++)i=a[h],i===f.currentRecordId&&("delete"===b?d&&e.skipDeletedRecords?(f.currentRecord=null,f.currentRecordId=null,f.actions.invoke("next-record"),null===f.currentRecord&&f.actions.invoke("previous-record")):f._updateRecord():"clearChanges"===b&&g?f.actions.invoke("next-record"):"refreshRecords"===b?(i=c.newIds[i]||i,f._updateRecord()):"revert"===b?f._updateRecord():f._updateRecordState())}var h,i,j,k,l,m;"refresh"===b?("tree"===f.modelShape?(f.recordOffset=-1,f.recordParent=null):f.recordOffset=0,f.refresh(!0)):"refreshRecords"===b?g(c.recordIds):"clearChanges"===b?(g(c.deletedIds,!0),g(c.changedIds)):c.recordIds?g(c.recordIds):"set"===b?f.ignoreFieldChange||(c.oldIdentity&&f._identityChanged(c.oldIdentity,f.model.getRecordId(c.record)),f.model.getRecordId(c.record)===f.currentRecordId&&(h=f.columnItems[c.field],f.editMode&&h?f.ignoreItemChange||f._setColumnItemValue(h.item,c.record,c.field):(k=f.fieldElement(c.field),k.length&&(j=f._getFieldMetadata(k),l=f.model.getRecordMetadata(f.currentRecordId),m=null,l.fields&&(m=l.fields[j.property]),i=a.htmlBuilder(),f._renderFieldDataValue(i,j,c.record,l,m),k.find(B).html(i.toString()))),f._updateRecordState())):"metaChange"===b&&(f.ignoreFieldChange||c.recordId!==f.currentRecordId||f._updateRecordState())}var d,e=this.options,f=this;this._super(b,c),b&&(d=this.model.getOption("onlyMarkForDelete"),this.modelShape=this.model.getOption("shape"),"record"===this.modelShape&&(this.actions.hide("next-record"),this.actions.hide("previous-record"),this.actions.hide("insert-record"),this.actions.hide("duplicate-record"),this.actions.hide("delete-record")))},_updateFields:function(){var a,b,c,d=this.options,e={},f=d.fields[0];this.fields=[];for(b in f)f.hasOwnProperty(b)&&(a=f[b],a.property=b,this.fields.push(a),c=j(a),c&&(!e[c]||a.seq<e[c])&&(e[c]=a.seq));this.fields.sort(function(a,b){var c,d;return j(a)===j(b)?a.seq-b.seq:j(a)?j(b)?(c=e[j(a)]||0,d=e[j(b)]||0,c-d):-1:1})},_initView:function(){var a=this.options,b=this.element,c=this.editMode;this._updateFields(),this.columnItems||this._initColumnItems(this.fields),this.toolbar$=null,c&&this.setEditMode(!1),this._renderView(),(c||a.alwaysEdit)&&this.setEditMode(!0),a.toolbar&&(this.toolbar$=b.children("."+l).toolbar({idPrefix:this._getIdPrefix()+"tb",actionsContext:this.actions,data:a.toolbar,small:!0}),"record"===this.modelShape&&this.toolbar$.toolbar("hideControl","recordNumber")),this.resize()},_refreshView:function(){this.refreshFields(),this.refresh()},_forEachField:function(a,b){var c,d,e,f,g,h=this.fields;for(a&&(f=this.element.find(B)),e=0,c=0;c<h.length;c++)d=h[c],d.virtual||!d.canHide&&d.hidden||(g=null,a&&(g=f.eq(e)),b.call(this,c,d,g),e+=1)},_getIdPrefix:function(){return(this.options.idPrefix||this.element[0].id||"rv")+"_"},_renderView:function(){function b(){k.markup("<div").attr("class",s+(h.formCssClasses?" "+h.formCssClasses:"")).markup(">"),e=!0}var c,e,f,h=this.options,k=a.htmlBuilder();h.toolbar&&k.markup("<div class='"+l+"'></div>"),this._renderAltDataMessages(k),k.markup("<div class='"+m+"'>").markup("<div class='"+o+"'>"),this.mapFieldToLabelId={},c=null,e=!1,this._forEachField(!1,function(a,g){var l,m,n,o,p,q,r;if(p=this._getIdPrefix()+a,this.mapFieldToLabelId[g.property]=p,f=j(g),c!==f){if(f){if(m=h.fieldGroups[f],!m)throw new Error("Unknown field group name: "+f);n=m.label||m.heading}else n=d.getMessage("APEX.RV.NOT_GROUPED_LABEL");e&&k.markup("</div>"),k.markup("<h3 class='"+t+"'><button type='button'>").content(n).markup("</button></h3>"),b(),c=f}e||b(),l=u,g.hidden&&(l+=" "+C),g.fieldCssClasses&&(l+=" "+g.fieldCssClasses),g.isRequired&&(l+=" "+J),o=g.label||g.heading,q=null,g.fieldColSpan&&(q=parseInt(g.fieldColSpan,10),q>0&&q<13?k.markup("<div class='apex-col apex-col-"+q+"'>"):q=null),k.markup("<div").optionalAttr("id",g.elementId?g.elementId+"_CONTAINER":null).attr("data-idx",a).attr("class",l).markup("><div").attr("id",p).attr("class",x+" "+i(h.labelAlignment)).markup(">"),k.markup("<span").optionalAttr("id",g.elementId?g.elementId+"_LABEL":null).attr("class",y).markup(">").content(o).markup("</span>"),g.helpid&&(r=d.formatMessage("APEX.ITEM.HELP_TEXT",o),k.markup("<button class='t-Button t-Button--noUI t-Button--helpButton js-itemHelp' tabindex='-1' type='button'").attr("data-itemhelp",g.helpid).attr("aria-label",r).attr("title",r).markup("><span class='a-Icon icon-help' aria-hidden='true'></span></button>")),k.markup("</div><div tabindex='0' class='"+A+"'").attr(L,g.elementId+"_LABEL").markup("></div></div>"),q&&k.markup("</div>")}),e&&k.markup("</div>"),k.markup("</div></div>"),this.element.html(k.toString()).find("."+t).each(function(){var a=g(this);a.collapsible({heading:"."+t,controllingElement:"button",universalTheme:!0,collapsed:!1,content:a.next()})}),this.noData$=this.element.find(".a-GV-noDataMsg")},_updateRecord:function(a){function b(){var a,b,c,d,e,g,h;for(e=f.model.getRecordMetadata(f.currentRecordId),a=0;a<f.fields.length;a++)b=f.fields[a].property,c=f.columnItems[b],c&&(h=c.item.isDisabled(),c.element$.is(":visible")&&!h?(d=c.item.getValidity(),d.valid||f.model.setValidity("error",f.currentRecordId,b,c.item.getValidationMessage())):f.model.setValidity("valid",f.currentRecordId,b),e&&(g=e.fields?e.fields[b]:null,(g&&g.hasOwnProperty("disabled")||h)&&(g||(e.fields||(e.fields={}),g={},e.fields[b]=g),g.disabled=h)));f._triggerEndEditing(f.currentRecord,f.currentRecordId)}function c(c,d,i){var j,k,l;if(c){if(j=f.model.getRecordMetadata(i)||{},f.element.find(n).show(),f.noData$.hide(),j.agg||j.deleted&&h.skipDeletedRecords)return"tree"===f.modelShape?(k=f[f.direction>0?"_nextTreeRecord":"_previousTreeRecord"](),k&&(h.recordParent=k.parent,h.recordOffset=k.offset)):(h.recordOffset+=f.direction,l=f.model.getTotalRecords(),h.recordOffset<0?(h.recordOffset=0,f.direction=-f.direction):l>=0&&h.recordOffset>=l&&(h.recordOffset=l-1,f.direction=-f.direction)),void f._updateRecord();h.editable&&f.currentRecord&&(f.editMode&&a!==!1||a===!0)&&b(),h.recordOffset=d,f.currentRecordId=i,f.currentRecord=null,f._renderRecordFields(c,d,i,j),f.currentRecord=c,e=f.element.find(p),e.children(".t-Alert").remove(),e.find(".t-Form-error").remove(),f._updateRecordState(),f._updateRecordNumber(),h.editable&&f.editMode&&f._triggerBeginEditing(f.currentRecord,f.currentRecordId),null!==g&&g===f.currentRecordId||f._trigger(O,null,{recordOffset:h.recordOffset,recordId:f.currentRecordId})}else h.editable&&f.currentRecord&&(f.editMode&&a!==!1||a===!0)&&b(),f.currentRecordId=null,f.currentRecord=null,f._renderRecordFields(null,-1,null,{}),f.element.find(n).hide(),f.noData$.show(),f._updateActions(),f._updateRecordNumber()}var d,e,f=this,g=this.currentRecordId,h=this.options;switch(this.modelShape){case"record":d=this.model.getRecord(),c(d,0,d?this.model.getRecordId(d):null);break;case"table":this.model.forEachInPage(h.recordOffset,1,function(a,b,d){c(a,b,d)},this);break;case"tree":null===h.recordParent?(d=this.model.root(),h.recordOffset=-1,c(d,h.recordOffset,d?this.model.getRecordId(d):null)):(d=this.model.child(h.recordParent,h.recordOffset),c(d,h.recordOffset,d?this.model.getRecordId(d):null))}},_renderRecordFields:function(b,c,d,e){var f=null,g=!1,h=a.htmlBuilder(),i=this.columnItemsContainer$[0];this.editMode&&b&&(g=this.model.allowEdit(b)),this._forEachField(!0,function(a,c,d){var j,k,l,m=!1;j=u,b&&(k=this.model.getValue(b,c.property),null!==k&&""!==k||(j+=" "+D),c.hidden&&(j+=" "+C),c.fieldCssClasses&&(j+=" "+c.fieldCssClasses),c.isRequired&&(j+=" "+J),e.fields&&(f=e.fields[c.property]),f&&(f.disabled&&(j+=" is-disabled"),(f.ck||c.readonly)&&(j+=" is-readonly",m=!0))),l=this.columnItems[c.property],g&&l&&!m&&!c["volatile"]?l.element$.parent()[0]===i&&(d.empty().append(l.element$).attr("tabindex",-1).removeAttr(L),this._activateColumnItem(l,c.elementId+"_LABEL")):(l&&l.element$.parent()[0]!==i&&(this._deactivateColumnItem(l),d.attr("tabindex",0).attr(L,c.elementId+"_LABEL")),b?(h.clear(),this._renderFieldDataValue(h,c,b,e,f),d.html(h.toString())):d.empty()),d.parent().attr("class",j)}),g&&b&&(this._beginSetColumnItems(),this._forEachField(!0,function(a,c,d){var f=this.columnItems[c.property];!f||d.hasClass("is-readonly")||c["volatile"]||this._setColumnItemValue(f.item,b,c.property,g?e:null)}),this._endSetColumnItems())},_updateRecordState:function(){var a,b,c,e,f,h="",i=this.element.find(p);if(b=this.model.getRecordMetadata(this.currentRecordId)||{},i.removeClass("is-deleted is-inserted is-updated is-error is-warning is-readonly"),b.deleted?(i.addClass("is-deleted"),h=d.getMessage("APEX.GV.ROW_DELETED")):b.inserted?(i.addClass("is-inserted"),h=d.getMessage("APEX.GV.ROW_ADDED")):b.updated&&(i.addClass("is-updated"),h=d.getMessage("APEX.GV.ROW_CHANGED")),this.model.allowEdit(this.currentRecord)||i.addClass("is-readonly"),b.error||b.warning?(c=i.children(".t-Alert"),c.length||(c=g("<div class='t-Alert'></div>"),i.prepend(c)),c.text(b.message),b.error?i.addClass("is-error"):i.addClass("is-warning")):i.children(".t-Alert").remove(),b.fields)for(a in b.fields)b.fields.hasOwnProperty(a)&&(e=b.fields[a],f=this.fieldElement(a),f.removeClass("is-error is-warning is-changed is-readonly"),e.error||e.warning?(c=f.find(".t-Form-error"),c.length||(c=g("<span class='t-Form-error'></span>"),f.find(B).append(c)),c.text(e.message),e.error?f.addClass("is-error"):f.addClass("is-warning")):(f.find(".t-Form-error").remove(),e.changed&&f.addClass("is-changed")),e.ck&&f.addClass("is-readonly"));this._updateActions(),this.toolbar$&&this.toolbar$.toolbar("findElement","status").text(h)},_hasPrevious:function(){var a=this.options;switch(this.modelShape){case"record":return!1;case"table":return a.recordOffset>0;case"tree":return null!==this._previousTreeRecord()}},_hasNext:function(){var a,b=this.options;switch(this.modelShape){case"record":return!1;case"table":return a=this.model.getTotalRecords(),a<0||b.recordOffset+1<a;case"tree":return null!==this._nextTreeRecord()}},_nextTreeRecord:function(){var a,b,c=this.options,d=c.recordOffset,e=c.recordParent;if(b=null===e?this.model.root():this.model.child(e,d),this.model.childCount(b)>0)return{parent:b,offset:0};for(;e;){if(a=this.model.childCount(e),a>0&&d+1<a)return{parent:e,offset:d+1};d=this.model.indexOf(e),e=this.model.parent(e)}return null},_previousTreeRecord:function(){function a(c){var d=c,e=b.model.childCount(d);return e>0?a(b.model.child(d,e-1)):{parent:b.model.parent(d),offset:b.model.indexOf(d)}}var b=this,c=this.options,d=c.recordOffset,e=c.recordParent;return null===e?null:e&&d>0?a(this.model.child(e,d-1)):{parent:this.model.parent(e),offset:this.model.indexOf(e)}},_updateActions:function(){var a=this.options,b=a.editable&&this.currentRecord&&this.model.allowAdd("tree"===this.modelShape?a.recordParent:null,"new"),c=a.editable&&this.currentRecord;this.actions[c&&this.model.canRevertRecord(this.currentRecord)?"enable":"disable"]("revert-record"),this.actions[c&&this.model.allowDelete(this.currentRecord)?"enable":"disable"]("delete-record"),this.actions[b?"enable":"disable"]("insert-record"),this.actions[b?"enable":"disable"]("duplicate-record"),this.actions[this.currentRecord&&this._hasNext()?"enable":"disable"]("next-record"),this.actions[this.currentRecord&&this._hasPrevious()?"enable":"disable"]("previous-record")},_getFieldMetadata:function(a){var b=parseInt(a.attr("data-idx"),10);return isNaN(b)?null:this.fields[b]},_activateField:function(a){var b,c;a.length<=0||null===this.currentRecord||(b=this._getFieldMetadata(a),b&&(c=this.columnItems[b.property]),c&&this.model.allowEdit(this.currentRecord)&&!a.hasClass("is-readonly")&&a.addClass(H))},_deactivateField:function(a){var b,c=null;a.length<=0||null===this.currentRecord||(b=this._getFieldMetadata(a),b&&(c=this.columnItems[b.property]),c&&!a.hasClass("is-readonly")&&a.hasClass(H)&&(this._setModelValue(a,c.item,this.currentRecord,b.property),this._updateRecordState()))},_updateRecordNumber:function(){var a,b,c="",e=this.options;this.toolbar$&&(this.currentRecord&&("tree"===this.modelShape?(b=this.model.parent(this.currentRecord),b&&(a=this.model.childCount(b))):a=this.model.getTotalRecords(),c=a>0?d.formatMessage("APEX.RV.REC_XY",e.recordOffset+1,a):d.formatMessage("APEX.RV.REC_X",e.recordOffset+1)),this.toolbar$.toolbar("findElement","recordNumber").text(c))},_identityChanged:function(a,b){a===this.currentRecordId&&(this.currentRecordId=b)}}),g.apex.recordView.copyDefaultToolbar=function(){var a,b=[];for(a=0;a<Q.length;a++)b.push(g.extend(!0,{},Q[a]));return b},g.apex.recordView.createModelEditDialog=function(b,c){function e(a){t&&(m&&t.expand(t.getSelection().first()),setTimeout(function(){t[m?"setSelectedNodes":"setSelectedRecords"]([a])},1))}var h,i,j,k,l,m,n,o,p,q,r,s,t,u=g,w=[],x=u("#"+b),y=a.htmlBuilder();c.appendToTop&&(u=a.getTopApex().jQuery),r=u("body").context,x.length||(x=u("<div id='"+b+"'></div>"),u(c.appendTo||"body").append(x)),"tree"===(c.modelOptions.shape||"table")?i=g.apex.treeView.makeModelNodeAdapter(c.modelName,c.modelOptions,null):("record"===(c.modelOptions.shape||"table")&&(w=null),i=apex.model.create(c.modelName,c.modelOptions,w,0,!1)),p=i.getOption("shape"),q=i.getOption("fields"),s=!!i.getOption("sequenceField"),y.markup("<form novalidate><section class='a-IGDialog-region a-IGDialog-body'>"),"record"!==p&&y.markup("<aside class='a-IGDialog-side resize'><div class='nav resize'></div><div class='tb'></div></aside>"),y.markup("<main class='a-IGDialog-main resize'><div class='rv resize'></div></main></section></form>"),h=g.extend({closeText:d.getMessage("APEX.DIALOG.CLOSE")},c,{autoOpen:!1,modal:!0,buttons:[{text:d.getMessage("APEX.DIALOG.CANCEL"),click:function(){l.recordView("setEditMode",!1),u(this).dialog("close")}},{text:d.getMessage("APEX.DIALOG.SAVE"),"class":"ui-button--hot",click:function(){var a="",b=!0;l.recordView("setEditMode",!1),c.validate&&(b=c.validate.call(this,i),"string"==typeof b&&(a=b+"\n\n",b=!1)),b&&!i.hasErrors()?(c.store&&c.store.call(this,i),u(this).dialog("close")):(l.recordView("refresh"),a+=apex.lang.getMessage("APEX.CORRECT_ERRORS"),apex.message.alert(a,function(){var a=l.find(".is-error");a.length||(a=l.find(v).first()),a.find(M).focus()}))}}],create:function(){var a,d,o,v,w=f.createContext("ModelEditDialog",x[0]);if(u(this).closest(".ui-dialog").css("position","fixed"),l=g("#"+b,r).find(".rv"),l.recordView({modelName:c.modelName,idPrefix:c.idPrefix||c.modelName,fields:[q],actionsContext:w,toolbar:null,editable:!0,alwaysEdit:!0,hasSize:!0,skipDeletedRecords:!0,formCssClasses:c.formCssClasses,labelAlignment:c.labelAlignment,recordChange:function(b,c){var d;"nav"!==a&&(d=l.recordView("getRecord"),d&&(a="rv",e(d),a=null))}}),"record"!==p&&(n=g("#"+b,r).find(".tb"),w.add([{name:"move-up",labelKey:"move up",hide:!0,action:function(){var a,b=null,c=j.grid("getSelection"),d=j.grid("getSelectedRecords");c[0].prev().length&&(a=c[0].prev().prev(),a.length&&(b=j.grid("getRecords",[a])[0]),i.moveRecords(d,null,b),j.grid("setSelectedRecords",d))}},{name:"move-down",labelKey:"move down",hide:!0,action:function(){var a,b=null,c=j.grid("getSelection"),d=j.grid("getSelectedRecords");a=c[c.length-1].next(),a.length&&(b=j.grid("getRecords",[a])[0],i.moveRecords(d,null,b),j.grid("setSelectedRecords",d))}}]),d=[{type:"BUTTON",iconOnly:!0,icon:"icon-plus",action:"insert-record"},{type:"BUTTON",iconOnly:!0,icon:"icon-copy",action:"duplicate-record"},{type:"BUTTON",iconOnly:!0,icon:"icon-minus",action:"delete-record"},{type:"BUTTON",iconOnly:!0,icon:"icon-up-chevron",action:"move-up"},{type:"BUTTON",iconOnly:!0,icon:"icon-down-chevron",action:"move-down"}],w[c.includeCopy?"show":"hide"]("duplicate-record"),w[s?"show":"hide"]("move-up"),w[s?"show":"hide"]("move-down"),n.toolbar({actionsContext:w,data:[{align:"start",controls:d}]})),"table"===p)if(c.useList){if(k=g("#"+b,r).find(".nav"),v=c.recordTemplate,!v){if(!c.labelColumn)throw new Error("Option recordTemplate or labelColumn is required");v="<li data-id='&APEX$ROW_ID.' class='&APEX$ROW_STATE_CLASSES.'>",c.iconClassColumn&&(v+="<span class='a-IconList-icon'><span class='&"+c.iconClassColumn+".'></span></span>"),c.enabledCheckbox&&(v+="<span class='ro-checkbox &\"enabledClass\".'></span><span class='u-vh'>&\"enabledText\".</span>"),v+="<span class='a-IconList-label'>&"+c.labelColumn+".</span></li>"}k.tableModelView({modelName:c.modelName,columns:[q],hasSize:!0,footer:!1,pagination:{scroll:!0},useIconList:!0,recordTemplate:v,collectionClasses:c.collectionClasses||"a-RVDialog-list",selectionChange:function(){var b,c;"rv"!==a&&(c=k.tableModelView("getSelectedRecords")[0],c&&(a="nav",b=i.indexOf(c),l.recordView("option","recordOffset",b),a=null))}}),t=k.data("apex-tableModelView")}else j=g("#"+b,r).find(".nav"),j.grid({modelName:c.modelName,columns:[q],editable:!1,hasSize:!0,footer:!1,pagination:{scroll:!0},reorderColumns:!1,columnSort:!1,hideDeletedRows:!0,selectionChange:function(){var b,c;"rv"!==a&&(c=j.grid("getSelectedRecords")[0],c&&(a="nav",b=i.indexOf(c),l.recordView("option","recordOffset",b),a=null))}}),t=j.data("apex-grid");else"tree"===p&&(g("#"+b,r).find(".nav").addClass("a-RVDialog-scroll").html("<div class='a-RVDialog-tree'></div>"),m=g("#"+b,r).find(".a-RVDialog-tree"),o={showRoot:!0,collapsibleRoot:!0,expandRoot:!0,getNodeAdapter:function(){return i},selectionChange:function(){var b,c,d;"rv"!==a&&(c=m.treeView("getSelectedNodes")[0],c&&(d=i.parent(c),a="nav",d!==l.recordView("option","recordParent")&&l.recordView("option","recordParent",d),b=i.indexOf(c),l.recordView("option","recordOffset",b),a=null))}},m.treeView(o),g.apex.treeView.treeModelListener(c.modelName,m),t=m.data("apex-treeView"));c.init&&h.init.call(this,i,j||k||m||null,l,n)},open:function(){var a,b=null;n&&n.toolbar("refresh"),h.resize(),j&&j.grid("refreshColumns"),c.load&&(b=c.load.call(this,i)),"record"!==p&&(a=b?i.getRecord(b):l.recordView("getRecord"),a&&e(a)),setTimeout(function(){l.recordView("focus")},100)},close:function(){"table"===p?i.setData([],0):i.setData(null)},resize:function(){var b=x.width(),c=x.height();o?x.find("section").height(c).width(b).resize():(x.find("section,main,aside").height(c),b-=x.find("aside").outerWidth()||0,x.find("main").width(b),l.width(b),l.height(c).recordView("resize"),b=x.find("aside").width(),c-=x.find(".tb").outerHeight(),j?j.width(b).height(c).grid("resize"):m&&m.width(b).height(c),a.setOuterWidth(x.find(".tb"),b))}}),h.dialogHelp&&h.buttons.unshift({text:d.getMessage("APEX.DIALOG.HELP"),"class":"ui-button-help",click:function(){function a(){var a={title:c.title,helpText:c.helpText};c.titleKey&&(a.title=d.getMessage(c.titleKey)),c.helpTextKey&&(a.helpText=d.getMessage(c.helpTextKey)),apex.theme.popupFieldHelp(a)}var b,c=h.dialogHelp;c.titleKey||c.helpTextKey?(b=[],c.titleKey&&!d.hasMessage(c.titleKey)&&b.push(c.titleKey),c.helpTextKey&&!d.hasMessage(c.helpTextKey)&&b.push(c.helpTextKey),b.length>0?d.loadMessages(b).done(function(){a()}):a()):a()}}),h.titleKey&&(h.title=d.getMessage(h.titleKey),delete h.titleKey),x.html(y.toString()).dialog(h).on("dialogopen",function(){apex.navigation.beginFreezeScroll()}).on("dialogresize",function(){u(this).closest(".ui-dialog").css("position","fixed")}).on("dialogclose",function(){apex.navigation.endFreezeScroll()}),c.useSplitter&&"record"!==p&&g.apex.splitter&&(o=x.find(".a-IGDialog-body").splitter({position:200,collapsed:!1,minSize:140,orientation:"horizontal",positionedFrom:"begin",noCollapse:!0}),x.on("resize",function(b){var c,d,e,f,h=g(b.target);c=h.height(),d=h.width(),e=h.children(".resize").filter(":visible"),e.length>0&&(h.children(":not(.resize)").filter(":visible").each(function(){f=g(this).css("position"),"fixed"!==f&&"absolute"!==f&&(c-=g(this).outerHeight(!0))}),c=Math.floor(c/e.length),e.each(function(){var b=g(this);a.setOuterHeight(b,c),a.setOuterWidth(b,d),b.filter(":visible").trigger("resize")})),b.stopPropagation()}));var z=x.data("ui-dialog"),A=z._destroy;return z._destroy=function(){A.call(z),apex.model.destroy(c.modelName)},x}}(apex.util,apex.model,apex.debug,apex.lang,apex.item,apex.actions,apex.jQuery);
!function(a,b,c,d,e,f,g,h){"use strict";function i(a){return new Date(parseInt(a.substr(0,4),10),parseInt(a.substr(4,2),10)-1,parseInt(a.substr(6,2),10),parseInt(a.substr(8,2),10),parseInt(a.substr(10,2),10),parseInt(a.substr(12,2),10))}function j(a){return("000"+a.getFullYear()).substr(-4)+("0"+(a.getMonth()+1)).substr(-2)+("0"+a.getDate()).substr(-2)+("0"+a.getHours()).substr(-2)+("0"+a.getMinutes()).substr(-2)+("0"+a.getSeconds()).substr(-2)}function k(a,b,c){a.splice(c,0,a.splice(b,1)[0])}function l(a){var b,c,d=[];for(b=0;b<a.length;b++)c=a[b].replace(/^\s+|\s+$/gm,""),""!==c&&d.indexOf(c)===-1&&d.push(c);return d}function m(a){var b=a;switch(a){case Vb:b="group-by";break;case Wb:b="saved-report";break;case Xb:b="inactive-settings";break;case Yb:b="invalid-settings";break;case ic:b="control-break";break;case kc:b="save-report";break;case jc:b="save-report"}return b}function n(a,b,c,d,e,f){var g;for(f||b.push({value:e,label:f}),g=0;g<a.length;g++)b.push({value:a[g][c],label:a[g][d]})}function o(b,c){var d;if(!a.isEmptyObject(c))for(d in c)c.hasOwnProperty(d)&&b.attr("data-"+d,c[d])}function p(b,c){var d,e=a.extend({id:"",type:"text",value:"",maxChars:"",title:"",ariaDescribedBy:"",name:"",size:"",placeholder:"",readonly:!1,checked:!1,disabled:!1,required:!1,cssClasses:[],data:{},attributes:{}},c),f=e.cssClasses,g=e.attributes;if(b.markup("<input").attr("id",e.id).attr("type",e.type).attr("value",e.value).optionalAttr("maxlength",e.maxChars).optionalAttr("title",e.title).optionalAttr(ub,e.ariaDescribedBy).optionalAttr("name",e.name).optionalAttr("size",e.size).optionalAttr("placeholder",e.placeholder).optionalBoolAttr("readonly",e.readonly).optionalBoolAttr("checked",e.checked).optionalBoolAttr(Qb,e.disabled).optionalBoolAttr(Pb,e.required),f.length>0&&b.attr("class",a.isArray(f)?f.join(" "):f),o(b,e.data),!a.isEmptyObject(g))for(d in g)g.hasOwnProperty(d)&&b.attr(d,g[d]);b.markup(" />")}function q(b,c){var d=a.extend({cssClasses:Pa,maxChars:"4000"},c);p(b,d)}function r(b,c){var d,e,f=a.extend({id:"",iconOnly:!1,cssClasses:"",options:[]},c);for(b.markup("<fieldset ").attr("class",U).attr("id",f.id+"_fieldset").markup(">"),b.markup("<ul ").attr("class",U+" "+f.cssClasses).attr("id",f.id+"_list").markup(">"),d=0;d<f.options.length;d++)e=f.options[d],b.markup("<li").attr("data-value",e.value).attr("class",V+(e.isSelected?" "+ib:"")).markup(">").markup("<span ").attr("class",W).attr(vb,e.label?e.label:e.value).attr("title",e.label?e.label:e.value).markup(">").markup("<span ").attr("class",X+" "+ab+" "+e.iconCssClasses).attr(tb,!0).markup("></span>"),f.iconOnly===!1&&b.markup("<span ").attr("class",Y).markup(">").content(e.label?e.label:e.value).markup("</span>"),b.markup("</span>").markup("</li>");b.markup("</ul>"),b.markup("<input ").attr("type","hidden").attr(tb,!0).attr("id",f.id).markup(">"),b.markup("</fieldset>")}function s(b,c){function d(b){var d=a("#"+b+"_list");d.iconList({multiple:!1,selectionChange:function(c){a("#"+b).val(a(this).iconList("getSelectionValues")).change()}}),d.iconList("setSelection",d.find('li[data-value="'+apex.util.escapeHTMLAttr(c)+'"]'),!1),a("#"+b).change(function(){d.iconList("setSelection",d.find('li[data-value="'+apex.util.escapeHTMLAttr(a("#"+b).val())+'"]'),!1)})}a.isFunction(apex.widget.iconList)?d(b):a.when(a.getScript(apex_img_dir+"libraries/apex/"+(0===apex.debug.getLevel()?"minified/widget.iconList.min.js":"widget.iconList.js")),a.Deferred(function(b){a(b.resolve)})).done(function(){d(b)})}function t(b,c){b.markup("<fieldset ").attr("class","color_picker").attr("id",c.id+"_fieldset").markup(">"),b.markup("<span ").attr("class",Ta).attr("style","height: 24px").markup(">"),q(b,a.extend({cssClasses:"color_picker "},c)),x(b,{id:c.id+"_PICKER",buttonClass:Ya+" "+Za+" "+mb,label:e.formatMessage("APEX.IG.OPEN_COLORPICKER",c.itemLabel),icon:"icon-color-picker",iconOnly:!0,attributes:{"aria-haspopup":!0,"aria-expanded":!1}}),c.colorMenuId&&x(b,{id:c.id+"_COLORS",buttonClass:Ya+" "+Za+" "+mb,label:e.getMessage("APEX.IG.COLORS"),attributes:{"data-menu":c.colorMenuId,"aria-haspopup":!0,"aria-expanded":!1}}),b.markup("</span>"),b.markup("</fieldset>")}function u(b,c){p(b,a.extend({type:"checkbox"},c))}function v(b,c){var d=a.extend({id:"",cssClasses:Ra,cols:"30",rows:"4",name:"",placeholder:"",disabled:!1,readonly:!1,required:!1,toolbar:!1,style:"resize: both;",wrap:"virtual"},c);d.toolbar&&(b.markup("<fieldset ").attr("id",c.id+"_fieldset").markup(">"),b.markup("<div").attr("id",d.id+"_toolbar").markup("></div>")),b.markup("<textarea").attr("id",d.id).attr("class",d.cssClasses).attr("cols",d.cols).attr("rows",d.rows).optionalAttr("name",d.name).optionalAttr("placeholder",d.placeholder).optionalAttr("style",d.style).optionalAttr("wrap",d.wrap).optionalBoolAttr(Qb,d.disabled).optionalBoolAttr("readonly",d.readonly).optionalBoolAttr(Pb,d.required).markup(">").markup("</textarea>"),d.toolbar&&b.markup("</fieldset>")}function w(b,c){var d=a.extend({cssClasses:"",text:"",data:{}},c);b.markup("<a href='#'").attr("class",d.cssClasses),o(b,d.data),b.markup(">").content(d.text).markup("</a>")}function x(b,c){var d,e,f,g,h=a.extend({id:"",buttonClass:"",label:"",icon:"",iconOnly:!1,iconPosition:yb,tabindex:"",attributes:{},data:{}},c);if(d=Va+(c.buttonClass?" "+c.buttonClass:""),e=ab+(c.icon?" "+c.icon:""),f=c.icon&&!c.iconOnly,b.markup("<button type='button'").optionalAttr("id",h.id).optionalAttr("tabindex",h.tabindex).attr("class",d),c.iconOnly&&h.label&&b.attr("title",h.label).attr(vb,h.label),!a.isEmptyObject(h.attributes))for(g in h.attributes)h.attributes.hasOwnProperty(g)&&b.attr(g,h.attributes[g]);o(b,h.data),b.markup(">"),f&&h.iconPosition===xb&&b.markup("<span").attr(tb,!0).attr("class",e+" "+bb).markup("></span>"),c.iconOnly?b.markup("<span").attr(tb,!0).attr("class",e).markup("></span>"):h.label&&b.markup("<span").attr("class",Xa).markup(">").content(h.label).markup("</span>"),f&&h.iconPosition===yb&&b.markup("<span").attr(tb,!0).attr("class",e+" "+cb).markup("></span>"),b.markup("</button>")}function y(b,c){var d,e=a.extend({cssClasses:Oa,labelFor:"",label:"",labelHidden:!1,labelTextHidden:!1},c);d=e.cssClasses,e.labelHidden&&(d+=" "+ob),b.markup("<label").attr("class",d).attr("for",e.labelFor).markup(">"),e.labelTextHidden?b.markup("<span").attr("class",ob).markup(">").content(e.label).markup("</span>"):b.content(e.label),b.markup("</label>")}function z(b,c){p(b,a.extend({type:"radio"},c))}function A(b,c){var d,e,f,g=a.extend({id:"",label:"",name:"",radios:[]},c);for(b.markup("<div role='group'").attr("id",g.id).attr(wb,"id1").markup(">"),d=0;d<g.radios.length;d++)e=g.radios[d],f=g.id+"_"+d,z(b,{name:g.name,id:f,value:e.value,checked:e.checked,cssClasses:S}),y(b,{labelFor:f,cssClasses:T,label:e.label});b.markup("</div>")}function B(b,c){var d,e,f=a.extend({id:"",cssClasses:Qa,size:"1",title:"",required:!1,options:[]},c);for(b.markup("<select").optionalAttr("id",f.id).attr("class",f.cssClasses).attr("size",f.size).optionalAttr("title",f.title).optionalBoolAttr(Pb,f.required).markup(">"),d=0;d<f.options.length;d++)e=f.options[d],b.markup("<option").attr("value",e.value).optionalBoolAttr("selected",e.isSelected).markup(">").content(e.label?e.label:e.value).markup("</option>");b.markup("</select>")}function C(b){var c;for(a.isArray(b)||(b=[b]),c=0;c<b.length;c++)apex.item(b[c][0]).show()}function D(b){var c;for(a.isArray(b)||(b=[b]),c=0;c<b.length;c++)apex.item(b[c][0]).hide()}function E(a,b){a.closest(Na).find("."+Oa).text(e.getMessage(b))}function F(b,c){var d,e;for(a.isArray(b)||(b=[b]),d=0;d<b.length;d++)e=b[d],e.prop(Pb,c).closest(Na).toggleClass("is-required",c)}function G(a){be.push(a)}var H="a-IG",I="."+H,J=H+"-header",K="."+J,L=H+"--noToolbar",M=H+"-body",N="."+M,O=H+"-content",P=O+"Container",Q="."+P,R="a-IGDialog",S=R+"-input-checkbox",T=R+"-label-checkbox",U=R+"-iconList",V=U+"-item",W=U+"-link",X=U+"-icon",Y=U+"-label",Z=H+"-controls",$=Z+"-item",_=$+"--",aa=Z+"-cell",ba=aa+"--label",ca=aa+"--remove",da=Z+"Checkbox",ea=da+"Label",fa=Z+"Icon",ga=Z+"Label",ha=Z+"Container",ia="."+ha,ja="a-IG-reportSummary",ka=ja+"Container",la=ja+"-item",ma=ja+"-item--",na=ja+"-label",oa=ja+"-icon",pa=ja+"-count",qa=ja+"-value",ra=H+"-button",sa=ra+"--controls",ta=ra+"--remove",ua="icon-ig-",va=H+"-gridView",wa=H+"-iconView",xa=H+"-detailView",ya=H+"-chartView",za=H+"-recordView",Aa="a-IRR-sortWidget",Ba=Aa+"-actions",Ca=Ba+"-item",Da=Aa+"-button",Ea=Aa+"-search",Fa=Aa+"-searchLabel",Ga=Aa+"-searchField",Ha=Aa+"-rows",Ia=Aa+"-row",Ja="u-Form",Ka=Ja+"--labelsAbove",La=Ja+"--stretchInputs",Ma=Ja+"-fieldContainer",Na="."+Ma,Oa=Ja+"-label",Pa="text_field",Qa="selectlist",Ra="textarea",Sa="a-Combobox",Ta="a-Combobox-wrapper",Ua="hasDatepicker",Va="a-Button",Wa=Va+"--noUI",Xa=Va+"-label",Ya=Va+"--noLabel",Za=Va+"--withIcon",$a=Va+"--calendar",_a=Va+"--iconTextButton",ab="a-Icon",bb=ab+"--left",cb=ab+"--right",db="icon-remove",eb="a-MediaBlock",fb=eb+"-graphic",gb=eb+"-content",hb="is-active",ib="is-selected",jb="is-checked",kb="is-error",lb="js-colCheckbox",mb="js-menuButton",nb="."+lb,ob="u-VisuallyHidden",pb="u-textLower",qb="u-textUpper",rb="has-button",sb="aria-expanded",tb="aria-hidden",ub="aria-describedby",vb="aria-label",wb="aria-labelledby",xb="left",yb="right",zb="text",Ab="select",Bb="colorpicker",Cb="textarea",Db="checkbox",Eb="radios",Fb="iconList",Gb="row",Hb="column",Ib="complex",Jb="start",Kb="center",Lb="show",Mb="expand",Nb="expanded",Ob="collapsed",Pb="required",Qb="disabled",Rb="grid",Sb="icon",Tb="detail",Ub="chart",Vb="groupby",Wb="savedReport",Xb="inactiveSettings",Yb="invalidSettings",Zb="primary",$b="alternative",_b="private",ac="public",bc="named",cc="columns",dc="filter",ec="highlight",fc="flashback",gc="sort",hc="aggregate",ic="controlBreak",jc="editReport",kc="saveAsReport",lc="download",mc="subscription",nc="asc",oc="desc",pc="first",qc="last",rc="none",sc="scroll",tc="set",uc="progressive",vc="i",wc="u",xc="d",yc="region",zc="page",Ac="~",Bc="Y",Cc="N",Dc="_meta",Ec="_view_container",Fc="plain",Gc="label",Hc="all",Ic="past",Jc="future",Kc="EQ",Lc="NEQ",Mc="LT",Nc="LTE",Oc="GT",Pc="GTE",Qc="LIKE",Rc="NLIKE",Sc="N",Tc="NN",Uc="C",Vc="NC",Wc="IN",Xc="NIN",Yc=";",Zc="BETWEEN",$c="NBETWEEN",_c="LAST",ad="NLAST",bd="NEXT",cd="NNEXT",dd="REGEXP",ed="S",fd="NS",gd="OTEXT",hd="CASE_INSENSITIVE",id="MI",jd="H",kd="D",ld="W",md="M",nd="Y",od="MIXED",pd="VARCHAR2",qd="NUMBER",rd="DATE",sd="CLOB",td="TIMESTAMP",ud="TIMESTAMP_TZ",vd="TIMESTAMP_LTZ",wd="area",xd="bar",yd="bubble",zd="donut",Ad="funnel",Bd="line",Cd="lineWithArea",Dd="pie",Ed="polar",Fd="radar",Gd="range",Hd="scatter",Id="stock",Jd="vertical",Kd="horizontal",Ld="on",Md="off",Nd=42,Od=[{value:"#FFFF99",label:"APEX.IG.COLOR_YELLOW"},{value:"#99FF99",label:"APEX.IG.COLOR_GREEN"},{value:"#99CCFF",label:"APEX.IG.COLOR_BLUE"},{value:"#FFDD44",label:"APEX.IG.COLOR_ORANGE"},{value:"#FF7755",label:"APEX.IG.COLOR_RED"}],Pd={EQ:"EQUALS",NEQ:"NOT_EQUALS",LT:"LESS_THAN",LTE:"LESS_THAN_OR_EQUALS",GT:"GREATER_THAN",GTE:"GREATER_THAN_OR_EQUALS",LIKE:"LIKE",NLIKE:"NOT_LIKE",N:"IS_NULL",NN:"IS_NOT_NULL",C:"CONTAINS",NC:"DOES_NOT_CONTAIN",IN:"IN",NIN:"NOT_IN",BETWEEN:"BETWEEN",NBETWEEN:"NOT_BETWEEN",LAST:"IN_THE_LAST",NLAST:"NOT_IN_THE_LAST",NEXT:"IN_THE_NEXT",NNEXT:"NOT_IN_THE_NEXT",REGEXP:"MATCHES_REGULAR_EXPRESSION",S:"STARTS_WITH",NS:"DOES_NOT_START_WITH",OTEXT:"ORACLE_TEXT"},Qd={SUM:"SUM",AVG:"AVG",CNT:"COUNT",CNT_DIST:"COUNT_DISTINCT",APPR_CNT_DIST:"APPROX_COUNT_DISTINCT",MIN:"MIN",MAX:"MAX",MEDIAN:"MEDIAN",LISTAGG:"LISTAGG"},Rd={filter:e.getMessage("APEX.IG.FILTER"),chart:e.getMessage("APEX.IG.CHART"),groupby:e.getMessage("APEX.IG.GROUP_BY"),controlBreak:e.getMessage("APEX.IG.CONTROL_BREAK"),highlight:e.getMessage("APEX.IG.HIGHLIGHT"),aggregate:e.getMessage("APEX.IG.AGGREGATE"),flashback:e.getMessage("APEX.IG.FLASHBACK")},Sd={MI:"MINUTE",H:"HOUR",D:"DAY",W:"WEEK",M:"MONTH",Y:"YEAR"},Td={LABEL:"LABEL",VALUE:"VALUE",X:"X",Y:"Y",Z:"Z",TARGET:"TARGET",HIGH:"HIGH",LOW:"LOW"},Ud=([{value:"DD-MON-RR",label:"12-JAN-16"},{value:"DD-MON-YYYY",label:"12-JAN-2016"},{value:"DD-MON",label:"12-JAN"},{value:"RR-MON-DD",label:"16-JAN-12"},{value:"YYYY-MM-DD",label:"2016-01-12"},{value:"fmDay, fmDD fmMonth, YYYY",label:e.getMessage("APEX.IG_FORMAT_SAMPLE_1")},{value:"DD-MON-YYYY HH24:MI",label:"12-JAN-2016 14:30"},{value:"DD-MON-YYYY HH24:MI:SS",label:"12-JAN-2016 14:30:00"},{value:"DD-MON-YYYY HH:MIPM",label:"12-JAN-2016 02:30PM"},{value:"Month",label:e.getMessage("APEX.IG_FORMAT_SAMPLE_2")},{value:"DD-MON-YYYY HH24:MI",label:"12-JAN-2016 14:30"},{value:"DD-MON-YYYY HH24.MI.SSXFF",label:"12-JAN-2016 14.30.12.867530900"},{value:"DD-MON-YYYY HH:MI:SSXFF PM",label:"12-JAN-2016 02:30:12.867530900 PM"},{value:"DD-MON-YYYY HH24:MI TZR",label:"12-JAN-2016 14:30 -07:00"},{value:"DD-MON-YYYY HH24.MI.SSXFF TZR",label:"12-JAN-2016 14.30.12.867530900 -07:00"},{value:"DD-MON-YYYY HH.MI.SSXFF PM TZR",label:"12-JAN-2016 02.30.12.867530900 PM -07:00"},{value:"SINCE",label:e.getMessage("APEX.IG_FORMAT_SAMPLE_3")},{value:"SINCE_SHORT",label:e.getMessage("APEX.IG_FORMAT_SAMPLE_4")}],[{value:"$1,002.54",label:{style:"currency",currency:"USD",currencyDisplay:"symbol"}},{value:"1,002.54",label:{style:"decimal",maximumFractionDigits:2}},{value:"1,002.5400",label:{style:"decimal",maximumFractionDigits:4}},{value:"1,002",label:{style:"decimal",maximumFractionDigits:0}},{value:"1,002.54-",label:{style:"decimal",maximumFractionDigits:2}},{value:"-1,002.54",label:{style:"decimal",maximumFractionDigits:2}},{value:"<1,002.54>",label:{style:"decimal",maximumFractionDigits:2}}]),Vd=[{value:"DD-MON-RR",label:{pattern:"dd-MMM-yy"}},{value:"DD-MON-YYYY",label:{pattern:"dd-MMM-yyyy"}},{value:"DD-MON",label:{pattern:"dd-MMM"}},{value:"RR-MON-DD",label:{pattern:"yy-MMM-dd"}},{value:"YYYY-MM-DD",label:{pattern:"yyyy-MMM-dd"}},{value:"fmDay, fmDD fmMonth, YYYY",label:{formatType:"date",dateFormat:"full"}},{value:"DD-MON-YYYY HH24:MI",label:{pattern:"dd-MMM-yyyy HH:mm"}},{value:"DD-MON-YYYY HH24:MI:SS",label:{pattern:"dd-MMM-yyyy HH:mm:ss"}},{value:"DD-MON-YYYY HH:MIPM",label:{pattern:"dd-MMM-yyyy hh:mm a"}},{value:"Month",label:{month:"long"}},{value:"DD-MON-YYYY HH24.MI.SSXFF",label:{pattern:"dd-MMM-yyyy HH:mm:ss"}},{value:"DD-MON-YYYY HH:MI:SSXFF PM",label:{pattern:"dd-MMM-yyyy hh:mm:ss a"}},{value:"DD-MON-YYYY HH24:MI TZR",label:{pattern:"dd-MMM-yyyy HH:mm"}},{value:"DD-MON-YYYY HH24.MI.SSXFF TZR",label:{pattern:"dd-MMM-yyyy HH:mm:ss"}},{value:"DD-MON-YYYY HH.MI.SSXFF PM TZR",label:{pattern:"dd-MMM-yyyy hh:mm:ss a"}}],Wd="selectionChange",Xd="viewChange",Yd="reportChange",Zd="reportSettingsChange",$d="viewModelCreate",_d="save",ae=[{id:"search",groupTogether:!0,controls:[{type:"MENU",id:"column_filter_button",labelKey:"APEX.IG.SELECT_COLUMNS_TO_SEARCH",icon:"icon-search",iconOnly:!0,menu:{items:[{type:"toggle",action:"search-case-sensitive"},{type:"separator"},{type:"radioGroup",action:"filter-column"}]}},{type:"TEXT",id:"search_field",enterAction:"search"},{type:"BUTTON",action:"search"}]},{id:"reports",controls:[{type:"SELECT",action:"change-report"}]},{id:"views",controls:[{type:"RADIO_GROUP",labelKey:"APEX.IG.VIEW",action:"change-view"}]},{id:"actions1",controls:[{type:"MENU",id:"actions_button",labelKey:"APEX.IG.ACTIONS",menu:{items:[{type:"action",action:"show-columns-dialog",value:"COLUMNS"},{type:"separator"},{type:"action",action:"show-filter-dialog",value:"filter"},{type:"subMenu",id:"data_submenu",labelKey:"APEX.IG.DATA",icon:"icon-ig-data",menu:{items:[{type:"action",action:"show-sort-dialog",value:"sort"},{type:"action",action:"show-aggregate-dialog",value:"aggregate"},{type:"action",action:"refresh",value:"refresh"},{type:"action",action:"show-flashback-dialog",value:"flashback"}]}},{type:"subMenu",id:"format_submenu",labelKey:"APEX.IG.FORMAT",icon:"icon-ig-format",menu:{items:[{type:"action",action:"show-control-break-dialog",value:"controlBreak"},{type:"action",action:"show-highlight-dialog",value:"highlight"},{type:"subMenu",labelKey:"APEX.IG.ROWS_PER_PAGE",hide:!0,id:"rows",icon:"icon-ig-rows",menu:{items:[{type:"radioGroup",action:"change-rows-per-page"}]}}]}},{type:"separator"},{type:"action",action:"chart-view",value:"chartView"},{type:"separator"},{type:"subMenu",id:"save_report_submenu",labelKey:"APEX.IG.REPORT",icon:"icon-irr-saved-report",menu:{items:[{type:"action",action:"save-report",value:"saveReport"},{type:"action",action:"show-save-report-as-dialog",value:"saveReportAs"},{type:"action",action:"show-edit-report-dialog",value:"editReport"},{type:"separator"},{type:"action",action:"delete-report",value:"deleteReport"},{type:"separator"},{type:"action",action:"reset-report",value:"resetReport"}]}},{type:"separator"},{type:"action",action:"show-download-dialog",value:"download"},{type:"separator"},{type:"action",action:"show-help-dialog",value:"help"}]}}]},{id:"actions2",controls:[{type:"TOGGLE",action:"edit"},{type:"BUTTON",hot:!0,action:"save"}]},{id:"actions3",controls:[{type:"BUTTON",action:"selection-add-row"}]},{id:"actions4",align:"end",controls:[{type:"BUTTON",action:"reset-report",labelKey:"APEX.IG.RESET",iconBeforeLabel:!0}]}];ae.toolbarFind=function(a){function b(c){var d,e;for(d=0;d<c.length;d++){if(e=c[d],e.id===a||e.action===a)return e;if("subMenu"===e.type&&(e=b(e.menu.items)))return e}return null}var c,d,e,f,g,h=this;for(c=0;c<h.length;c++){if(h[c].id===a)return h[c];if(e=h[c].controls)for(d=0;d<e.length;d++){if(f=e[d],f.id===a||f.action===a)return f;if(f.menu&&(g=b(f.menu.items)))return g}}return null},a.widget("apex.interactiveGrid",{version:"5.1",widgetEventPrefix:"interactivegrid",options:{config:{toolbarData:ae,modelInstanceId:null,initActions:null,columns:[],ajaxColumns:"",regionId:"",regionStaticId:"",columnGroups:[],ajaxIdentifier:"",itemsToSubmit:"",editable:!1,submitSelectedRows:!1,parentRegionStaticId:null,lazyLoading:!1,filter:{row:!0,complex:!0,isRequired:!1,maxRowCount:null,oracleText:!1},appearance:{showNullValue:"",useFixedRowHeight:!0},pagination:{type:sc,showTotalRowCount:!1},text:{noDataFound:e.getMessage("APEX.IG.NO_DATA_FOUND"),moreDataFound:"",addRowButton:e.getMessage("APEX.IG.ADD_ROW"),help:""},toolbar:{reset:!0,save:!0,columnSelection:!0,searchField:!0,savedReports:!0,editing:!0,addRow:!0,actionMenu:!0},reportSettingsArea:{disabled:!1},features:{saveReport:{publicReportCs:"",isDeveloper:!1,authorizations:[]},download:!1,filter:!0,flashback:!0},headingFixedTo:"page",maxHeight:null,views:{icon:!1,detail:!1,grid:{disabled:!1,features:{reorderColumns:!0,resizeColumns:!0,sort:!0,stretchColumns:!0,highlight:!0,controlBreak:!0,aggregate:!0,changeRowsPerPage:!0,singleRowView:!0,gridView:!0,rowSelector:{multiSelect:!0,selectAll:!0,hideControl:!1}}},chart:{disabled:!1,features:{}}},defaultModelOptions:{},defaultGridViewOptions:{multiple:!1,selectAll:!0,hideDeletedRows:!1,columnSortMultiple:!0,rowHeader:Fc,stickyFooter:!0},defaultIconViewOptions:{iconListOptions:{},hideDeletedRows:!1,footer:!0},defaultDetailViewOptions:{hideDeletedRows:!1,footer:!0},defaultSingleRowOptions:{alwaysEdit:!1,skipDeletedRecords:!1,showExcludeNullValues:!0,showExcludeHiddenFields:!0}},savedReports:[],data:null,selectionChange:null,viewChange:null,reportChange:null,reportSettingsChange:null,viewModelCreate:null,save:null},_create:function(){var d,h,i,j,k=this,l=this.element,m=this.options,n=a(I).length;if(!m.config)throw new Error("Missing required config option.");if(!m.savedReports)throw new Error("Missing required saved reports configuration.");if(this.idPrefix=l[0].id||"ig"+(n+1),this.viewsImpl={},this.columnMap={},this.baseModelColumns={},this.primaryKeyColumns=[],this.parentColumnNames=[],this.parentItemValues=[],this.parentModel="",this.parentRecordId=null,this.editMode=!1,this.currentSavedReportIdx="",this.toolbar$=null,this.currentFilterColumnId=null,this.searchCaseSensitive=!1,this.ignoreResizeHandler=!1,this.actions=f.createContext("InteractiveGrid",l[0]),l.addClass(H),this._defaultIGConfig(),h=m.config,h.maxHeight&&l.height(h.maxHeight),this._defaultColumns(),this._createBaseColumnMap(),this._defaultSavedReports(),this._registerIGViews(),this._renderIG(),this._renderDialogs(),this._addActions(this.actions),h.initActions&&h.initActions(this.actions),h.toolbar&&h.toolbarData?(this._initToolbar(),this._updateToolbarElements()):l.addClass(L),this._updateActions(),this.editableView=null,h.editable&&(this._forEachView(function(a,b){b.supports.edit&&(null===k.editableView?k.editableView=a:c.warn("Extra editable view ignored: "+a))}),null===this.editableView))throw new Error("No editable view for editable Interactive Grid");this.resize(),g.create(h.regionStaticId,{type:"InteractiveGrid",refresh:function(){k.refresh()},focus:function(){k.focus()},widget:function(){return k.element},gotoError:function(a){k.gotoCell(null,a.record,a.column)},getSessionState:function(a){var b,c,d,e={beforeAsync:function(){var a=k._currentViewImpl();a.supports.edit&&a.lockActive&&a.lockActive()},afterAsync:function(){var a=k._currentViewImpl();a.supports.edit&&a.unlockActive&&a.unlockActive()}},f=[],g=[],h=k._currentViewImpl().getActiveRecordId();if(a)for(b=0;b<a.length;b++)c=k._getColumnByStaticId(a[b]),c?h&&g.push({n:c.name,v:apex.item(a[b]).getValue()}):f.push(a[b]);return e.pageItems=f,g.length>0&&(d=k._currentViewImpl().model.getRecordMetadata(h),e.region=k._defaultAjaxRegionData({setSessionState:{values:g,"protected":d["protected"],salt:d.salt}})),e},alternateLoadingIndicator:function(a,c){var d,e=k._currentViewImpl();return e.internalIdentifier===Rb&&!e.singleRowMode&&(d=e.view$.grid("getActiveCellFromColumnItem",a))?b.showSpinner(d,{spinnerClass:"u-Processing--cellRefresh"}):null}}),this._view(this._view(),{initialData:m.data,fetchData:h.lazyLoading}),h.headingFixedTo===zc&&a(K,l).stickyWidget({stickToEnd:!0,bottom:function(){return l.offset().top+a(N,l).outerHeight()-k._currentViewImpl().footerHeight()},toggleWidth:!0}),a("#"+h.regionStaticId).hasClass("resize")?l.addClass("resize").on("resize",function(){k.resize()}):apex.widget.util.onElementResize(l[0],function(){k.ignoreResizeHandler||k.resize()}),apex.widget.util.onVisibilityChange(l[0],function(a){a&&(apex.widget.util.updateResizeSensors(l[0]),k.resize())}),i=this._currentViewImpl(),i.supports.selection&&(i.getSelectedRecords()&&0!==i.getSelectedRecords().length||(j=i.getDataElements(),j&&j.length>0&&i.setSelection([j.first()]))),h.parentRegionStaticId&&(this._forEachView(function(a,b){b.view$&&b.setNoDataMessage(e.getMessage("APEX.IG.SELECT_1_ROW_IN_MASTER"))}),a("#"+h.parentRegionStaticId+"_ig").on("interactivegridselectionchange.ig",function(a,b){d&&(clearTimeout(d),d=null),d=setTimeout(function(){var a=b.selectedRecords[0];k.parentModel=b.model.modelId(),1===b.selectedRecords.length?k._setModelInstance(b.model.getRecordId(a),a):k._setModelInstance(null)},300)}))},_setOption:function(b,c){var d=!1,e=this.options;"config"===b&&(c.modelInstanceId!==e.config.modelInstanceId&&(d=!0),c=a.extend(!0,e.config,c)),this._super(b,c),d&&this._setModelInstance(e.config.modelInstanceId)},_destroy:function(){var a=this.options.config;apex.widget.util.offElementResize(this.element[0]),this.element.removeClass(H+" "+L).empty(),f.removeContext("InteractiveGrid",this.element[0]),this._destroyAllModels(),g.destroy(a.regionStaticId)},_isCurrentlyEditable:function(){var a=this.options.config,b=this._currentReportSettings().flashback,c=b&&b.isEnabled;return a.editable&&!c},_setModelInstance:function(a,b,c){var d,f=this,g=!0,h=this.options.config,i=h.text.noDataFound;if(this.parentRecordId=null,h.modelInstanceId=a,null===a&&(i=e.getMessage("APEX.IG.SELECT_1_ROW_IN_MASTER"),g=!1),h.parentRegionStaticId&&(this.parentRecordId=h.modelInstanceId,this.parentItemValues=[],b&&c))for(d=0;d<this.parentColumnNames.length;d++)this.parentItemValues.push({n:this.parentColumnNames[d],v:b.getValue(c,this.parentColumnNames[d])});this._forEachView(function(a,b){b.view$&&(b.setNoDataMessage(i),f._setModel({viewImpl:b,updateComponent:!0,fetchData:g}))})},_selectionChanged:function(a){var b=this._currentViewImpl().getSelectedRecords()||[];this._updateSelectionActions(),this._trigger(Wd,a,{selectedRecords:b,model:this._currentViewImpl().model})},_registerIGViews:function(){var a,b,c,d=this.options.config;for(a=0;a<be.length;a++)b=be[a],c=b.internalIdentifier,d.views[c]&&this._registerView(b)},_registerView:function(b){var c=this,d=a.extend(!0,{title:"",internalIdentifier:"",cssClass:"",icon:"",supports:{edit:!1,selection:!0,highlight:!1,controlBreak:!1,aggregation:!1,singleRowView:!1,configurableColumns:!1,filter:!0,sort:!0,changeRowsPerPage:!0,download:!1},isConfigured:function(){return!!c._currentReportSettings().views[this.internalIdentifier]},initDialog:null,openDialog:function(){this.dialog$&&this.dialog$.dialog("open")},setColumnConfig:function(a){},init:function(a){},setReportOptions:function(a,b,c){},destroy:function(){},getSelectedRecords:function(){return[]},setSelectedRecords:function(a){},getActiveRecordId:function(){return null},getDataElements:function(){return null},getContextRecord:function(a){return[]},gotoCell:null,setModelName:function(a){},setOption:function(a,b){},setEditMode:function(a){},setNoDataMessage:function(a){},setSelection:function(a){},focus:function(){},refreshColumns:function(){},footerHeight:function(){return 0},refresh:function(){},resize:function(){},show:function(){this.view$.show()},hide:function(){this.view$.hide()}},b);d.model=null,d.modelName=null,d.modelColumns=null,d.view$=null,d.elementId=d.internalIdentifier+Ec,d.initDialog&&d.initDialog(this),this.viewsImpl[d.internalIdentifier]=d},_forEachView:function(a){var b,c;for(b in this.viewsImpl)this.viewsImpl.hasOwnProperty(b)&&(c=this.viewsImpl[b],a(b,c))},_getPaginationConfig:function(b){var c;return c=b.defaultGridViewOptions.pagination?a.extend({},b.defaultGridViewOptions.pagination):{},c.scroll=b.pagination.type===rc||b.pagination.type===sc,c.hasOwnProperty("showPageLinks")||(c.showPageLinks=b.pagination.type===tc&&b.pagination.showTotalRowCount),c.hasOwnProperty("firstAndLastButtons")||(c.firstAndLastButtons=b.pagination.type===tc&&b.pagination.showTotalRowCount),c.hasOwnProperty("showRange")||(c.showRange=!0),c},_renderDialogContent:function(a){var c,d=this,e=b.htmlBuilder();c=function(a,b){d._renderColumnItem(e,a,b)},e.markup("<div").attr("class","a-GV-columnItemContainer u-vh").attr(tb,!0).markup(">"),a(c,e),e.markup("</div>"),this.element.append(e.toString())},_renderColumnItem:function(a,b,c){switch(a.markup("<div").attr("class","a-GV-columnItem").markup(">"),c.id&&(c.id=this._getId(c.id)),b){case Db:u(a,c);break;case Ab:B(a,c);break;case zb:q(a,c);break;case Cb:v(a,c);break;case Eb:A(a,c);break;case Bb:c.colorMenu&&(c.colorMenuId=this._getId("color_menu")),t(a,c);break;case Fb:r(a,c)}a.markup("</div>")},_renderDialogs:function(){var a=this.options.config,b=!1;this._forEachView(function(c,d){d.supports.highlight&&a.views[c].features.highlight&&(b=!0)}),a.features.filter&&this._renderFilterDialog(),a.features.saveReport&&this._renderSaveReportSettingsDialog(),a.features.flashback&&this._renderFlashbackDialog(),a.features.download&&this._renderDownloadDialog(),b&&this._renderHighlightDialog(),this._renderAggregateDialog(),this._renderSortDialog(),this._renderColumnsDialog(),this._renderControlBreakDialog()},_renderSaveReportSettingsDialog:function(){var b,c=[],d=[],f=this.options.config,g=f.features.saveReport.isDeveloper,h=this;g&&(c.push({value:Zb,label:e.getMessage("APEX.IG.PRIMARY")}),c.push({value:$b,label:e.getMessage("APEX.IG.ALTERNATIVE")})),c.push({value:_b,label:e.getMessage("APEX.IG.SAVED_REPORT_PRIVATE")}),f.features.saveReport.publicReportCs&&c.push({value:ac,label:e.getMessage("APEX.IG.SAVED_REPORT_PUBLIC")}),n(f.features.saveReport.authorizations,d,"r","d","",e.getMessage("APEX.IG.SELECT")),this._renderDialogContent(function(a){a(Ab,{id:"SRD_TYPE",options:c}),a(zb,{id:"SRD_NAME"}),a(Ab,{id:"SRD_AUTHORIZATION",options:d})}),this.reportSettingsDialog$=a.apex.recordView.createModelEditDialog(this._getId("report-settings-dialog"),{width:600,height:350,titleKey:"APEX.IG.REPORT",modelName:this._getId("savedReport"),labelAlignment:Jb,formCssClasses:Ka+" "+La,dialogHelp:{helpTextKey:"APEX.IG.HELP.REPORT",titleKey:"APEX.IG.HELP.REPORT_TITLE"},modelOptions:{shape:"record",editable:!0,onlyMarkForDelete:!1,identityField:"id",fields:{id:{canHide:!1,hidden:!0,seq:0},type:{label:e.getMessage("APEX.IG.TYPE"),elementId:this._getId("SRD_TYPE"),seq:"10",defaultValue:bc},name:{label:e.getMessage("APEX.IG.NAME"),elementId:this._getId("SRD_NAME"),seq:"20"},authorizationId:{label:e.getMessage("APEX.IG.AUTHORIZATION"),elementId:this._getId("SRD_AUTHORIZATION"),seq:"30"}}},load:function(c){var d=h.reportSettingsDialog$.dialog("option","saveAs"),f=a.extend({id:"",type:"",name:"",authorizationId:""},h._currentReportSettings());return d?h.reportSettingsDialog$.dialog("option","title",e.getMessage("APEX.IG.REPORT_SAVE_AS")):h.reportSettingsDialog$.dialog("option","title",e.getMessage("APEX.IG.REPORT_EDIT")),b=f.type,d&&(f.name="",g?f.type=_b:a.inArray(f.type,[Zb,$b])>-1&&(f.type=_b)),c.setData(f),h._report()},init:function(a,c,d){function e(){var a,c=h.reportSettingsDialog$.dialog("option","saveAs");switch(c&&b===Zb?f.find("option[value="+Zb+"]").prop(Qb,!0):f.find("option[value="+Zb+"]").prop(Qb,!1),a=f.val(),f.prop(Qb,!1),F(g,!0),D(i),a){case Zb:b===Zb&&f.prop(Qb,!0),F(g,!1);break;case $b:C(i);break;case _b:break;case ac:}}var f=h._getElement("SRD_TYPE"),g=h._getElement("SRD_NAME"),i=h._getElement("SRD_AUTHORIZATION");f.change(e),d.on("apexbeginrecordedit",e)},store:function(a){var b=h.reportSettingsDialog$.dialog("option","saveAs"),c=a.getRecord();b?(c.baseReportId=c.id,h.addReport(c)):h.updateReport(c.id,c),h._updateReportSettingsActions()}})},_renderFlashbackDialog:function(){var b=this;this._renderDialogContent(function(a){a(zb,{id:"FBD_MINS_AGO",required:!0})}),this.flashbackDialog$=a.apex.recordView.createModelEditDialog(this._getId("flashback-dialog"),{width:300,height:200,titleKey:"APEX.IG.FLASHBACK",modelName:this._getId("flashback"),labelAlignment:Jb,formCssClasses:Ka+" "+La,dialogHelp:{helpTextKey:"APEX.IG.HELP.FLASHBACK",titleKey:"APEX.IG.HELP.FLASHBACK_TITLE"},modelOptions:{shape:"record",editable:!0,onlyMarkForDelete:!1,identityField:"id",fields:{id:{canHide:!1,hidden:!0,seq:0},minsAgo:{label:e.getMessage("APEX.IG.MINUTES_AGO"),elementId:this._getId("FBD_MINS_AGO"),isRequired:!0,defaultValue:"5",seq:"10"}}},load:function(a){var c=b._currentReportSettings().flashback;c||(c={minsAgo:"5"}),a.setData(c)},store:function(c){var d=a.extend({isEnabled:!0},c.getRecord());d.minsAgo&&(d.minsAgo=parseInt(d.minsAgo,10)),b.updateFlashback(d)}})},_renderDownloadDialog:function(){var b=this,c=this.options.config.features.download,d=[];c&&c.formats.indexOf("CSV")!==-1&&d.push({value:"CSV",label:e.getMessage("APEX.IG.FORMAT_CSV"),iconCssClasses:"icon-ig-dl-xls"}),c&&c.formats.indexOf("HTML")!==-1&&d.push({value:"HTML",label:e.getMessage("APEX.IG.FORMAT_HTML"),iconCssClasses:"icon-ig-dl-html"}),this._renderDialogContent(function(a){a(Fb,{id:"DL_DOWNLOAD_FORMAT",options:d}),a(Db,{id:"DL_SEND_AS_EMAIL",options:[{value:Bc}]}),a(zb,{id:"DL_EMAIL_TO",placeholder:e.getMessage("APEX.IG.MAILADRESSES_COMMASEP")}),a(zb,{id:"DL_EMAIL_CC",placeholder:e.getMessage("APEX.IG.MAILADRESSES_COMMASEP")}),a(zb,{id:"DL_EMAIL_BCC",placeholder:e.getMessage("APEX.IG.MAILADRESSES_COMMASEP")}),a(zb,{id:"DL_EMAIL_SUBJECT"}),a(Cb,{id:"DL_EMAIL_BODY"})}),this.downloadDialog$=a.apex.recordView.createModelEditDialog(this._getId("download-dialog"),{width:600,height:400,titleKey:"APEX.IG.DOWNLOAD",modelName:this._getId("download-dialog"),labelAlignment:Jb,formCssClasses:Ka+" "+La,dialogHelp:{helpTextKey:"APEX.IG.HELP.DOWNLOAD",titleKey:"APEX.IG.HELP.DOWNLOAD_TITLE"},modelOptions:{shape:"record",editable:!0,onlyMarkForDelete:!1,identityField:"id",fields:{id:{canHide:!1,hidden:!0,seq:0},format:{label:e.getMessage("APEX.IG.DOWNLOAD_FORMAT"),elementId:this._getId("DL_DOWNLOAD_FORMAT"),
seq:10},sendOrDownload:{label:e.getMessage("APEX.IG.SEND_AS_EMAIL"),elementId:this._getId("DL_SEND_AS_EMAIL"),seq:15},emailTo:{label:e.getMessage("APEX.IG.EMAIL_TO"),elementId:this._getId("DL_EMAIL_TO"),seq:20},emailCc:{label:e.getMessage("APEX.IG.EMAIL_CC"),elementId:this._getId("DL_EMAIL_CC"),seq:30},emailBcc:{label:e.getMessage("APEX.IG.EMAIL_BCC"),elementId:this._getId("DL_EMAIL_BCC"),seq:40},emailSubject:{label:e.getMessage("APEX.IG.EMAIL_SUBJECT"),elementId:this._getId("DL_EMAIL_SUBJECT"),seq:50},emailBody:{label:e.getMessage("APEX.IG.EMAIL_BODY"),elementId:this._getId("DL_EMAIL_BODY"),seq:60},sendEmail:{canHide:!1,hidden:!0,seq:0}}},load:function(a){a.setData({id:0,format:"CSV",sendEmail:"N"})},init:function(d,f,g){function h(){k.prop("checked")===!0?(C([l,m,n,o,p]),F([l,o],!0),r[i].text=e.getMessage("APEX.IG.SEND_AS_EMAIL"),q.dialog("option","buttons",r),null!==g.recordView("getRecord")&&d.setValue(g.recordView("getRecord"),"sendEmail","Y")):(D([l,m,n,o,p]),F([l,o],!1),r[i].text=e.getMessage("APEX.IG.DOWNLOAD"),q.dialog("option","buttons",r),null!==g.recordView("getRecord")&&d.setValue(g.recordView("getRecord"),"sendEmail","N"))}var i,j,k=b._getElement("DL_SEND_AS_EMAIL"),l=b._getElement("DL_EMAIL_TO"),m=b._getElement("DL_EMAIL_CC"),n=b._getElement("DL_EMAIL_BCC"),o=b._getElement("DL_EMAIL_SUBJECT"),p=b._getElement("DL_EMAIL_BODY"),q=a(this),r=q.dialog("option","buttons");for(j=0;j<r.length;j++)if(r[j].text===e.getMessage("APEX.DIALOG.SAVE")){i=j;break}g.on("apexbeginrecordedit",function(a,d){s(b._getId("DL_DOWNLOAD_FORMAT"),c.formats[0]),h(),b.options.config.features.download.email===!0?k.change(h):D(k)})},store:function(a){var c,d=a.getRecord();c={format:d.format},"Y"===d.sendEmail&&(c.email={to:d.emailTo,subject:d.emailSubject},d.emailCc&&""!==d.emailCc&&(c.email.cc=d.emailCc),d.emailBcc&&""!==d.emailBcc&&(c.email.bcc=d.emailBcc),d.emailBody&&""!==d.emailBody&&(c.email.body=d.emailBody)),b._downloadReport(c)}})},_columnFilterModelFields:function(a){var b=a+"_";return{type:{label:e.getMessage("APEX.IG."+b+"TYPE"),elementId:this._getId(b+"TYPE"),seq:100,canHide:!0,hidden:!0,defaultValue:Hb},columnId:{label:e.getMessage("APEX.IG.COLUMN"),elementId:this._getId(b+"COLUMN"),seq:120,fieldColSpan:6,canHide:!0,hidden:!0},operator:{label:e.getMessage("APEX.IG.OPERATOR"),elementId:this._getId(b+"OPERATOR"),seq:130,fieldColSpan:6,canHide:!0,hidden:!0,defaultValue:Kc},value:{label:e.getMessage("APEX.IG.VALUE"),heading:e.getMessage("APEX.IG.VALUE"),elementId:this._getId(b+"VALUE"),seq:140,canHide:!0,hidden:!0},dateRangeValue:{label:e.getMessage("APEX.IG.VALUE"),elementId:this._getId(b+"DATE_RANGE_VALUE"),seq:141,fieldColSpan:6,canHide:!0,hidden:!0},dateRangeUnit:{label:e.getMessage("APEX.IG.UNIT"),elementId:this._getId(b+"DATE_RANGE_UNIT"),seq:142,fieldColSpan:6,canHide:!0,hidden:!0},isCaseSensitive:{label:e.getMessage("APEX.IG.CASE_SENSITIVE"),elementId:this._getId(b+"CASE_SENSITIVE"),seq:150,canHide:!0,hidden:!0,defaultValue:"N"},between:{label:e.getMessage("APEX.IG.VALUE"),elementId:this._getId(b+"BETWEEN"),seq:160,fieldColSpan:6,canHide:!0,hidden:!0},and:{label:e.getMessage("APEX.IG.AND"),elementId:this._getId(b+"AND"),seq:170,fieldColSpan:6,canHide:!0,hidden:!0},expression:{label:e.getMessage("APEX.IG.EXPRESSION"),elementId:this._getId(b+"EXPRESSION"),seq:180,canHide:!0,hidden:!0},hiddenValue:{seq:999,canHide:!0,hidden:!0},hiddenBetween:{seq:999,canHide:!0,hidden:!0},hiddenAnd:{seq:999,canHide:!0,hidden:!0}}},_renderSortControls:function(a,b){a(Ab,{id:b+"DIRECTION",required:!0,options:[{value:nc,label:e.getMessage("APEX.IG.ASCENDING")},{value:oc,label:e.getMessage("APEX.IG.DESCENDING")}]}),a(Ab,{id:b+"NULLS",required:!0,options:[{value:pc,label:e.getMessage("APEX.IG.FIRST")},{value:qc,label:e.getMessage("APEX.IG.LAST")}]})},_columnFilterDialogControls:function(a,b){var c,d,f=[],g=this.options.config.columns,h=b+"_";for(c=0;c<g.length;c++)d=g[c],("FD"===b&&this._isColumnFilterable(d.id)||"HD"===b&&!this._getColumn(d.id).specialType&&!this._getColumn(d.id).isHidden)&&f.push({value:d.id,label:this._getColumnLabel(d.id)});a(Ab,{id:h+"TYPE",options:[{value:Gb,label:e.getMessage("APEX.IG.ROW")},{value:Hb,label:e.getMessage("APEX.IG.COLUMN")}]}),a(Ab,{id:h+"COLUMN",options:f}),a(Ab,{id:h+"OPERATOR",options:[]}),a(zb,{maxChars:100,id:h+"VALUE"}),a(zb,{maxChars:20,id:h+"DATE_RANGE_VALUE"}),a(Ab,{id:h+"DATE_RANGE_UNIT",options:[{value:id,label:e.getMessage("APEX.IG.MINUTES")},{value:jd,label:e.getMessage("APEX.IG.HOURS")},{value:kd,label:e.getMessage("APEX.IG.DAYS")},{value:ld,label:e.getMessage("APEX.IG.WEEKS")},{value:md,label:e.getMessage("APEX.IG.MONTHS")},{value:nd,label:e.getMessage("APEX.IG.YEARS")}]}),a(Db,{id:h+"CASE_SENSITIVE",value:Bc}),a(zb,{maxChars:100,id:h+"BETWEEN"}),a(zb,{maxChars:100,id:h+"AND"}),a(zb,{maxChars:40,id:h+"NAME"}),a(Cb,{id:h+"EXPRESSION",toolbar:!0})},_columnFilterInitActions:function(b,c,d,f,g){function h(){var a;w&&null!==d.recordView("getRecord")&&(a=u._getSettingLabel(dc,d.recordView("getRecord")),H.val(a).change())}function k(a){a.hasClass(Sa)&&a.combobox("destroy"),a.hasClass(Ua)&&(a.parent().hasClass(Ta)&&a.unwrap(),a.datepicker("destroy")),a.attr("placeholder","")}function l(){function c(b,c,d){var f,g,h,j,k,l=u._getColumnFormatMask(s.id);f=l.toLowerCase().indexOf("hh")!==-1,f&&(h=(new Date).getHours(),g=l.indexOf("HH")!==-1,j="",g||(j=h>11?"PM":"AM",0===h&&(h=12),h>12&&(h-=12))),a(b).hasClass(Ta)||a(b).wrap(a("<span class='"+Ta+"'></span>")),f?(apex.widget.datepicker(b,{buttonText:"<span class='"+ab+" icon-calendar'></span><span class='"+ob+"'>"+e.formatMessage("APEX.DATEPICKER.ICON_TEXT","")+"</span>",showTime:!0,showOn:"button",defaultDate:i(d),time24h:g,defHour:("00"+h).substr(-2),defMinute:"00",defAmpm:j},l,apex.locale.getLanguage()),k=!1,d&&null!==d.match(/^\d{14}/)&&(k=i(d),k&&!isNaN(k.getTime())&&apex.jQuery.timepicker.setCanonicalDate(a(b).get(0),k))):(apex.widget.datepicker(b,{buttonText:"<span class='"+ab+" icon-calendar'></span><span class='"+ob+"'>"+e.formatMessage("APEX.DATEPICKER.ICON_TEXT","")+"</span>",defaultDate:i(d),showTime:!1,showOn:"button"},l,apex.locale.getLanguage()),d&&null!==d.match(/^\d{14}/)&&a(b).datepicker("setDate",i(d))),a(b).next("button").addClass(Va+" "+Za+" "+Ya+" "+mb+" "+$a),a(b).attr("placeholder",e.getMessage("APEX.IG.EXAMPLE")+": "+s.appearance.formatExample)}var f,g,h;f=b.getValue(d.recordView("getRecord"),"hiddenValue"),g=b.getValue(d.recordView("getRecord"),"hiddenBetween"),h=b.getValue(d.recordView("getRecord"),"hiddenAnd"),k(B),k(F),k(G),s.filter.dataType===rd||s.filter.dataType===td||s.filter.dataType===ud||s.filter.dataType===vd?(c("#"+u._getId(v+"VALUE"),"hiddenValue",f),c("#"+u._getId(v+"BETWEEN"),"hiddenBetween",g),c("#"+u._getId(v+"AND"),"hiddenAnd",h)):(B.combobox({label:e.getMessage("APEX.IG.VALUE")}),F.combobox({label:e.getMessage("APEX.IG.VALUE")}),G.combobox({label:e.getMessage("APEX.IG.AND")}),B.val(f),F.val(g),G.val(h))}function m(a,c){null!==d.recordView("getRecord")&&b.setValue(d.recordView("getRecord"),a,c)}function n(b){var c=y.val(),d=A.val();switch(D([z,A,B,F,G,I,J,K,L]),w&&D(H),m("type",c),c){case Gb:C(B),u.options.config.filter.oracleText?(J.prop("disabled",!0),D(J)):(J.prop("disabled",!1),C(J)),E(B,"APEX.IG.SEARCH"),k(B),h();break;case Hb:C([z,A]),E(B,"APEX.IG.VALUE"),C(a.inArray(d,[Zc,$c])>-1?[F,G]:a.inArray(d,[_c,bd,ad,cd])>-1?[K,L]:B),o(b)}}function o(c){var g,h,i,j,n={},o=z.val(),q=y.val();if(q===Hb&&o){if(s=u._getColumn(o),s.filter.textCase)switch(s.filter.textCase.toLowerCase()){case"upper":B.css({"text-transform":"uppercase"}),F.css({"text-transform":"uppercase"}),G.css({"text-transform":"uppercase"});break;case"lower":B.css({"text-transform":"lowercase"}),F.css({"text-transform":"lowercase"}),G.css({"text-transform":"lowercase"});break;default:B.css({"text-transform":"none"}),F.css({"text-transform":"none"}),G.css({"text-transform":"none"})}if("HD"===f)switch(s.dataType){case pd:n[Kc]=e.getMessage("APEX.IG."+Pd[Kc]),n[Lc]=e.getMessage("APEX.IG."+Pd[Lc]),n[Sc]=e.getMessage("APEX.IG."+Pd[Sc]),n[Tc]=e.getMessage("APEX.IG."+Pd[Tc]),n[Wc]=e.getMessage("APEX.IG."+Pd[Wc]),n[Xc]=e.getMessage("APEX.IG."+Pd[Xc]),n[Uc]=e.getMessage("APEX.IG."+Pd[Uc]),n[Vc]=e.getMessage("APEX.IG."+Pd[Vc]),n[ed]=e.getMessage("APEX.IG."+Pd[ed]),n[fd]=e.getMessage("APEX.IG."+Pd[fd]),n[dd]=e.getMessage("APEX.IG."+Pd[dd]);break;case qd:n[Kc]=e.getMessage("APEX.IG."+Pd[Kc]),n[Lc]=e.getMessage("APEX.IG."+Pd[Lc]),n[Oc]=e.getMessage("APEX.IG."+Pd[Oc]),n[Pc]=e.getMessage("APEX.IG."+Pd[Pc]),n[Mc]=e.getMessage("APEX.IG."+Pd[Mc]),n[Nc]=e.getMessage("APEX.IG."+Pd[Nc]),n[Sc]=e.getMessage("APEX.IG."+Pd[Sc]),n[Tc]=e.getMessage("APEX.IG."+Pd[Tc]),n[Wc]=e.getMessage("APEX.IG."+Pd[Wc]),n[Xc]=e.getMessage("APEX.IG."+Pd[Xc]),n[Zc]=e.getMessage("APEX.IG."+Pd[Zc]),n[$c]=e.getMessage("APEX.IG."+Pd[$c]);break;case rd:case td:case ud:case vd:n[Kc]=e.getMessage("APEX.IG."+Pd[Kc]),n[Lc]=e.getMessage("APEX.IG."+Pd[Lc]),n[Oc]=e.getMessage("APEX.IG."+Pd[Oc]),n[Pc]=e.getMessage("APEX.IG."+Pd[Pc]),n[Mc]=e.getMessage("APEX.IG."+Pd[Mc]),n[Nc]=e.getMessage("APEX.IG."+Pd[Nc]),n[Sc]=e.getMessage("APEX.IG."+Pd[Sc]),n[Tc]=e.getMessage("APEX.IG."+Pd[Tc]),a.inArray(s.filter.dateRanges,[Hc,Ic])>-1&&(n[_c]=e.getMessage("APEX.IG."+Pd[_c]),n[ad]=e.getMessage("APEX.IG."+Pd[ad])),a.inArray(s.filter.dateRanges,[Hc,Jc])>-1&&(n[bd]=e.getMessage("APEX.IG."+Pd[bd]),n[cd]=e.getMessage("APEX.IG."+Pd[cd])),n[Zc]=e.getMessage("APEX.IG."+Pd[Zc]),n[$c]=e.getMessage("APEX.IG."+Pd[$c]);break;case sd:n[Sc]=e.getMessage("APEX.IG."+Pd[Sc]),n[Tc]=e.getMessage("APEX.IG."+Pd[Tc])}else for(J.prop("disabled",!0),h=0;h<s.filter.operators.length;h++)if(i=s.filter.operators[h],"$std$"===i.name)switch(s.filter.dataType){case pd:n[Kc]=e.getMessage("APEX.IG."+Pd[Kc]),n[Lc]=e.getMessage("APEX.IG."+Pd[Lc]),n[Sc]=e.getMessage("APEX.IG."+Pd[Sc]),n[Tc]=e.getMessage("APEX.IG."+Pd[Tc]),n[Wc]=e.getMessage("APEX.IG."+Pd[Wc]),n[Xc]=e.getMessage("APEX.IG."+Pd[Xc]);break;case qd:n[Kc]=e.getMessage("APEX.IG."+Pd[Kc]),n[Lc]=e.getMessage("APEX.IG."+Pd[Lc]),n[Oc]=e.getMessage("APEX.IG."+Pd[Oc]),n[Pc]=e.getMessage("APEX.IG."+Pd[Pc]),n[Mc]=e.getMessage("APEX.IG."+Pd[Mc]),n[Nc]=e.getMessage("APEX.IG."+Pd[Nc]),n[Sc]=e.getMessage("APEX.IG."+Pd[Sc]),n[Tc]=e.getMessage("APEX.IG."+Pd[Tc]),n[Wc]=e.getMessage("APEX.IG."+Pd[Wc]),n[Xc]=e.getMessage("APEX.IG."+Pd[Xc]),n[Zc]=e.getMessage("APEX.IG."+Pd[Zc]),n[$c]=e.getMessage("APEX.IG."+Pd[$c]);break;case rd:case td:case ud:case vd:n[Kc]=e.getMessage("APEX.IG."+Pd[Kc]),n[Lc]=e.getMessage("APEX.IG."+Pd[Lc]),n[Oc]=e.getMessage("APEX.IG."+Pd[Oc]),n[Pc]=e.getMessage("APEX.IG."+Pd[Pc]),n[Mc]=e.getMessage("APEX.IG."+Pd[Mc]),n[Nc]=e.getMessage("APEX.IG."+Pd[Nc]),n[Sc]=e.getMessage("APEX.IG."+Pd[Sc]),n[Tc]=e.getMessage("APEX.IG."+Pd[Tc]),a.inArray(s.filter.dateRanges,[Hc,Ic])>-1&&(n[_c]=e.getMessage("APEX.IG."+Pd[_c]),n[ad]=e.getMessage("APEX.IG."+Pd[ad])),a.inArray(s.filter.dateRanges,[Hc,Jc])>-1&&(n[bd]=e.getMessage("APEX.IG."+Pd[bd]),n[cd]=e.getMessage("APEX.IG."+Pd[cd])),n[Zc]=e.getMessage("APEX.IG."+Pd[Zc]),n[$c]=e.getMessage("APEX.IG."+Pd[$c]);break;case sd:n[Sc]=e.getMessage("APEX.IG."+Pd[Sc]),n[Tc]=e.getMessage("APEX.IG."+Pd[Tc])}else"$perform$"===i.name?a.inArray(s.filter.dataType,[pd,sd])>-1&&(n[Uc]=e.getMessage("APEX.IG."+Pd[Uc]),n[Vc]=e.getMessage("APEX.IG."+Pd[Vc]),n[ed]=e.getMessage("APEX.IG."+Pd[ed]),n[fd]=e.getMessage("APEX.IG."+Pd[fd]),n[dd]=e.getMessage("APEX.IG."+Pd[dd]),s.filter.textCase&&"MIXED"===s.filter.textCase.toUpperCase()&&J.prop("disabled",!1)):i.name===hd?s.filter.textCase&&"MIXED"===s.filter.textCase.toUpperCase()&&J.prop("disabled",!1):n[i.name]=e.getMessage("APEX.IG."+Pd[i.name]);j=b.getValue(d.recordView("getRecord"),"operator"),A.empty(),a.each(n,function(b,c){A.append(a("<option></option>").attr("value",b).text(c))}),j&&null!==j&&a.inArray(j,n)&&A.val(j),null===A.val()&&A.val(Kc),m("operator",A.val()),l(),u._hasColumnFilterLov(o)?u._getFilterValues(o,!1,function(a){if(x=[],a.regions[0].filterValues)for(g=a.regions[0].filterValues,h=0;h<g.length;h++)x.push({label:g[h],value:g[h]});F.hasClass(Sa)&&F.combobox("option","source",x),G.hasClass(Sa)&&G.combobox("option","source",x),B.hasClass(Sa)&&B.combobox("option","source",x)}):(k(B),k(F),k(G)),c&&(B.val("").change(),F.val("").change(),G.val("").change()),m("columnId",o),p()}}function p(){var b=A.val(),c=y.val();m("operator",b),c===Hb&&(D([B,F,G,K,L,J]),null!==b&&(a.inArray(s.filter.dataType,[rd,td,ud,vd])===-1&&B.hasClass(Sa)&&(a.inArray(b,[Wc,Xc])>-1?(B.combobox("option","multipleValues",!0),B.combobox("option","multipleValueDelimiter",Yc+" "),B.prop("placeholder",e.formatMessage("APEX.IG.PLACEHOLDER_INVALUES",Yc))):(B.combobox("option","multipleValues",!1),B.prop("placeholder",""))),a.inArray(b,[Uc,Vc,dd,ed,fd])>-1&&J.prop("disabled")===!1&&C(J),a.inArray(t,[Zc,$c])>-1&&a.inArray(b,[Zc,$c])===-1&&B.val("").change(),a.inArray(t,[Zc,$c])===-1&&a.inArray(b,[Zc,$c])>-1&&(F.val("").change(),G.val("").change()),a.inArray(t,[_c,bd,ad,cd])>-1&&a.inArray(b,[_c,bd,ad,cd])===-1&&B.val("").change(),a.inArray(b,[Zc,$c])>-1?C([F,G]):a.inArray(b,[_c,bd,ad,cd])>-1?(C([K,L]),r()):a.inArray(b,[Sc,Tc])===-1&&C(B))),t=b,h()}function q(a){var c,f,g,i,k=u._getElement(v+a);if("VALUE"===a&&(c="hiddenValue"),"BETWEEN"===a&&(c="hiddenBetween"),"AND"===a&&(c="hiddenAnd"),b.setValidity("valid",d.recordView("getRecord").id,a.toLowerCase()),k.hasClass(Ua))if(""===k.val())i="",g="";else{f=!1;try{f=k.datepicker("option","showTime")?apex.jQuery.timepicker.getCanonicalDate(k.get(0)):k.datepicker("getDate")}catch(l){}f&&!isNaN(f.getTime())?(i=k.val(),g=j(f)):(""!==k.val()&&b.setValidity("error",d.recordView("getRecord").id,a.toLowerCase(),e.getMessage("APEX.IG.DATE_INVALID_VALUE")),i=k.val(),g=k.val())}else"uppercase"===k.css("text-transform")?(g=k.val().toUpperCase(),i=k.val().toUpperCase()):"lowercase"===k.css("text-transform")?(g=k.val().toLowerCase(),i=k.val().toLowerCase()):(g=k.val(),i=k.val());m(c,g),m(a.toLowerCase(),i),h()}function r(){B.val(K.val()+Ac+L.val()),m("value",B.val()),m("dateRangeValue",K.val()),m("dateRangeUnit",L.val()),h()}var s,t,u=this,v=f+"_",w="FD"===f,x=[],y=u._getElement(v+"TYPE"),z=u._getElement(v+"COLUMN"),A=u._getElement(v+"OPERATOR"),B=u._getElement(v+"VALUE"),F=u._getElement(v+"BETWEEN"),G=u._getElement(v+"AND"),H=u._getElement(v+"NAME"),I=u._getElement(v+"EXPRESSION"),J=u._getElement(v+"CASE_SENSITIVE"),K=u._getElement(v+"DATE_RANGE_VALUE"),L=u._getElement(v+"DATE_RANGE_UNIT");K.change(r),L.change(r),J.change(function(){var a=J.prop("checked");m("isCaseSensitive",a),J.prop("checked",a)}),y.change(function(){n(!0)}),z.change(function(){o(!0)}),A.change(p),B.change(function(){q("VALUE")}),F.change(function(){q("BETWEEN")}),G.change(function(){q("AND")}),d.on("apexbeginrecordedit",function(b,c){n(),a.isFunction(g)&&g()})},_renderFilterDialog:function(){var b=this;this._renderDialogContent(function(a){b._columnFilterDialogControls(a,"FD")}),this.filterDialog$=a.apex.recordView.createModelEditDialog(this._getId("filter-dialog"),{width:600,height:380,titleKey:"APEX.IG.FILTERS",modelName:this._getId("filters"),labelAlignment:Jb,formCssClasses:Ka+" "+La,dialogHelp:{helpTextKey:"APEX.IG.HELP.FILTER",titleKey:"APEX.IG.HELP.FILTER_TITLE"},useSplitter:!0,modelOptions:{editable:!0,onlyMarkForDelete:!1,identityField:"id",fields:a.extend({isEnabled:{heading:e.getMessage("APEX.IG.ENABLED"),label:e.getMessage("APEX.IG.ENABLED"),alignment:Kb,columnCssClasses:lb,seq:10,cellTemplate:"<span class='ro-checkbox &\"enabledClass\".'></span><span class='u-vh'>&\"enabledText\".</span>",defaultValue:!0},name:{heading:e.getMessage("APEX.IG.NAME"),headingAlignment:Jb,label:e.getMessage("APEX.IG.NAME"),elementId:this._getId("FD_NAME"),seq:105},id:{canHide:!1,hidden:!0,seq:999},enabledClass:{"volatile":!0,canHide:!1,hidden:!0,seq:999,defaultValue:jb},enabledText:{"volatile":!0,canHide:!1,hidden:!0,seq:999,defaultValue:e.getMessage("APEX.IG.ENABLED")}},this._columnFilterModelFields("FD"))},load:function(c){var d,f,g,h,i,j=[],k=b.getFilters(),l=a(this).dialog("option","id");if(k.length>0){for(d=0;d<k.length;d++){switch(g=a.extend({id:"",type:"",columnId:"",operator:"",value:"",hiddenValue:"",dateRangeValue:"",dateRangeUnit:"",isCaseSensitive:!1,between:"",and:"",hiddenBetween:"",hiddenAnd:"",isEnabled:"",enabledClass:"",enabledText:"",name:"",expression:""},k[d]),f=g.isEnabled,g.enabledClass=f?jb:"",g.enabledText=f?e.getMessage("APEX.IG.ENABLED"):e.getMessage("APEX.IG.DISABLED"),g.name=b._getSettingLabel(dc,g),g.type){case Gb:g.hiddenValue=g.value;break;case Hb:g.hiddenValue=g.value,a.inArray(g.operator,[Zc,$c])>-1?(h=g.value.split(Ac),g.hiddenBetween=h[0],g.hiddenAnd=h[1],g.hiddenValue="",g.value=""):a.inArray(g.operator,[_c,bd,ad,cd])>-1&&(i=g.value.split(Ac),g.dateRangeValue=i[0],g.dateRangeUnit=i[1],g.hiddenValue="",g.value=""),a.inArray(g.operator,[Wc,Xc])>-1&&(g.value=g.value.split("").join(Yc+" "),g.hiddenValue=g.value)}g.isCaseSensitive=g.isCaseSensitive?Bc:Cc,j.push(g)}c.setData(j)}else l=c.insertNewRecord();return l},init:function(c,d,f){d.on("click",nb,function(b){var f,g,h=a(this);h.find(".ro-checkbox");g=d.grid("getRecords",[h.parent()])[0],f=!c.getValue(g,"isEnabled"),c.setValue(g,"enabledClass",f?jb:""),c.setValue(g,"enabledText",f?e.getMessage("APEX.IG.ENABLED"):e.getMessage("APEX.IG.DISABLED")),c.setValue(g,"isEnabled",f)}).on("keydown",nb,function(b){b.which===a.ui.keyCode.SPACE&&a(this).trigger("click")}),f.recordView("fieldElement","isEnabled").hide(),f.recordView("fieldElement","hiddenValue").hide(),f.recordView("fieldElement","hiddenBetween").hide(),f.recordView("fieldElement","hiddenAnd").hide(),b._columnFilterInitActions(c,d,f,"FD")},validate:function(c){var d=!0;return c.forEach(function(f,g,h){switch(c.setValidity("valid",h,"between"),c.setValidity("valid",h,"and"),c.setValidity("valid",h,"value"),c.setValidity("valid",h,"expression"),f.type){case Hb:switch(f.operator){case Zc:case $c:f.hiddenBetween&&""!==f.hiddenBetween||(d=!1,c.setValidity("error",h,"between",e.getMessage("APEX.IG.VALUE_REQUIRED"))),f.hiddenAnd&&""!==f.hiddenAnd||(d=!1,c.setValidity("error",h,"and",e.getMessage("APEX.IG.VALUE_REQUIRED"))),d&&a.inArray(b._getColumn(f.columnId).filter.dataType,[rd,td,ud,vd])>-1&&(f.hiddenBetween!==j(i(f.hiddenBetween))&&(d=!1,c.setValidity("error",h,"between",e.getMessage("APEX.IG.INVALID_VALUE"))),f.hiddenAnd!==j(i(f.hiddenAnd))&&(d=!1,c.setValidity("error",h,"and",e.getMessage("APEX.IG.INVALID_VALUE"))));break;case _c:case bd:case ad:case cd:f.dateRangeValue&&""!==f.dateRangeValue||(d=!1,c.setValidity("error",h,"dateRangeValue",e.getMessage("APEX.IG.VALUE_REQUIRED"))),f.dateRangeUnit&&""!==f.dateRangeUnit||(d=!1,c.setValidity("error",h,"dateRangeUnit",e.getMessage("APEX.IG.VALUE_REQUIRED")));break;case Kc:case Lc:case Oc:case Pc:case Mc:case Nc:case Wc:case Xc:f.hiddenValue&&""!==f.hiddenValue?a.inArray(b._getColumn(f.columnId).filter.dataType,[rd,td,ud,vd])>-1&&f.hiddenValue!==j(i(f.hiddenValue))&&(d=!1,c.setValidity("error",h,"value",e.getMessage("APEX.IG.DATE_INVALID_VALUE"))):(d=!1,c.setValidity("error",h,"value",e.getMessage("APEX.IG.VALUE_REQUIRED")))}break;case Gb:f.hiddenValue&&""!==f.hiddenValue||(d=!1,c.setValidity("error",h,"value",e.getMessage("APEX.IG.VALUE_REQUIRED")))}}),d},store:function(c){var d,e,f,g=c.getChanges();b._ifNoChangesDo(function(){for(d=0;d<g.length;d++){switch(e=g[d],f=e.record,delete f.enabledClass,delete f.enabledText,f.type){case Gb:delete f.expression,delete f.columnId,delete f.and,delete f.between,delete f.hiddenAnd,delete f.hiddenBetween,delete f.dateRangeValue,delete f.dateRangeUnit,delete f.operator,f.isCaseSensitive=f.isCaseSensitive===Bc;break;case Hb:f.value=f.hiddenValue,a.inArray(f.operator,[Zc,$c])>-1?f.value=f.hiddenBetween+Ac+f.hiddenAnd:a.inArray(f.operator,[_c,bd,ad,cd])>-1&&(f.value=f.dateRangeValue+Ac+f.dateRangeUnit),a.inArray(f.operator,[Wc,Xc])>-1&&(f.value=l(f.value.split(Yc)).join("")),delete f.dateRangeValue,delete f.dateRangeUnit,delete f.between,delete f.and,delete f.hiddenValue,delete f.hiddenBetween,delete f.hiddenAnd,delete f.expression,f.isCaseSensitive=f.isCaseSensitive===Bc}e.inserted?(delete f.id,f.columnType=Hb,b.addFilter(f,{save:!1,refreshData:!1,skipNoChangesCheck:!0})):e.updated?(f.columnType=Hb,b.updateFilter(f.id,f,{save:!1,refreshData:!1,skipNoChangesCheck:!0})):e.deleted&&b.deleteFilter(f.id,{save:!1,refreshData:!1,skipNoChangesCheck:!0})}b._setReportSettings({refreshModel:!0})})}})},_renderColumnsDialog:function(){function b(b){function d(a){return!(a.id!==h.columnId||a.specialType&&"actions"!==a.specialType||a.isHidden)}var f,g,h,i,j=[],k=c._getCurrentView().columns;for(f=0;f<k.length;f++)h=k[f],g=a.grep(c.options.config.columns,d),g=g.length>0&&g[0],g&&(i={id:h.columnId,columnId:h.columnId,columnWidth:h.width,seq:f+1,heading:"actions"===g.specialType?e.getMessage("APEX.IG.ROW_ACTIONS"):g.heading.label,groupId:g.layout.groupId,canHide:g.features.canHide,isVisible:h.isVisible,enabledClass:h.isVisible?jb:""},"ALL"===b?j.push(i):"VISIBLE"===b&&h.isVisible?j.push(i):"INVISIBLE"!==b||i.isVisible||j.push(i));return j}var c=this,d=[];n(this.options.config.columnGroups,d,"id","label","",""),this._renderDialogContent(function(a){a(zb,{id:"CD_COLUMN_WIDTH"}),a(Ab,{id:"CD_COLUMN_GROUP",options:d})}),this.columnsDialog$=a.apex.recordView.createModelEditDialog(this._getId("columns-dialog"),{width:600,height:380,titleKey:"APEX.IG.COLUMNS",modelName:this._getId("column"),labelAlignment:Jb,formCssClasses:Ka+" "+La,dialogHelp:{helpTextKey:"APEX.IG.HELP.COLUMNS",titleKey:"APEX.IG.HELP.COLUMNS_TITLE"},useSplitter:!0,modelOptions:{editable:!0,hasIdentity:!0,shape:"table",canDelete:!1,canAdd:!1,identityField:"id",sequenceField:"seq",fields:{id:{canHide:!1,hidden:!0,seq:0},isVisible:{heading:e.getMessage("APEX.IG.VISIBLE"),label:e.getMessage("APEX.IG.VISIBLE"),alignment:Kb,defaultValue:!0,columnCssClasses:lb,seq:10,cellTemplate:"<span class='ro-checkbox &\"enabledClass\".'></span><span class='u-vh'>&\"enabledText\".</span>"},heading:{label:e.getMessage("APEX.IG.COLUMN"),heading:e.getMessage("APEX.IG.COLUMN"),headingAlignment:Jb,elementId:this._getId("CD_COLUMN_HEADING"),seq:20,canHide:!0,hidden:!1},columnWidth:{label:e.getMessage("APEX.IG.WIDTH"),heading:e.getMessage("APEX.IG.WIDTH"),elementId:this._getId("CD_COLUMN_WIDTH"),seq:40,canHide:!0,hidden:!0},groupId:{label:e.getMessage("APEX.IG.GROUP"),heading:e.getMessage("APEX.IG.GROUP"),elementId:this._getId("CD_COLUMN_GROUP"),seq:30,canHide:!0,escape:!1,"volatile":!0,hidden:!0},columnId:{label:e.getMessage("APEX.IG.COLUMN"),heading:e.getMessage("APEX.IG.COLUMN"),elementId:this._getId("CD_COLUMN"),seq:0,canHide:!0,hidden:!0},seq:{seq:"0",canHide:!1,hidden:!0},canHide:{seq:"0",canHide:!1,hidden:!0},enabledClass:{"volatile":!0,canHide:!1,hidden:!0,seq:0,defaultValue:jb}}},load:function(a){a.setData(b(this.showColumns))},init:function(c,d,g,h){var i,j=this;this.showColumns||(this.showColumns="ALL"),i=[{type:"BUTTON",iconOnly:!0,icon:"icon-up-chevron",action:"move-up"},{type:"BUTTON",iconOnly:!0,icon:"icon-down-chevron",action:"move-down"},{type:"MENU",icon:"icon-ig-select-cols",iconOnly:!0,menu:{items:[{type:"radioGroup",action:"show-columns"}]}}],f.findContext("ModelEditDialog",this).add([{name:"show-columns",choices:[{label:e.getMessage("APEX.IG.ALL"),value:"ALL"},{label:e.getMessage("APEX.IG.VISIBLE"),value:"VISIBLE"},{label:e.getMessage("APEX.IG.INVISIBLE"),value:"INVISIBLE"}],get:function(){return j.showColumns},set:function(a){j.showColumns=a;var d=b(a);c.setData(d)}}]),h.toolbar({data:[{align:"start",controls:i}]}),d.on("click",nb,function(b){var e,f,g=a(this);g.find(".ro-checkbox");f=d.grid("getRecords",[g.parent()])[0],c.getValue(f,"canHide")&&(e=!c.getValue(f,"isVisible"),c.setValue(f,"enabledClass",e?jb:""),c.setValue(f,"isVisible",e))}).on("keydown",function(b){b.which===a.ui.keyCode.SPACE&&a(this).trigger("click")}),g.on("apexbeginrecordedit",function(){""===c.getValue(g.recordView("getRecord"),"groupId")?g.recordView("fieldElement","groupId").hide():g.recordView("fieldElement","groupId").show()}),g.recordView("fieldElement","columnId").hide(),g.recordView("fieldElement","isVisible").hide()},validate:function(a){var b,c=!0;return a.forEach(function(d,f,g){b=d.columnWidth,null!==b&&""!==b&&isNaN(parseInt(b,10))?(a.setValidity("error",g,"columnWidth",e.getMessage("APEX.IG.INVALID_VALUE")),a.setValidity("error",g,"columnId",e.getMessage("APEX.IG.INVALID_VALUE")),c=!1):(a.setValidity("valid",g,"columnWidth"),a.setValidity("valid",g,"columnId"))}),c},store:function(a){var b,d,e,f=!1,g=(a.getChanges(),c._getCurrentView().columns),h=c._currentViewImpl().view$.grid("getColumns");c._ifNoChangesDo(function(){for(g.sort(function(a,b){return a.seq-b.seq}),b=0;b<g.length;b++)g[b].isFrozen===!0&&(f=b+1);for(a.forEach(function(a,b,d){e=a.columnWidth,e&&null!==e||(e=""),e=e.toString(),c._currentViewColumn(a.columnId,{isVisible:a.isVisible,width:parseInt(e,10),seq:parseFloat(a.seq)})}),g.sort(function(a,b){return a.seq-b.seq}),b=0;b<g.length;b++)for(d=0;d<h.length;d++)if(g[b].columnId===h[d].id){h[d].seq=g[b].seq,h[d].canHide&&(h[d].hidden=!g[b].isVisible),h[d].width=g[b].width,g[b].seq=b,f!==!1&&b>=f&&(g[b].isFrozen=!1,h[d].frozen=!1),f!==!1&&b<f&&(g[b].isFrozen=!0,h[d].frozen=!0);break}c._setReportSettings({refreshView:!0,refreshColumns:!0})})}})},_renderHighlightDialog:function(){var b,c,d=this,f=this.options.config.columns,g=!1,h=[];for(c=0;c<f.length;c++)b=f[c],this._getColumn(b.id).specialType||this._getColumn(b.id).isHidden||h.push({value:b.id,label:this._getColumnLabel(b.id)});this._renderDialogContent(function(a){d._columnFilterDialogControls(a,"HD"),a(Bb,{id:"HD_BACKGROUND_COLOR",colorMenu:!0,itemLabel:e.getMessage("APEX.IG.BACKGROUND_COLOR")}),a(Bb,{id:"HD_TEXT_COLOR",colorMenu:!0,itemLabel:e.getMessage("APEX.IG.TEXT_COLOR")}),a(Ab,{id:"HD_HIGHLIGHT_TYPE",options:[{value:Gb,label:e.getMessage("APEX.IG.ROW")},{value:Hb,label:e.getMessage("APEX.IG.COLUMN")}]}),a(Ab,{id:"HD_HIGHLIGHT_COLUMN",options:h})}),this.highlightDialog$=a.apex.recordView.createModelEditDialog(this._getId("highlight-dialog"),{width:800,height:580,titleKey:"APEX.IG.HIGHLIGHT",modelName:this._getId("highlight"),labelAlignment:Jb,formCssClasses:Ka+" "+La,useSplitter:!0,dialogHelp:{helpTextKey:"APEX.IG.HELP.HIGHLIGHT",titleKey:"APEX.IG.HELP.HIGHLIGHT_TITLE"},modelOptions:{editable:!0,onlyMarkForDelete:!1,sequenceField:"seq",identityField:"id",fields:a.extend({isEnabled:{heading:e.getMessage("APEX.IG.ENABLED"),label:e.getMessage("APEX.IG.ENABLED"),alignment:Kb,columnCssClasses:lb,seq:10,cellTemplate:"<span class='ro-checkbox &\"enabledClass\".'></span><span class='u-vh'>&\"enabledText\".</span>",defaultValue:!0},name:{heading:e.getMessage("APEX.IG.NAME"),label:e.getMessage("APEX.IG.NAME"),headingAlignment:Jb,elementId:this._getId("HD_NAME"),isRequired:!0,seq:10},highlightType:{label:e.getMessage("APEX.IG.HIGHLIGHT"),elementId:this._getId("HD_HIGHLIGHT_TYPE"),seq:20,canHide:!0,hidden:!0},highlightColumnId:{label:e.getMessage("APEX.IG.COLUMN"),elementId:this._getId("HD_HIGHLIGHT_COLUMN"),seq:30,canHide:!0,hidden:!0},backgroundColor:{label:e.getMessage("APEX.IG.BACKGROUND_COLOR"),heading:e.getMessage("APEX.IG.BACKGROUND_COLOR"),elementId:this._getId("HD_BACKGROUND_COLOR"),seq:40,fieldColSpan:6,canHide:!0,hidden:!0},textColor:{label:e.getMessage("APEX.IG.TEXT_COLOR"),heading:e.getMessage("APEX.IG.TEXT_COLOR"),elementId:this._getId("HD_TEXT_COLOR"),seq:50,fieldColSpan:6,canHide:!0,hidden:!0},id:{canHide:!1,hidden:!0,seq:999},seq:{canHide:!1,hidden:!0,seq:999},enabledClass:{"volatile":!0,canHide:!1,hidden:!0,seq:999,defaultValue:jb},enabledText:{"volatile":!0,canHide:!1,hidden:!0,seq:999,defaultValue:e.getMessage("APEX.IG.ENABLED")}},this._columnFilterModelFields("HD"))},load:function(b){var c,f,g,h,i,j=[],k=d.getHighlights(),l=a(this).dialog("option","id");if(k.length>0){for(c=0;c<k.length;c++){switch(i=k[c],h={id:i.id,seq:i.seq,name:i.name,highlightType:i.type,highlightColumnType:i.columnType,highlightColumnId:i.columnId,backgroundColor:i.backgroundColor,textColor:i.textColor,type:i.condition.type,columnType:i.condition.columnType,columnId:i.condition.columnId,operator:i.condition.operator,isCaseSensitive:i.condition.isCaseSensitive?Bc:Cc,value:i.condition.value,expression:i.condition.expression,isEnabled:i.isEnabled,hiddenValue:"",dateRangeValue:"",dateRangeUnit:"",between:"",and:"",hiddenBetween:"",hiddenAnd:"",enabledClass:"",enabledText:""},h.enabledClass=h.isEnabled?jb:"",h.enabledText=h.isEnabled?e.getMessage("APEX.IG.ENABLED"):e.getMessage("APEX.IG.DISABLED"),h.hiddenValue=h.value,h.type){case Hb:a.inArray(h.operator,[Zc,$c])>-1?(f=h.value.split(Ac),h.hiddenBetween=f[0],h.hiddenAnd=f[1],h.hiddenValue="",h.value=""):a.inArray(h.operator,[_c,bd,ad,cd])>-1&&(g=h.value.split(Ac),h.dateRangeValue=g[0],h.dateRangeUnit=g[1],h.hiddenValue="",h.value=""),a.inArray(h.operator,[Wc,Xc])>-1&&(h.value=h.value.split("").join(Yc+" "),h.hiddenValue=h.value)}j.push(h)}b.setData(j)}else l=b.insertNewRecord();return l},init:function(b,c,f){function h(b,c){a(c).prevAll("input").first().val(this.value).change()}function i(){function b(){"9999"!==a("div.colorpicker").css("z-index")&&a(document.createElement("style")).html(" div.colorpicker, div.colorpicker * { z-index: 9999; } ").appendTo("head"),apex.widget.colorpicker(p,{preview:{type:"modern"}}),apex.widget.colorpicker(q,{preview:{type:"modern"}}),g=!0}a.isFunction(apex.widget.colorpicker)?b():a.when(a.getScript(apex_img_dir+"libraries/jquery-colorpicker/1.4/js/"+(0===apex.debug.getLevel()?"apex.colorpicker.min.js":"apex.colorpicker.js")),a.getScript(apex_img_dir+"libraries/apex/"+(0===apex.debug.getLevel()?"minified/widget.colorpicker.min.js":"widget.colorpicker.js")),a.Deferred(function(b){a(b.resolve)})).done(function(){a(document.createElement("link")).attr({rel:"stylesheet",type:"text/css",href:apex_img_dir+"libraries/jquery-colorpicker/1.4/css/colorpicker.css"}).appendTo("head"),b()})}function j(){var a=n.val();a===Gb?D(o):C(o)}function k(){j(),g===!1&&i(),p.change(),q.change()}var l,m,n=d._getElement("HD_HIGHLIGHT_TYPE"),o=d._getElement("HD_HIGHLIGHT_COLUMN"),p=d._getElement("HD_TEXT_COLOR"),q=d._getElement("HD_BACKGROUND_COLOR"),r=d._getElement("HD_NAME"),s=[];for(m=0;m<Od.length;m++)s.push({type:"action",action:h,label:e.getMessage(Od[m].label),icon:"a-Icon icon-circle",iconStyle:"color: "+Od[m].value+";",value:Od[m].value});l=a("<div/>",{id:d._getId("color_menu")}).appendTo(this),l.menu({actionsContext:d.actions,items:s}),c.on("click",nb,function(d){var f,g,h=a(this);h.find(".ro-checkbox");g=c.grid("getRecords",[h.parent()])[0],f=!b.getValue(g,"isEnabled"),b.setValue(g,"enabledClass",f?jb:""),b.setValue(g,"enabledText",f?e.getMessage("APEX.IG.ENABLED"):e.getMessage("APEX.IG.DISABLED")),b.setValue(g,"isEnabled",f)}).on("keydown",nb,function(b){b.which===a.ui.keyCode.SPACE&&a(this).trigger("click")}),F(r,!0),f.recordView("fieldElement","isEnabled").hide(),f.recordView("fieldElement","hiddenValue").hide(),f.recordView("fieldElement","hiddenBetween").hide(),f.recordView("fieldElement","hiddenAnd").hide(),d._columnFilterInitActions(b,c,f,"HD",k),n.change(j)},validate:function(b){var c=!0;return b.forEach(function(f,g,h){switch(b.setValidity("valid",h,"between"),b.setValidity("valid",h,"and"),b.setValidity("valid",h,"value"),b.setValidity("valid",h,"expression"),b.setValidity("valid",h,"name"),b.setValidity("valid",h,"textColor"),b.setValidity("valid",h,"backgroundColor"),""===f.textColor&&""===f.backgroundColor&&(b.setValidity("error",h,"textColor",e.getMessage("APEX.IG.VALUE_REQUIRED")),b.setValidity("error",h,"backgroundColor",e.getMessage("APEX.IG.VALUE_REQUIRED"))),""===f.name&&b.setValidity("error",h,"name",e.getMessage("APEX.IG.VALUE_REQUIRED")),f.type){case Hb:switch(f.operator){case Zc:case $c:f.hiddenBetween&&""!==f.hiddenBetween||(c=!1,b.setValidity("error",h,"between",e.getMessage("APEX.IG.VALUE_REQUIRED"))),f.hiddenAnd&&""!==f.hiddenAnd||(c=!1,b.setValidity("error",h,"and",e.getMessage("APEX.IG.VALUE_REQUIRED"))),
c&&a.inArray(d._getColumn(f.columnId).filter.dataType,[rd,td,ud,vd])>-1&&(f.hiddenBetween!==j(i(f.hiddenBetween))&&(c=!1,b.setValidity("error",h,"between",e.getMessage("APEX.IG.INVALID_VALUE"))),f.hiddenAnd!==j(i(f.hiddenAnd))&&(c=!1,b.setValidity("error",h,"and",e.getMessage("APEX.IG.INVALID_VALUE"))));break;case _c:case bd:case ad:case cd:f.dateRangeValue&&""!==f.dateRangeValue||(c=!1,b.setValidity("error",h,"dateRangeValue",e.getMessage("APEX.IG.VALUE_REQUIRED"))),f.dateRangeUnit&&""!==f.dateRangeUnit||(c=!1,b.setValidity("error",h,"dateRangeUnit",e.getMessage("APEX.IG.VALUE_REQUIRED")));break;case Kc:case Lc:case Oc:case Pc:case Mc:case Nc:case Wc:case Xc:f.hiddenValue&&""!==f.hiddenValue?a.inArray(d._getColumn(f.columnId).filter.dataType,[rd,td,ud,vd])>-1&&f.hiddenValue!==j(i(f.hiddenValue))&&(c=!1,b.setValidity("error",h,"value",e.getMessage("APEX.IG.DATE_INVALID_VALUE"))):(c=!1,b.setValidity("error",h,"value",e.getMessage("APEX.IG.VALUE_REQUIRED")))}break;case Gb:f.hiddenValue&&""!==f.hiddenValue||(c=!1,b.setValidity("error",h,"value",e.getMessage("APEX.IG.VALUE_REQUIRED")))}}),c},store:function(b){var c,e,f,g,h,i=b.getChanges();for(c=0;c<i.length;c++){switch(e=i[c],g=e.record,g.type){case Gb:h={type:Gb,value:g.value,isCaseSensitive:g.isCaseSensitive===Bc};break;case Hb:h={type:Hb,value:g.hiddenValue,columnId:g.columnId,operator:g.operator,columnType:Hb,isCaseSensitive:g.isCaseSensitive===Bc},a.inArray(g.operator,[Wc,Xc])>-1&&(h.value=l(g.hiddenValue.split(Yc)).join("")),a.inArray(g.operator,[Zc,$c])>-1?h.value=g.hiddenBetween+Ac+g.hiddenAnd:a.inArray(g.operator,[_c,bd,ad,cd])>-1&&(h.value=g.dateRangeValue+Ac+g.dateRangeUnit)}f={id:g.id,seq:parseFloat(g.seq),name:g.name,type:g.highlightType,textColor:g.textColor,backgroundColor:g.backgroundColor,condition:h,isEnabled:g.isEnabled},g.highlightType===Hb?(f.type=Hb,f.columnType=Hb,f.columnId=g.highlightColumnId):g.highlightType===Gb&&(f.type=Gb,delete f.columnType,delete f.columnId),e.inserted?(delete f.id,d.addHighlight(f,{save:!1,refreshData:!0,skipNoChangesCheck:!0})):e.updated?d.updateHighlight(f.id,f,{save:!1,refreshData:!1,skipNoChangesCheck:!0}):e.deleted&&d.deleteHighlight(f.id,{save:!1,refreshData:!1,skipNoChangesCheck:!0})}d._setReportSettings({refreshModel:!0,changeIdentifier:"views.grid.highlights"})}})},_loadColumnOptions:function(a,b){var c,d,f,g=this.options.config.columns;for(a.push({value:"",label:e.getMessage("APEX.IG.SELECT")}),c=0;c<g.length;c++)f=g[c],f.specialType||!f.features[b]||f.isHidden||(d||(d=f),a.push({value:f.id,label:this._getColumnLabel(f.id)}));return d},_renderSortDialog:function(){var b,c=[],d=this;b=this._loadColumnOptions(c,"sort"),this._renderDialogContent(function(a){a(Ab,{id:"SD_COLUMN",required:!0,options:c}),d._renderSortControls(a,"SD_")}),this.sortDialog$=a.apex.recordView.createModelEditDialog(this._getId("sort-dialog"),{width:600,height:380,titleKey:"APEX.IG.SORT",modelName:this._getId("sort"),labelAlignment:Jb,formCssClasses:Ka+" "+La,useSplitter:!0,dialogHelp:{helpTextKey:"APEX.IG.HELP.SORT",titleKey:"APEX.IG.HELP.SORT_TITLE"},modelOptions:{editable:!0,onlyMarkForDelete:!1,identityField:"order",sequenceField:"seq",fields:{order:{canHide:!1,hidden:!0,seq:10},seq:{seq:20,canHide:!1,hidden:!0},columnId:{label:e.getMessage("APEX.IG.COLUMN"),heading:e.getMessage("APEX.IG.COLUMN"),headingAlignment:Jb,elementId:this._getId("SD_COLUMN"),isRequired:!0,seq:30,canHide:!0,hidden:!1},direction:{label:e.getMessage("APEX.IG.DIRECTION"),heading:e.getMessage("APEX.IG.DIRECTION"),headingAlignment:Jb,elementId:this._getId("SD_DIRECTION"),seq:40,defaultValue:nc,canHide:!0,hidden:!1},nulls:{label:e.getMessage("APEX.IG.NULLS"),elementId:this._getId("SD_NULLS"),seq:50,defaultValue:qc,canHide:!0,hidden:!0}}},load:function(a){var b,c,e=d.getSorts();for(b=0;b<e.length;b++)e[b].seq=b+1,e[b].order=b+1;return e.length>0?a.setData(e):c=a.insertNewRecord(),c},init:function(a,b,c){function e(){a.setValue(c.recordView("getRecord"),"columnId",g.val())}function f(){a.setValue(c.recordView("getRecord"),"direction",h.val())}var g=d._getElement("SD_COLUMN"),h=d._getElement("SD_DIRECTION");d._getElement("SD_NULLS");g.change(e),h.change(f)},validate:function(a){var b={},c=!0;return a.forEach(function(a,d,e){b[a.columnId]?c=!1:b[a.columnId]=!0}),c!==!1||e.getMessage("APEX.IG.SORT_ONLY_ONE_PER_COLUMN")},store:function(a){var b,c,e,f,g,h=a.getChanges(),i=d.getSorts();for(b=0;b<i.length;b++)i[b].seq=b+1;for(b=0;b<h.length;b++)if(e=h[b],f=e.record,g=e.original,f.seq=parseFloat(f.seq),e.inserted)i.push(f);else if(e.updated)if(g.columnId===f.columnId){for(c=0;c<i.length;c++)if(f.columnId===i[c].columnId){i[c]=f;break}}else{for(c=0;c<i.length;c++)if(g.columnId===i[c].columnId){i.splice(c,1);break}i.push(f)}else if(e.deleted)for(c=0;c<i.length;c++)if(f.columnId===i[c].columnId){i.splice(c,1);break}i.length>0&&(i=i.sort(function(a,b){return a.seq-b.seq})),h.length>0&&d.setSorts(i)}})},_renderAggregateDialog:function(){var b,c,d=[],f=this;b=this._loadColumnOptions(d,"aggregate"),c=[{value:Qd.CNT,label:e.getMessage("APEX.IG."+Qd.CNT)},{value:Qd.CNT_DIST,label:e.getMessage("APEX.IG."+Qd.CNT_DIST)},{value:Qd.MIN,label:e.getMessage("APEX.IG."+Qd.MIN)},{value:Qd.MAX,label:e.getMessage("APEX.IG."+Qd.MAX)},{value:Qd.MEDIAN,label:e.getMessage("APEX.IG."+Qd.MEDIAN)},{value:Qd.SUM,label:e.getMessage("APEX.IG."+Qd.SUM)},{value:Qd.AVG,label:e.getMessage("APEX.IG."+Qd.AVG)}],this._renderDialogContent(function(a){a(Ab,{id:"AD_COLUMN",required:!0,options:d}),a(Ab,{id:"AD_AGGREGATION",required:!0,options:c}),a(zb,{maxlength:"30",id:"AD_TOOLTIP"}),a(Db,{id:"AD_SHOW_GRAND_TOTAL",value:Bc})}),this.aggregateDialog$=a.apex.recordView.createModelEditDialog(this._getId("aggregate-dialog"),{width:600,height:380,titleKey:"APEX.IG.AGGREGATION",modelName:this._getId("aggregate"),labelAlignment:Jb,formCssClasses:Ka+" "+La,useSplitter:!0,dialogHelp:{helpTextKey:"APEX.IG.HELP.AGGREGATE",titleKey:"APEX.IG.HELP.AGGREGATE_TITLE"},modelOptions:{editable:!0,onlyMarkForDelete:!1,identityField:"id",fields:{id:{canHide:!1,hidden:!0,seq:0},columnId:{label:e.getMessage("APEX.IG.COLUMN"),heading:e.getMessage("APEX.IG.COLUMN"),headingAlignment:Jb,elementId:this._getId("AD_COLUMN"),isRequired:!0,defaultValue:"",seq:30,canHide:!0,hidden:!1},"function":{label:e.getMessage("APEX.IG.AGGREGATION"),heading:e.getMessage("APEX.IG.AGGREGATION"),headingAlignment:Jb,elementId:this._getId("AD_AGGREGATION"),isRequired:!0,seq:40,defaultValue:"",canHide:!0,hidden:!1},tooltip:{label:e.getMessage("APEX.IG.TOOLTIP"),elementId:this._getId("AD_TOOLTIP"),seq:50,defaultValue:"",canHide:!0,hidden:!0},showGrandTotal:{label:e.getMessage("APEX.IG.SHOW_OVERALL_VALUE"),elementId:this._getId("AD_SHOW_GRAND_TOTAL"),seq:60,defaultValue:Bc,canHide:!0,hidden:!0},isEnabled:{heading:e.getMessage("APEX.IG.ENABLED"),label:e.getMessage("APEX.IG.ENABLED"),alignment:Kb,defaultValue:!0,columnCssClasses:lb,seq:10,cellTemplate:"<span class='ro-checkbox &\"enabledClass\".'></span><span class='u-vh'>&\"enabledText\".</span>"},enabledClass:{"volatile":!0,canHide:!1,hidden:!0,seq:0,defaultValue:jb},enabledText:{"volatile":!0,canHide:!1,hidden:!0,seq:0,defaultValue:e.getMessage("APEX.IG.ENABLED")}}},load:function(c){function d(a){var b,d=f._getColumn(a);return i=d.filter.dataType===qd?Qd.SUM:Qd.CNT,b=c.insertNewRecord(null,null,{columnId:a,isEnabled:!0,enabledClass:jb,"function":i})}var g,h,i,j=[],k=a(this),l=k.dialog("option","id"),m=k.dialog("option","columnId"),n=f.getAggregates();if(n.length>0){for(g=0;g<n.length;g++)h=a.extend({id:"",columnId:"","function":"",tooltip:"",showGrandTotal:"",isEnabled:"",enabledClass:"",enabledText:""},n[g]),h.enabledClass=h.isEnabled?jb:"",h.enabledText=h.isEnabled?e.getMessage("APEX.IG.ENABLED"):e.getMessage("APEX.IG.DISABLED"),h.showGrandTotal=h.showGrandTotal?Bc:Cc,j.push(h);c.setData(j),m&&(l=d(m))}else l=d(m?m:b.id);return l},init:function(b,c,d){function g(){var c,g,i={},l=j.val();c=f._getColumn(l),l&&""!==l?(d.recordView("fieldElement","function").show(),d.recordView("fieldElement","tooltip").show(),d.recordView("fieldElement","showGrandTotal").show(),i[Qd.CNT]=e.getMessage("APEX.IG."+Qd.CNT),c.filter.dataType!==pd&&c.filter.dataType!==qd&&c.filter.dataType!==rd||(i[Qd.CNT_DIST]=e.getMessage("APEX.IG."+Qd.CNT_DIST),i[Qd.MIN]=e.getMessage("APEX.IG."+Qd.MIN),i[Qd.MAX]=e.getMessage("APEX.IG."+Qd.MAX)),c.filter.dataType!==qd&&c.filter.dataType!==rd||(i[Qd.MEDIAN]=e.getMessage("APEX.IG."+Qd.MEDIAN)),c.filter.dataType===qd&&(i[Qd.SUM]=e.getMessage("APEX.IG."+Qd.SUM),i[Qd.AVG]=e.getMessage("APEX.IG."+Qd.AVG)),g=k.val(),k.empty(),k.append(a("<option></option>").attr("value","").text(e.getMessage("APEX.IG.SELECT"))),a.each(i,function(b,c){k.append(a("<option></option>").attr("value",b).text(c))}),""!==g&&k.val(g),""!==k.val()&&null!==k.val()||(c.filter.dataType===qd?k.val(Qd.SUM):k.val(Qd.CNT)),b.setValue(d.recordView("getRecord"),"columnId",l),h()):(d.recordView("fieldElement","function").hide(),d.recordView("fieldElement","tooltip").hide(),d.recordView("fieldElement","showGrandTotal").hide(),b.setValue(d.recordView("getRecord"),"columnId",""),k.val("").change())}function h(){b.setValue(d.recordView("getRecord"),"function",k.val())}function i(){b.setValue(d.recordView("getRecord"),"showGrandTotal",l.prop("checked")?"Y":"N")}var j=f._getElement("AD_COLUMN"),k=f._getElement("AD_AGGREGATION"),l=f._getElement("AD_SHOW_GRAND_TOTAL");C(j),d.recordView("fieldElement","isEnabled").hide(),c.on("click",nb,function(d){var f,g,h=a(this),i=h.find(".ro-checkbox");f=!i.hasClass(jb),g=c.grid("getRecords",[h.parent()])[0],f=!b.getValue(g,"isEnabled"),b.setValue(g,"enabledClass",f?jb:""),b.setValue(g,"enabledText",f?e.getMessage("APEX.IG.ENABLED"):e.getMessage("APEX.IG.DISABLED")),b.setValue(g,"isEnabled",f)}).on("keydown",nb,function(b){b.which===a.ui.keyCode.SPACE&&a(this).trigger("click")}),j.change(g),k.change(h),l.change(i),d.on("apexbeginrecordedit",function(){g()})},validate:function(a){var b,c={},d=!0;return a.forEach(function(f,g,h){b=f.columnId.toString()+f["function"],c[b]?(d=!1,a.setValidity("error",h,"columnId",e.getMessage("APEX.IG.DUPLICATE_AGGREGATION")),a.setValidity("error",h,"function",e.getMessage("APEX.IG.DUPLICATE_AGGREGATION"))):(c[b]=!0,a.setValidity("valid",h,"columnId"),a.setValidity("valid",h,"function")),""===f.columnId&&(a.setValidity("error",h,"columnId",e.getMessage("APEX.IG.DUPLICATE_AGGREGATION")),d=!1)}),d},store:function(a){var b,c,d,e=a.getChanges();f._ifNoChangesDo(function(){for(b=0;b<e.length;b++)c=e[b],c.record.columnId&&""!==c.record.columnId&&(d=c.record,delete d.enabledClass,delete d.enabledText,d.showGrandTotal=d.showGrandTotal===Bc,c.inserted?(delete d.id,d.columnType=Hb,f.addAggregate(d,{save:!1,refreshData:!1,skipNoChangesCheck:!0})):c.updated?f.updateAggregate(d.id,d,{save:!1,refreshData:!1,skipNoChangesCheck:!0}):c.deleted&&f.deleteAggregate(d.id,{save:!1,refreshData:!1,skipNoChangesCheck:!0}));f._setReportSettings({refreshModel:!0,changeIdentifier:"views.grid.aggregations"})})}})},_renderControlBreakDialog:function(){var b,c=[],d=this;b=this._loadColumnOptions(c,"sort"),this._renderDialogContent(function(a){a(Ab,{id:"CBD_COLUMN",required:!0,options:c}),d._renderSortControls(a,"CBD_")}),this.controlBreakDialog$=a.apex.recordView.createModelEditDialog(this._getId("controlbreak-dialog"),{width:600,height:380,titleKey:"APEX.IG.CONTROL_BREAK",modelName:this._getId("controlbreak"),labelAlignment:Jb,formCssClasses:Ka+" "+La,useSplitter:!0,dialogHelp:{helpTextKey:"APEX.IG.HELP.CONTROL_BREAK",titleKey:"APEX.IG.HELP.CONTROL_BREAK_TITLE"},modelOptions:{editable:!0,onlyMarkForDelete:!1,identityField:"id",sequenceField:"sequenceField",fields:{id:{canHide:!1,hidden:!0,seq:0},sequenceField:{seq:0,canHide:!1,hidden:!0},oldColumnId:{seq:0,canHide:!1,hidden:!0},columnId:{label:e.getMessage("APEX.IG.COLUMN"),heading:e.getMessage("APEX.IG.COLUMN"),headingAlignment:Jb,elementId:this._getId("CBD_COLUMN"),isRequired:!0,seq:20,canHide:!0,hidden:!1},direction:{label:e.getMessage("APEX.IG.DIRECTION"),heading:e.getMessage("APEX.IG.DIRECTION"),elementId:this._getId("CBD_DIRECTION"),seq:30,defaultValue:nc,canHide:!0,hidden:!0},nulls:{label:e.getMessage("APEX.IG.NULLS"),elementId:this._getId("CBD_NULLS"),seq:40,defaultValue:qc,canHide:!0,hidden:!0},isEnabled:{heading:e.getMessage("APEX.IG.ENABLED"),label:e.getMessage("APEX.IG.ENABLED"),alignment:Kb,defaultValue:!0,columnCssClasses:lb,seq:10,cellTemplate:"<span class='ro-checkbox &\"enabledClass\".'></span><span class='u-vh'>&\"enabledText\".</span>"},enabledClass:{"volatile":!0,canHide:!1,hidden:!0,seq:0,defaultValue:jb}}},load:function(c){var e,f,g,h,i=[],j=a(this).dialog("option","id"),k=d._getCurrentView().columns;for(e=0;e<k.length;e++)f=k[e],h=f["break"],h&&(g=a.extend({},{id:f.columnId,columnId:f.columnId,oldColumnId:f.columnId,direction:f.direction,nulls:f.nulls,sequenceField:parseFloat(h.order),isEnabled:h.isEnabled,enabledClass:h.isEnabled?jb:""}),i.push(g));return i.length>0?(i.sort(function(a,b){return a.sequenceField<b.sequenceField?-1:a.sequenceField>b.sequenceField?1:0}),c.setData(i)):j=c.insertNewRecord({isEnabled:!0,id:b.columnId,columnId:b.columnId,oldColumnId:b.columnId,direction:b.sort?b.sort.direction:nc,nulls:b.sort?b.sort.nulls:qc}),j},init:function(b,c,e){function f(){b.setValue(e.recordView("getRecord"),"columnId",g.val()),""===g.val()?D([h,i]):C([h,i])}var g=d._getElement("CBD_COLUMN"),h=d._getElement("CBD_DIRECTION"),i=d._getElement("CBD_NULLS");c.on("click",nb,function(d){var e,f,g=a(this),h=g.find(".ro-checkbox");e=!h.hasClass(jb),f=c.grid("getRecords",[g.parent()])[0],e=!b.getValue(f,"isEnabled"),b.setValue(f,"enabledClass",e?jb:""),b.setValue(f,"isEnabled",e)}).on("keydown",nb,function(b){b.which===a.ui.keyCode.SPACE&&a(this).trigger("click")}),g.change(f),h.change(function(){b.setValue(e.recordView("getRecord"),"direction",h.val())}),i.change(function(){b.setValue(e.recordView("getRecord"),"nulls",i.val())}),e.recordView("fieldElement","isEnabled").hide(),e.on("apexbeginrecordedit",f)},validate:function(a){var b={},c=!0;return a.forEach(function(d,f,g){b[d.columnId]?(c=!1,a.setValidity("error",g,"columnId",e.getMessage("APEX.IG.DUPLICATE_CONTROLBREAK"))):b[d.columnId]=!0,""===d.columnId&&(c=!1)}),c},store:function(a){var b,c,e,f=a.getChanges();d._ifNoChangesDo(function(){function a(){d.addControlBreak(d._currentViewImpl().modelColumns[d._getColumn(e.columnId).name],{isEnabled:e.isEnabled,order:parseFloat(e.sequenceField),direction:e.direction,nulls:e.nulls},{save:!1,refreshData:!1,skipNoChangesCheck:!0})}for(b=0;b<f.length;b++)c=f[b],e=c.record,c.inserted?a():c.updated?e.columnId!==e.oldColumnId?(d.deleteControlBreak(e.oldColumnId,{save:!1,refreshData:!1,skipNoChangesCheck:!0}),a()):d.updateControlBreak(e.columnId,{isEnabled:e.isEnabled,order:parseFloat(e.sequenceField),direction:e.direction,nulls:e.nulls},{save:!1,refreshData:!1,skipNoChangesCheck:!0}):c.deleted&&d.deleteControlBreak(e.columnId,{save:!1,refreshData:!1,skipNoChangesCheck:!0});d._setReportSettings({refreshModel:!0,refreshColumns:!0})})}})},_addActions:function(c){var d=this,f=this.options.config;c.add([{name:"search-case-sensitive",labelKey:"APEX.IG.CASE_SENSITIVE",value:!1,get:function(){return d.searchCaseSensitive},set:function(a){d.searchCaseSensitive=a}},{name:"filter-column",labelKey:"APEX.IG.SELECT_COLUMNS_TO_SEARCH",get:function(){return d.currentFilterColumnId},set:function(a){d._setFilterColumn(a)}},{name:"search",labelKey:"APEX.IG.GO",getSearchValue:function(){var a="";return f.toolbar&&f.toolbar.searchField&&f.toolbarData&&(a=d.toolbar$.toolbar("findElement","search_field").val()),a},action:function(){var a,b=this.getSearchValue();b?(a=d.currentFilterColumnId?{type:Hb,columnType:Hb,columnId:d.currentFilterColumnId,operator:Uc,value:b,isCaseSensitive:d.searchCaseSensitive}:{type:Gb,value:b,isCaseSensitive:d.searchCaseSensitive},d.addFilter(a)):d.refresh()}},{name:"change-report",labelKey:"APEX.IG.SAVED_REPORTS",hide:!0,choices:[],get:function(){return d._report()},set:function(a){d._report(a)}},{name:"change-view",labelKey:"APEX.IG.CHANGE_VIEW",choices:[],get:function(){return d._view()},set:function(a){d._view(a,{fetchData:!0})}},{name:"show-columns-dialog",labelKey:"APEX.IG.COLUMNS",icon:"icon-ig-select-cols",action:function(){d._openDialog(cc)}},{name:"show-filter-dialog",labelKey:"APEX.IG.FILTER",icon:"icon-ig-filter",hide:!0,action:function(){d._openDialog(dc)}},{name:"chart-view",labelKey:"APEX.IG.CHART",icon:"icon-ig-chart",action:function(){d._currentReportSettings();d.viewsImpl[Ub].isConfigured()&&d._view(Ub,{fetchData:!0}),d.viewsImpl[Ub].openDialog()}},{name:"show-sort-dialog",labelKey:"APEX.IG.SORT",icon:"icon-ig-sort",action:function(){d._openDialog(gc)}},{name:"show-aggregate-dialog",labelKey:"APEX.IG.AGGREGATE",icon:"icon-ig-aggregate",action:function(){d._openDialog(hc)}},{name:"show-flashback-dialog",labelKey:"APEX.IG.FLASHBACK",icon:"icon-ig-flashback",hide:!0,action:function(){d._openDialog(fc)}},{name:"show-highlight-dialog",labelKey:"APEX.IG.HIGHLIGHT",icon:"icon-ig-highlight",hide:!0,action:function(){d._openDialog(ec)}},{name:"show-control-break-dialog",labelKey:"APEX.IG.CONTROL_BREAK",icon:"icon-ig-control-break",action:function(){d._openDialog(ic)}},{name:"change-rows-per-page",labelKey:"APEX.IG.ROWS_PER_PAGE",choices:[{labelKey:"APEX.IG.AUTO",value:"null"},{label:"5",value:5},{label:"10",value:10},{label:"15",value:15},{label:"20",value:20},{label:"25",value:25},{label:"50",value:50},{label:"100",value:100},{label:"1000",value:1e3}],get:function(){var a=d._currentReportSettings().rowsPerPage;return null===a?"null":a},set:function(a){var b=d._currentReportSettings();a="null"===a?null:parseInt(a,10),d._currentViewImpl().setOption("rowsPerPage",a),b.rowsPerPage=a,d._setOperationUpdate(b),d._setReportSettings({refreshView:!0})}},{name:"save-report",labelKey:"APEX.IG.SAVE",icon:"icon-ig-save",action:function(){var a=d._currentReportSettings();d.updateReport(a.id,a)}},{name:"show-save-report-as-dialog",labelKey:"APEX.IG.SAVE_AS",icon:"icon-ig-save-as",action:function(){d._openDialog(kc)}},{name:"show-edit-report-dialog",labelKey:"APEX.IG.EDIT",icon:"icon-ig-edit",action:function(){d._openDialog(jc)}},{name:"delete-report",labelKey:"APEX.IG.DELETE",icon:"icon-ig-delete",action:function(){apex.message.confirm(e.getMessage("APEX.IG.DELETE_REPORT_CONFIRM"),function(a){a&&d.deleteReport(d._report())})}},{name:"show-download-dialog",labelKey:"APEX.IG.DOWNLOAD",icon:"icon-ig-download",hide:!0,action:function(){d._openDialog(lc)}},{name:"show-help-dialog",labelKey:"APEX.IG.HELP",icon:"icon-ig-help",action:function(){function c(){function c(b,c){var d=a.extend({headingKey:"",helpText:"",helpTextKey:""},c);d.headingKey&&b.markup("<h2>").content(e.getMessage(d.headingKey)).markup("</h2>"),d.helpText&&b.markup("<div").attr("class","apex-help-custom").markup(">").markup(d.helpText).markup("</div>"),d.helpTextKey&&b.markup("<p>").markup(e.getMessage(d.helpTextKey)).markup("</p>")}var d=b.htmlBuilder();i.text.help&&c(d,{helpText:i.text.help}),c(d,{headingKey:"APEX.IG.HELP.ACTIONS.INTRO_HEADING",helpTextKey:"APEX.IG.HELP.ACTIONS.INTRO"}),c(d,{headingKey:"APEX.IG.HELP.ACTIONS.REPORTING_HEADING",helpTextKey:"APEX.IG.HELP.ACTIONS.REPORTING"}),i.editable&&c(d,{headingKey:"APEX.IG.HELP.ACTIONS.EDITING_HEADING",helpTextKey:"APEX.IG.HELP.ACTIONS.EDITING"}),h.popupFieldHelp({title:e.getMessage("APEX.IG.HELP.ACTIONS_TITLE"),helpText:d.toString()})}var f,g=[],i=d.options.config,j=["APEX.IG.HELP.ACTIONS.INTRO_HEADING","APEX.IG.HELP.ACTIONS.INTRO","APEX.IG.HELP.ACTIONS.REPORTING_HEADING","APEX.IG.HELP.ACTIONS.REPORTING","APEX.IG.HELP.ACTIONS.EDITING_HEADING","APEX.IG.HELP.ACTIONS.EDITING"];for(f=0;f<j.length;f++)e.hasMessage(j[f])||g.push(j[f]);g.length>0?e.loadMessages(g).done(function(){c()}):c()}},{name:"selection-duplicate",type:"action",labelKey:"APEX.IG.DUPLICATE_ROWS",icon:"icon-ig-duplicate",hide:!0,action:function(){var a,b=d._currentViewImpl();if(b.supports.edit&&(a=b.getSelectedRecords(),a.length>0))return b.model.copyRecords(a,null,a[a.length-1]),!0}},{name:"selection-delete",labelKey:"APEX.IG.DELETE_ROWS",icon:"icon-ig-delete",hide:!0,action:function(){var a,b,c=d._currentViewImpl();if(c.supports.edit){for(b=c.getSelectedRecords(),a=0;a<b.length;a++)c.model.allowDelete(b[a])||(b.splice(a,1),a-=1);b.length>0&&c.model.deleteRecords(b)}}},{name:"selection-refresh",labelKey:"APEX.IG.REFRESH_ROWS",icon:"icon-ig-refresh",hide:!0,action:function(){var a,b=d._currentViewImpl();b.supports.edit&&(a=b.getSelectedRecords(),a.length>0&&b.model.fetchRecords(a))}},{name:"selection-revert",labelKey:"APEX.IG.REVERT_CHANGES",icon:"icon-ig-revert",hide:!0,action:function(){var a,b,c=d._currentViewImpl();if(c.supports.edit){for(b=c.getSelectedRecords(),a=0;a<b.length;a++)c.model.canRevertRecord(b[a])||(b.splice(a,1),a-=1);b.length>0&&c.model.revertRecords(b)}}},{name:"refresh",labelKey:"APEX.IG.REFRESH",icon:"icon-ig-refresh",action:function(){d.refresh()}},{name:"reset-report",labelKey:"APEX.IG.RESET",disabled:!0,icon:"icon-ig-reset",action:function(){d._resetReportSettings()}},{name:"edit",labelKey:"APEX.IG.EDIT",hide:!0,get:function(){return d.editMode},set:function(a){d._setEditMode(a)}},{name:"save",labelKey:"APEX.IG.SAVE",hide:!0,shortcut:"Ctrl+Alt+S",action:function(){var a,b=d.editableViewImpl.model.name;apex.model.anyErrors(!1,b,!0)?apex.message.alert(e.getMessage("APEX.CORRECT_ERRORS"),function(){}):(a=apex.model.save(null,null,b,!0),a&&(a.done(function(a){var b,c,f="",g="";if(a.errors)apex.message.clearErrors(),apex.message.showErrors(a.errors),f="error";else if(a.regions){for(b=0;b<a.regions.length;b++)c=a.regions[b],c.fetchedData&&c.fetchedData.successMessage&&(g&&(g+="<br>"),g+=c.fetchedData.successMessage);g||(g=e.getMessage("APEX.IG.CHANGES_SAVED")),apex.message.showPageSuccess(g),f="success"}d._trigger(_d,null,{status:f})}).fail(function(a,b,c){d._trigger(_d,null,{status:"fail"})}).always(function(){d.actions.enable("save")}),d.actions.disable("save")))}},{name:"selection-add-row",label:f.text.addRowButton,hide:!0,action:function(){var a=d._currentViewImpl(),b=a.getSelectedRecords();return a.focus(),a.model.insertNewRecord(null,b[b.length-1]),!0}},{name:"single-row-view",label:e.getMessage("APEX.IG.SINGLE_ROW_VIEW"),icon:"icon-ig-single-row-view",hide:!0,action:function(b,c){var e,f,g=null,h=d.editMode,i=d._currentViewImpl();i.supports.singleRowView&&i.singleRowView$.length&&!i.singleRowMode&&(c&&(f=a(c).closest("tr"),f.length>0&&(g=i.view$.grid("getRecords",[f])[0])),g||(g=i.getSelectedRecords()[0]),h&&i.view$.grid("setEditMode",!1),i.singleRowMode=!0,i.view$.hide(),i.singleRowView$.show().recordView("resize"),g&&(e=i.model.indexOf(g),e>=0&&i.singleRowView$.recordView("option","recordOffset",e)),h&&i.singleRowView$.recordView("setEditMode",!0))}},{name:"row-add-row",label:e.getMessage("APEX.IG.ADD_ROW"),icon:"icon-ig-add-row",hide:!0,action:function(a,b){var c=d._currentViewImpl(),e=c.getContextRecord(b);return c.focus(),c.model.insertNewRecord(null,e[0]),!0}},{name:"row-duplicate",label:e.getMessage("APEX.IG.DUPLICATE_ROW"),icon:"icon-ig-duplicate",hide:!0,action:function(a,b){var c=d._currentViewImpl(),e=c.getContextRecord(b);return c.model.copyRecords(e,null,e[0]),!0}},{name:"row-delete",label:e.getMessage("APEX.IG.DELETE_ROW"),icon:"icon-ig-delete",hide:!0,action:function(a,b){var c=d._currentViewImpl(),e=c.getContextRecord(b);c.model.deleteRecords(e)}},{name:"row-refresh",label:e.getMessage("APEX.IG.REFRESH_ROW"),icon:"icon-ig-refresh",hide:!0,action:function(a,b){var c=d._currentViewImpl(),e=c.getContextRecord(b);c.model.fetchRecords(e)}},{name:"row-revert",label:e.getMessage("APEX.IG.REVERT_CHANGES"),icon:"icon-ig-revert",hide:!0,action:function(a,b){var c=d._currentViewImpl(),e=c.getContextRecord(b);c.model.revertRecords(e)}}])},_initToolbar:function(){var a,b=this;delete this.options.config.toolbarData.toolbarFind,this.toolbar$=this._getElement("toolbar").toolbar({actionsContext:this.actions,data:this.options.config.toolbarData}),a=this.toolbar$.toolbar("findElement","actions_button_menu"),this.toolbar$.toolbar("findElement","column_filter_button").hide(),this.toolbar$.toolbar("findElement","search_field").hide(),this.toolbar$.toolbar("findElement","actions_button").hide(),this._currentReportSettings().defaultFilterColumn?this._setFilterColumn(this._currentReportSettings().defaultFilterColumn.columnId):this._setFilterColumn(null),a.on("menubeforeopen",function(){a.menu("find","rows").hide=b.options.config.pagination.type!==tc})},_getId:function(a){return a?this.idPrefix+"_"+a:""},_getIdSelector:function(a){return"#"+this._getId(a)},_getElement:function(b){return a(this._getIdSelector(b))},_setEditMode:function(a){function b(){f.setEditMode(h.editMode),a&&setTimeout(function(){f.focus()},100)}var c,d,e={},f=this._currentViewImpl(),g=!1,h=this,i=this.options.config.columns;if(this.editMode=a,a){for(c=0;c<i.length;c++)i[c].validation&&i[c].validation.isRequired&&(e[i[c].id]=i[c]);if(Object.keys(e).length>0){for(d=this._getCurrentView().columns,c=0;c<d.length;c++)e[d[c].columnId]&&!d[c].isVisible&&(d[c].isVisible=!0,this._setOperationUpdate(d[c]),g=!0);g&&this._setReportSettings({changeIdentifier:"views.grid.columns"},b)}}g||b()},_configureView:function(a){this._currentReportSettings();this.viewsImpl[a].isConfigured()&&this._view(a,{fetchData:!0}),this.viewsImpl[a].openDialog()},_getColumn:function(a){return this.columnMap[a]},_getColumnByName:function(a){var b,d=this.options.config.columns;for(b=0;b<d.length;b++)if(d[b].name===a)return d[b];c.warn("No column exists with name: ",a)},_getColumnByStaticId:function(a){var b,d=this.options.config.columns;for(b=0;b<d.length;b++)if(d[b].staticId===a)return d[b];c.warn("No column exists with static ID: ",a)},_getTextTransformClass:function(a){var b,c=a.filter.textCase,d={lower:pb,upper:qb};return c&&(b=d[c.toLowerCase()]),b},_convertNamesToLabels:function(a){var b,c=this.options.config.columns,d={};for(b=0;b<c.length;b++)d[c[b].name]=c[b].heading.label;return a&&""!==a?a.replace(/(")(.*?)(")/g,function(a,b,c,e){return'"'+d[c]+'"'}):a},_convertLabelsToNames:function(a){var b,c=this.options.config.columns,d={};for(b=0;b<c.length;b++)d[c[b].heading.label]=c[b].name;return a&&""!==a?a.replace(/(")(.*?)(")/g,function(a,b,c){return'"'+d[c]+'"'}):a},_getColumnFormatMask:function(a){var b,d,e=this._getColumn(a).appearance.dateFormatMask;if(e&&""!==e){b=apex.jQuery.datepicker.parseDate("yymmdd","20160302");try{d=apex.jQuery.datepicker.parseDate(e,apex.jQuery.datepicker.formatDate(e,b)),apex.jQuery.datepicker.formatDate("yymmdd",b)!==apex.jQuery.datepicker.formatDate("yymmdd",d)&&(c.warn("Date format mask is unusable for a date picker - using default: ",e),e="yy-mm-dd")}catch(f){c.warn("Date format mask is unusable for a date picker - using default: ",e),e="yy-mm-dd"}}else c.warn("No date format mask exists for column - using default: ",a),e="yy-mm-dd";return e},_getColumnLabel:function(a){var b,d=this._getColumn(a);return d.isHidden?c.info("_getColumnLabel called on hidden column, check calling logic",a):b=d.heading.label,b},_isColumnFilterable:function(a){var b=this._getColumn(a);return!b.specialType&&b.filter&&!b.isHidden},_hasColumnFilterLov:function(a){var b=this._getColumn(a);return b.filter&&b.filter.hasLov},_getColumnType:function(a){this._getColumn(a);return Hb},_unfreezeLastColumnWhenFrozen:function(){var a,b,c,d=this._currentReportSettings().views.grid.columns,e=this._currentViewImpl().view$.grid("getColumns"),f=0,g=!1,h=!1;for(c=0;c<d.length;c++)d[c]&&d[c].isVisible&&!this._getColumn(d[c].columnId).isHidden&&d[c].seq>f&&(f=d[c].seq,g=c);if(g!==!1){for(a=d[g],c=0;c<e.length;c++)a.columnId!==e[c].id||e[c].hidden||(b=e[c]);a.isFrozen&&(a.isFrozen=!1,b.frozen=!1,h=!0,this._setOperationUpdate(a))}return h},_getCurrentView:function(){return this.options.savedReports[this.currentSavedReportIdx].views[this._view()]},_currentViewImpl:function(){return this.viewsImpl[this._view()]},_view:function(b,c){var d,e=this,f=this.options.config,g=this.actions,h=!1,i=!1,j=this._currentReportSettings();return b?void this._ifNoChangesDo(function(){var k,l,m,n,o,p,q=!1,r=[],s=a.extend({initialData:null,fetchData:!1},c);if(m=e._currentViewImpl(),e.viewsImpl[b].isConfigured()){j.currentView=b,l=e._currentViewImpl(),o=f.views[b].features,p=l.supports,e._refreshReportSettings(),m&&m.view$&&m.hide(),l.view$?(l.show(),n=l.model.getOption("regionData"),n.view=b,e._setReportSettings()):(e._getElement(l.elementId).show(),l.view$=e._getElement(l.elementId),l.setColumnConfig({baseModelColumns:e.baseModelColumns,igConfig:e.options.config,ig:e,currentReportSettings:j}),s.viewImpl=l,e._setModel(s),e.options.config&&s.viewImpl.supports.edit&&(e.editableViewImpl=s.viewImpl),l.init({ig$:e.element,ig:e,igConfig:e.options.config,currentReportSettings:j}),q=!0),r.push({labelKey:"APEX.IG.ALL_TEXT_COLUMNS",value:null});for(k in l.modelColumns)if(l.modelColumns.hasOwnProperty(k)&&l.modelColumns[k].id&&e._isColumnFilterable(l.modelColumns[k].id)&&(h=!0,a.inArray(e._getColumn(l.modelColumns[k].id).filter.dataType,[pd,sd])!==-1))for(d=0;d<e._getColumn(l.modelColumns[k].id).filter.operators.length;d++)a.inArray(e._getColumn(l.modelColumns[k].id).filter.operators[d].name,["$perform$","C"])!==-1&&(i=!0,r.push({label:l.modelColumns[k].label,value:l.modelColumns[k].id}));f.filter.oracleText&&(i=!0),g.lookup("filter-column").choices=r,g.updateChoices("filter-column"),e._updateChangeViewActions(),e._toggleEnableAction(i,"search"),f.toolbar&&f.toolbar.searchField&&f.toolbar.columnSelection&&e.getToolbar().toolbar("findElement","column_filter_button").prop("disabled",!i),l.resize(),e._toggleEnableAction(f.editable&&p.edit,["edit","save","selection-add-row"]),e._toggleEnableAction(p.controlBreak&&o.controlBreak,"show-control-break-dialog"),e._toggleEnableAction(p.aggregation&&o.aggregate,"show-aggregate-dialog"),e._toggleEnableAction(p.highlight&&o.highlight,"show-highlight-dialog"),e._toggleEnableAction(p.changeRowsPerPage&&o.changeRowsPerPage,"change-rows-per-page"),e._toggleEnableAction(p.singleRowView&&o.singleRowView,"single-row-view"),e._toggleEnableAction(p.configurableColumns,"show-columns-dialog"),e._toggleEnableAction(p.filter&&f.features.filter,"show-filter-dialog"),h||e._toggleEnableAction(!1,"show-filter-dialog"),e._toggleEnableAction(p.sort,"show-sort-dialog"),e._toggleEnableAction(p.download&&f.features.download,"show-download-dialog"),e._trigger(Xd,null,{view:b,created:q}),e._selectionChanged()}else e.viewsImpl[b].openDialog()}):j.currentView},_destroyAllModels:function(){var a=this;this._forEachView(function(b,c){a._setModel({viewImpl:c,remove:!0}),c.view$&&(c.destroy(),c.view$=null)})},_report:function(a){var b,c,d;if(!a)return this._currentReportSettings().id;for(this._destroyAllModels(),apex.message.hidePageSuccess(),b=0;b<this.options.savedReports.length;b++)if(this.options.savedReports[b].id===a){this.currentSavedReportIdx=b;break}c=this._currentViewImpl(),this._forEachView(function(a,b){b.view$&&b.hide()}),c.view$||(c.view$=this._getElement(c.elementId)),c.view$.show(),c.setColumnConfig({baseModelColumns:this.baseModelColumns,igConfig:this.options.config,currentReportSettings:this._currentReportSettings(),ig:this}),this._setModel({viewImpl:c}),c.init({ig$:this.element,ig:this,igConfig:this.options.config,currentReportSettings:this._currentReportSettings()}),this._updateActions(),this._updateChangeViewActions(),this._clearToolbarSearch(),this._trigger(Xd,null,{view:c.internalIdentifier,created:!0}),this._refreshReportSettings(),d=c.model.getOption("regionData"),d.reportId=this._report(),d.view=this._view(),this.refresh(),this._trigger(Yd,null,{report:this._report()})},_currentReportSettings:function(){return this.options.savedReports[this.currentSavedReportIdx]},_shortenString:function(a,b){var c=b?b:20;return a.length>c?a.substr(0,c)+"...":a},_adjustControlBreakSort:function(){var b,c,d=[],e=this,f=e._getCurrentView().columns;
for(b=0;b<f.length;b++)!f[b].sort||null===f[b].sort.order||f[b]["break"]&&f[b]["break"].isEnabled||d.push({columnId:f[b].columnId,order:f[b].sort.order});for(d.sort(function(a,b){return a.order-b.order}),b=0;b<d.length;b++)for(c=0;c<f.length;c++)d[b].columnId===f[c].columnId&&a.extend(e._currentViewImpl().modelColumns[e._getColumn(f[c].columnId).name],{sortIndex:b+1})},_getSettingLabel:function(b,c){function d(a,b){return a&&null!==a.match(/^\d{14}/)?apex.jQuery.timepicker.formatCanonicalDate(i(a),b):""}var f,g,h="APEX.IG.",j=[Kc,Lc,Oc,Pc,Mc,Nc,Qc,Rc,Uc,Vc,dd,ed,fd,gd],k=[Sc,Tc],l=[Zc,$c],m=[_c,ad,bd,cd];switch(b){case dc:switch(c.type){case Hb:h+="X.",a.inArray(c.operator,j)>-1&&(h+=Pd[c.operator]+".Y",f=a.inArray(this._getColumn(c.columnId).filter.dataType,[rd,td,vd])>-1?e.formatMessage(h,this._getColumnLabel(c.columnId),d(c.hiddenValue?c.hiddenValue:c.value,this._getColumnFormatMask(c.columnId))):e.formatMessage(h,this._getColumnLabel(c.columnId),c.value)),a.inArray(c.operator,[Wc,Xc])>-1&&(h+=Pd[c.operator]+".Y",f=e.formatMessage(h,this._getColumnLabel(c.columnId),c.value.split("").join(Yc+" "))),a.inArray(c.operator,k)>-1&&(h+=Pd[c.operator],f=e.formatMessage(h,this._getColumnLabel(c.columnId))),a.inArray(c.operator,l)>-1&&(h+=Pd[c.operator]+".Y.AND.Z",g=c.hiddenBetween||c.hiddenAnd?[c.hiddenBetween,c.hiddenAnd]:c.value.split(Ac),f=a.inArray(this._getColumn(c.columnId).filter.dataType,[rd,td,vd])>-1?e.formatMessage(h,this._getColumnLabel(c.columnId),d(g[0],this._getColumnFormatMask(c.columnId)),d(g[1],this._getColumnFormatMask(c.columnId))):e.formatMessage(h,this._getColumnLabel(c.columnId),g[0],g[1])),a.inArray(c.operator,m)>-1&&(g=c.value.split(Ac),2!==g.length&&(g=["","MI"]),"1"===g[0]?(h+=Pd[c.operator]+"_"+Sd[g[1]],f=e.formatMessage(h,this._getColumnLabel(c.columnId))):(h+=Pd[c.operator]+".Y."+Sd[g[1]]+"S",f=e.formatMessage(h,this._getColumnLabel(c.columnId),g[0])));break;case Ib:f=c.name;break;case Gb:h+="SEARCH_FOR.X",f=e.formatMessage(h,c.value)}break;case ic:f=this._getColumnLabel(c.columnId);break;case hc:f=e.getMessage("APEX.IG."+c["function"])+" ("+this._getColumnLabel(c.columnId)+")";break;case ec:f=this._shortenString(c.name?c.name:this._getColumnLabel(c.condition.columnId));break;case fc:1===c.minsAgo?(h+="REPORT_DATA_AS_OF_ONE_MINUTE_AGO",f=e.getMessage(h)):(h+="REPORT_DATA_AS_OF.X.MINUTES_AGO",f=e.formatMessage(h,c.minsAgo))}return f},_getSettingSummaryLabel:function(a,b){var c,d="APEX.IG.";switch(a){case dc:switch(b.type){case Hb:c=this._getColumnLabel(b.columnId);break;case Ib:c=this._shortenString(b.name);break;case Gb:c="'"+this._shortenString(b.value,18)+"'"}break;case ic:c=this._getColumnLabel(b.columnId);break;case ec:c=this._shortenString(b.name?b.name:this._getColumnLabel(b.condition.columnId));break;case fc:1===b.minsAgo?(d+="ONE_MINUTE_AGO",c=e.getMessage(d)):(d+="X.MINUTES_AGO",c=e.formatMessage(d,b.minsAgo));break;case hc:c=this._shortenString(this._getColumnLabel(b.columnId))}return c},_getTotalReportSettings:function(){var a,b=0,c=this._getCurrentView(),d=this._currentReportSettings();switch(d.filters&&(b+=d.filters.length),d.flashback&&(b+=1),this._view()){case Rb:for(a=0;a<c.columns.length;a++)c.columns[a]["break"]&&(b+=1);c.highlights&&(b+=c.highlights.length),c.aggregations&&(b+=c.aggregations.length);break;case Ub:c&&(b+=1)}return b},_renderReportSettings:function(b){function c(b){function c(b,c){var d={},f=a.extend({type:"",id:"",active:!1,label:"",excludeToggle:!1,isInvalid:!1},c),g=$+" "+_+f.type;d.setting=f.type,d["setting-id"]=f.id,f.isInvalid&&(g+=" "+kb),b.markup("<li").attr("class",g).attr("role","group").attr(wb,"control_text"+f.id).markup(">"),b.markup("<span").attr("class",aa).markup(">"),f.excludeToggle||(u(b,{id:h._getId("control_"+f.id),cssClasses:da,checked:f.active,data:d,disabled:f.isInvalid}),y(b,{labelFor:h._getId("control_"+f.id),cssClasses:ea,label:e.getMessage("APEX.IG.TOGGLE"),labelTextHidden:!0})),b.markup("</span>"),b.markup("<span").attr("class",aa).markup(">").markup("<span").attr("class",ab+" "+fa+" "+ua+m(f.type)).markup(">").markup("</span>").markup("</span>"),b.markup("<span").attr("class",aa+" "+ba).markup(">"),f.isInvalid?b.markup("<span").attr("id","control_text"+f.id).attr("class",ga).markup(">").markup(f.label).markup("</span>"):(b.markup("<a href='#'").attr("class",ga).attr("data-setting",f.type).attr("data-setting-id",f.id).markup(">"),b.markup("<span").attr("class",ob).markup(">").content(e.getMessage("APEX.IG.EDIT")).markup("</span>"),b.markup("<span").attr("id","control_text"+f.id).markup(">").markup(f.label).markup("</span>"),b.markup("</a>")),b.markup("</span>"),b.markup("<span").attr("class",aa+" "+ca).markup(">"),x(b,{buttonClass:Va+" "+Wa+" "+ra+" "+ta,iconOnly:!0,icon:db,label:e.formatMessage("APEX.IG.REMOVE_CONTROL",Rd[f.type]),data:d}),b.markup("</span>"),b.markup("</li>")}if(b.markup("<div").attr("class",gb).markup(">"),b.markup("<ul").attr("class",Z).markup(">"),j.views.chart&&h._view()===Ub&&c(b,{type:Ub,excludeToggle:!0,label:e.getMessage("APEX.IG.EDIT_CHART")}),j.filters)for(f=0;f<j.filters.length;f++)j.filters[f].operation!==xc&&c(b,{type:dc,id:j.filters[f].id,active:j.filters[f].isEnabled,label:h._getSettingLabel(dc,j.filters[f]),isInvalid:j.filters[f].isInvalid});if(h._currentViewImpl().supports.controlBreak&&i){for(f=0;f<i.columns.length;f++)i.columns[f]["break"]&&i.columns[f]["break"].operation!==xc&&g.push(i.columns[f]);if(g.length>0)for(g.sort(function(a,b){var c=a["break"].order,d=b["break"].order;return c<d?-1:c>d?1:0}),f=0;f<g.length;f++)c(b,{type:ic,id:g[f].columnId,active:g[f]["break"].isEnabled,label:h._getSettingLabel(ic,g[f])})}if(h._currentViewImpl().supports.highlight&&i.highlights)for(f=0;f<i.highlights.length;f++)i.highlights[f].operation!==xc&&c(b,{type:ec,id:i.highlights[f].id,active:i.highlights[f].isEnabled,label:h._getSettingLabel(ec,i.highlights[f]),isInvalid:i.highlights[f].isInvalid});if(h._currentViewImpl().supports.aggregation&&i.aggregations)for(f=0;f<i.aggregations.length;f++)i.aggregations[f].operation!==xc&&c(b,{type:hc,id:i.aggregations[f].id,active:i.aggregations[f].isEnabled,label:h._getSettingLabel(hc,i.aggregations[f])});j.flashback&&j.flashback.operation!==xc&&c(b,{type:fc,active:j.flashback.isEnabled,label:h._getSettingLabel(fc,j.flashback)}),b.markup("</ul>"),b.markup("</div>")}function d(b){function c(a,b,c){var e,g,i,j="",k=[],m=!0;for(e=0;e<c.length;e++)c[e].operation!==xc&&(b===ic?g=c[e]["break"].isEnabled:(g=c[e].isEnabled,i=c[e].isInvalid),i?l++:g?(k.push(e),m||(j+=", "),j+=h._getSettingSummaryLabel(b,c[e]),m=!1):f++);k.length>0&&d(a,{type:b,id:c[k[0]],count:k.length,label:j})}function d(b,c){var d=a.extend({type:"",id:"",count:0,label:""},c);b.markup("<li").attr("class",la+" "+ma+d.type).markup(">"),b.markup("<a href='#'").attr("class",na).attr("data-setting",d.type).optionalAttr("data-setting-id",d.id).markup(">"),b.markup("<span").attr("class",oa).markup(">"),b.markup("<span").attr("class",ab+" "+ua+m(d.type)).markup("></span>"),(d.count>1||d.type===Xb||d.type===Yb)&&b.markup("<span").attr("class",pa).markup(">").content(d.count).markup("</span>"),b.markup("</span>"),b.markup("<span").attr("class",qa).markup(">").content(d.label).markup("</span>"),b.markup("</a>")}var f=0,l=0;b.markup("<div").attr("class",ka),j.reportSettingsArea===Nb&&b.attr("style","display:none;"),b.attr("id",h._getId("report_settings_summary")),k||b.attr("style","display:none;"),b.markup(">"),b.markup("<ul").attr("class",ja).markup(">"),j.views.chart&&h._view()===Ub&&d(b,{type:Ub,label:e.getMessage("APEX.IG.EDIT_CHART")}),j.filters&&c(b,dc,j.filters),g.length>0&&c(b,ic,g),i.highlights&&c(b,ec,i.highlights),i.aggregations&&c(b,hc,i.aggregations),j.flashback&&(j.flashback.isEnabled?d(b,{type:fc,label:h._getSettingSummaryLabel(fc,j.flashback)}):f++),f>0&&d(b,{type:Xb,count:f,label:1===f?e.getMessage("APEX.IG.INACTIVE_SETTING"):e.getMessage("APEX.IG.INACTIVE_SETTINGS")}),l>0&&d(b,{type:Yb,count:l,label:1===f?e.getMessage("APEX.IG.INVALID_SETTING"):e.getMessage("APEX.IG.INVALID_SETTINGS")}),b.markup("</ul>"),b.markup("</div>")}var f,g=[],h=this,i=this._getCurrentView(),j=this._currentReportSettings(),k=this._getTotalReportSettings()>0;b.markup("<div").attr("class",eb+" "+ha).attr("id",this._getId("report_settings")),k||b.attr("style","display:none;"),b.markup(">"),b.markup("<div").attr("class",fb).markup(">"),b.markup("<h3").attr("class",ob).markup(">").content(e.getMessage("APEX.IG.REPORT_SETTINGS")).markup("</h3>"),x(b,{buttonClass:Va+" "+ra+" "+sa}),b.markup("</div>"),c(b),d(b),b.markup("</div>")},_initReportSettings:function(){function b(){e.reportSettingsArea===Ob&&(e.reportSettingsArea=Nb,d._setOperationUpdate(e),d._setReportSettings(),d._getElement("report_settings_summary").hide(),d.resize())}function c(){e.reportSettingsArea===Nb&&(e.reportSettingsArea=Ob,d._setOperationUpdate(e),d._setReportSettings(),d._getElement("report_settings_summary").show(),d.resize())}var d=this,e=d._currentReportSettings();this._getTotalReportSettings()>0&&(this._on(this._getElement("report_settings"),{"click a.a-IG-controlsLabel":function(b){var c=a(b.currentTarget);this._openDialog(c.data("setting"),{id:c.data("setting-id")+""}),b.preventDefault()},"click a.a-IG-reportSummary-label":function(b){var c=a(b.currentTarget),d=c.data("setting");d===Xb||d===Yb?this._getElement("report_settings").collapsible(Mb):this._openDialog(d,{id:c.data("setting-id")+""}),b.preventDefault()},"click input.a-IG-controlsCheckbox":function(b){var c,d,e=a(b.target),f=e.prop("checked"),g=e.data("setting"),h=e.data("setting-id")+"";switch(g){case dc:this.updateFilter(h,{isEnabled:f});break;case hc:this.updateAggregate(h,{isEnabled:f});break;case ec:for(c=0;c<this._getCurrentView().highlights.length;c++)if(d=this._getCurrentView().highlights[c],d.id===h){d.isEnabled=f,d.operation=wc;break}this._setReportSettings({refreshModel:!0});break;case ic:this.updateControlBreak(h,{isEnabled:f});break;case fc:this.updateFlashback({isEnabled:f})}},"click button.a-IG-button--remove":function(b){var c=a(b.currentTarget);b.preventDefault();var d,e=c.data("setting"),f=c.data("setting-id")+"",g=!0;switch(e){case dc:this.deleteFilter(f);break;case hc:this.deleteAggregate(f);break;case ec:for(d=0;d<this._getCurrentView().highlights.length;d++)if(this._getCurrentView().highlights[d].id===f){this._getCurrentView().highlights[d].operation=xc,this._getCurrentView().highlights[d].isEnabled||(g=!1);break}this._setReportSettings({refreshModel:g});break;case ic:this.deleteControlBreak(f);break;case fc:this.deleteFlashback();break;case Ub:this.deleteChart()}}}),this._getElement("report_settings").collapsible({content:"div."+gb,collapsed:e.reportSettingsArea===Ob,collapse:c,expand:b}))},_currentViewColumn:function(b,c){var d,e,f=this._getCurrentView().columns;for(d=0;d<f.length;d++)if(f[d].columnId===b){e=f[d];break}return a.isPlainObject(c)&&(e=a.extend(!0,e,c),this._setOperationUpdate(e)),e},_refreshReportSettings:function(){var a=b.htmlBuilder();this._renderReportSettings(a),this._getElement("report_settings").replaceWith(a.toString()),this._initReportSettings()},_defaultAjaxRegionData:function(b){var c=this.options.config,d=a.extend(!0,{id:c.regionId,ajaxIdentifier:c.ajaxIdentifier,ajaxColumns:c.ajaxColumns,reportId:this._report(),view:this._view()},b);return this._isCurrentlyEditable()&&(d.allowedOperations=c.editable.allowedOperations["protected"]),d},_call:function(a,b){var c=this.options.config,e=this._defaultAjaxRegionData(a),f={regions:[e]};return c.parentRegionStaticId&&this.parentItemValues.length>0&&(f.regions[0].parentItems={values:this.parentItemValues}),d.plugin(f,{success:b})},_setReportSettings:function(b,c){function d(a){var b;for(b=0;b<a.length;b++)a[b].operation||(a.splice(b,1),b-=1)}var e,f=this.options.config,g=this,h=a.extend({refreshView:!1,refreshModel:!1,affectsOtherViewsModels:!1,refreshColumns:!1,changeIdentifier:""},b);return e=a.extend(!0,{},this._currentReportSettings()),e.filters&&e.filters.length>0&&d(e.filters),f.views.grid&&d(e.views.grid.columns),f.views.icon&&f.views.icon.columns&&d(e.views.icon.columns),f.views.detail&&f.views.detail.columns&&d(e.views.detail.columns),this._call({setReportSettings:[e]},function(a){var b,d=g._defaultSavedReport(a.regions[0].setReportSettings[0]);apex.message.hidePageSuccess(),g._view()!==d.currentView&&g._view(d.currentView,{fetchData:!0}),g.options.savedReports[g.currentSavedReportIdx]=d,g._updateChangeReportAction(),g._updateChangeViewActions(),g._updateReportSettingsActions(),g._refreshReportSettings(),b=g._currentViewImpl().model.getOption("regionData"),b.reportId=g._report(),b.view=g._view(),g._forEachView(function(a,b){b.setReportOptions(g,g._currentReportSettings(),h.changeIdentifier)}),h.refreshColumns&&g._currentViewImpl().refreshColumns(),h.refreshView?g._currentViewImpl().refresh():h.refreshModel&&(h.affectsOtherViewsModels?g._forEachView(function(a,b){b.model&&b.model.clearData()}):g._currentViewImpl().model.clearData()),c&&c(),g._trigger(Zd,null,{report:d.id})})},_downloadReport:function(a){var b,c,f=this.options.config;b={regions:[{id:f.regionId,ajaxIdentifier:f.ajaxIdentifier,ajaxColumns:f.ajaxColumns,reportId:this._report(),view:this._view(),download:a}],salt:$v("pSalt")},b.pageItems=f.itemsToSubmit,a.email?d.plugin(b,{dataType:"text",success:function(a){apex.message.showPageSuccess(e.getMessage("APEX.IG.EMAIL_SENT"))}}):(c=d.ajaxUrl(b),window.open(c))},_saveReport:function(a,b){var d,f={},g=this,h=this.options.config;return h.features.saveReport?(f.saveReport=a,h.features.saveReport.publicReportCs&&(f.publicReportCs=h.features.saveReport.publicReportCs),this._call(f,function(a){var c;switch(g.options.savedReports=g._defaultSavedReports({reports:a.regions[0].savedReports}),g._updateChangeReportAction(),g._updateReportSettingsActions(),g._refreshReportSettings(),c=g._currentViewImpl().model.getOption("regionData"),c.reportId=g._report(),c.view=g._view(),b){case vc:case wc:switch(g._currentReportSettings().type){case Zb:d=e.getMessage("APEX.IG.REPORT.SAVED.DEFAULT");break;case $b:d=e.getMessage("APEX.IG.REPORT.SAVED.ALTERNATIVE");break;case _b:d=e.getMessage("APEX.IG.REPORT.SAVED.PRIVATE");break;case ac:d=e.getMessage("APEX.IG.REPORT.SAVED.PUBLIC")}break;case xc:d=e.getMessage("APEX.IG.REPORT.DELETED")}apex.message.showPageSuccess(d),b===xc&&g.refresh()})):void c.warn("Unable to save report settings because the configuration disallows it.")},_getFilterValues:function(b,c,d){var e=this;return this._call({getFilterValues:{columnId:b,columnType:Hb,respectFilters:c}},function(b){a.isFunction(d)&&d.call(e,b)})},_updateChangeReportAction:function(){var a,b,c,d,f=[],g=this.options.config,h=this.options.savedReports,i=this.actions;if(h.length>1){for(a=0;a<h.length;a++){switch(b=h[a],d=b.name,b.type){case Zb:c="APEX.IG.SAVED_REPORT_DEFAULT",b.name||(d=e.getMessage("APEX.IG.PRIMARY_REPORT"));break;case $b:c="APEX.IG.SAVED_REPORT_DEFAULT";break;case _b:c="APEX.IG.SAVED_REPORT_PRIVATE";break;case ac:c="APEX.IG.SAVED_REPORT_PUBLIC"}f.push({group:e.getMessage(c),label:d,value:b.id})}this.actions.lookup("change-report").hide=!(!g.toolbar||g.toolbar&&g.toolbar.savedReports)}else this.actions.lookup("change-report").hide=!0;this.actions.update("change-report"),i.lookup("change-report").choices=f,i.updateChoices("change-report")},_updateAction:function(a,b){this.actions.lookup(b)&&this.actions[a](b)},_toggleEnableAction:function(b,c){var d=this,e=b?"enable":"disable";a.isArray(c)?a.each(c,function(){d._updateAction(e,this)}):this._updateAction(e,c)},_toggleShowAction:function(a,b){this._toggleAction("show",a,b)},_toggleAction:function(b,c,d){var e,f=this;switch(b){case"show":e=c?"show":"hide";break;case"enable":e=c?"enable":"disable"}a.isArray(d)?a.each(d,function(){f._updateAction(e,this)}):this._updateAction(e,d)},_updateToolbarElements:function(){var a=this.options.config;a.toolbar&&(a.toolbar.searchField&&(a.toolbar.columnSelection&&this.toolbar$.toolbar("findElement","column_filter_button").show(),this.toolbar$.toolbar("findElement","search_field").show()),a.toolbar.actionMenu&&this.toolbar$.toolbar("findElement","actions_button").show())},_updateActions:function(){var a=this.options.config,b=a.features,c=!1,d=!1,e=this._isCurrentlyEditable(),f=e&&a.editable.allowedOperations.create,g=e&&e&&a.editable.allowedOperations["delete"],h=e&&(a.editable.allowedOperations.update||a.editable.allowedOperations["delete"]),i=e&&(a.editable.allowedOperations.update||a.editable.allowedOperations.create)&&(!a.toolbar||a.toolbar&&a.toolbar.editing),j=e&&(a.editable.allowedOperations.create||a.editable.allowedOperations.update||a.editable.allowedOperations["delete"])&&(!a.toolbar||a.toolbar&&a.toolbar.save),k=!a.toolbar||a.toolbar&&a.toolbar.searchField,l=!a.toolbar||a.toolbar&&a.toolbar.reset;b.saveReport&&this._updateChangeReportAction(),this._toggleShowAction(b.filter,"show-filter-dialog"),this._toggleShowAction(b.download,"show-download-dialog"),this._toggleShowAction(b.flashback,"show-flashback-dialog"),this._updateReportSettingsActions(),this._toggleShowAction(f,["selection-add-row","row-add-row","selection-duplicate","row-duplicate"]),this._toggleShowAction(g,["selection-delete","row-delete"]),this._toggleShowAction(h,["selection-revert","row-revert"]),this._toggleShowAction(e,["selection-refresh","row-refresh"]),this._toggleShowAction(i,"edit"),this._toggleShowAction(j,"save"),this._toggleShowAction(k,"search"),this._toggleShowAction(l,"reset-report"),this._forEachView(function(b,e){e.supports.singleRowView&&a.views[b].features.singleRowView&&(c=!0),e.supports.highlight&&a.views[b].features.highlight&&(d=!0)}),this._toggleShowAction(c,"single-row-view"),this._toggleShowAction(d,"show-highlight-dialog")},_updateReportSettingsActions:function(){var a=this._currentReportSettings(),b=this.options.config.features.saveReport,c=!a.isReadOnly;this._toggleEnableAction(b&&c&&a.baseReportId,"save-report"),this._toggleEnableAction(b,"show-save-report-as-dialog"),this._toggleEnableAction(b&&c,"show-edit-report-dialog"),this._toggleEnableAction(b&&c&&a.type!==Zb,"delete-report"),this._toggleEnableAction(a.baseReportId,"reset-report")},_updateChangeViewActions:function(){var a=[],b=this.actions;this._forEachView(function(b,c){c.isConfigured()&&a.push({label:c.title,value:b,icon:c.icon})}),this._toggleShowAction(a.length>1,"change-view"),b.lookup("change-view").choices=a,b.updateChoices("change-view")},_updateSelectionActions:function(){var a,b=this.options.config,c=this._currentViewImpl();b.editable&&(a=this._isCurrentlyEditable()&&c.supports.edit&&0!==c.getSelectedRecords().length,this._toggleEnableAction(a,["selection-duplicate","selection-refresh","selection-delete","selection-revert"]))},_setFilterColumn:function(a){var b;this.currentFilterColumnId=a,b=a?e.formatMessage("APEX.IG.SEARCH.COLUMN",this._getColumn(a).heading.label):this.options.config.filter.oracleText?e.getMessage("APEX.IG.SEARCH.ORACLE_TEXT"):e.getMessage("APEX.IG.SEARCH.ALL_COLUMNS"),this.toolbar$.toolbar("findElement","search_field").attr({placeholder:b,title:b})},_defaultIGConfig:function(){var b,c,d=this.options.config;if(d.filter.maxRowCount&&(d.text.moreDataFound=e.formatMessage("APEX.IG.MORE_DATA_FOUND",d.filter.maxRowCount)),d.columnGroups.length>0)for(b=0;b<d.columnGroups.length;b++)c=a.extend({id:"",heading:"",label:""},d.columnGroups[b]),c.label||(c.label=c.heading),d.columnGroups[b]=c;d.editable&&(d.editable=a.extend(!0,{allowedOperations:{create:!0,update:!0,"delete":!0,"protected":""},autoAddRow:!0},d.editable)),d.features.download&&(d.features.download=a.extend({formats:[],email:!0},d.features.download)),d.views.icon&&(d.views.icon=a.extend(!0,{disabled:!1,labelColumn:"",features:{sort:!0,highlight:!0}},d.views.icon)),d.views.detail&&(d.views.detail=a.extend(!0,{disabled:!1,beforeRows:"",row:"",afterRows:"",features:{sort:!0,controlBreak:!0}},d.views.detail))},_defaultColumns:function(){var b,c,d=this.options.config.columns;for(b=0;b<d.length;b++)c=a.extend(!0,{id:"",name:"",staticId:"",dataType:pd,specialType:"",isHidden:!1,isReadOnly:!0,heading:{heading:"",label:"",alignment:Kb},layout:{columnAlignment:Jb,groupId:"",useGroupFor:"both"},appearance:{columnCssClasses:"",formatExample:""},validation:{isRequired:!1,restrictedCharacters:""},link:{text:"",attributes:""},filter:{operators:[{name:"$std$"},{name:"$perform$"}],dateRanges:Hc,isRequired:!1,hasLov:!0,dataType:pd},accessibility:{usedAsRowHeader:!1},features:{canHide:!0,highlight:!0,compute:!0,sort:!0,controlBreak:!0,aggregate:!0,groupBy:!0},isPrimaryKey:!1,parentColumnName:"","default":{value:"",duplicate:!0},escape:!0,helpid:""},d[b]),c.heading.label||(c.heading.label=c.heading.heading),c.filter.dataType!==pd||c.filter.textCase||(c.filter.textCase=od),d[b]=c},_createBaseColumnMap:function(){var a,b,c,d=this.options.config.columns,e=0;for(a=0;a<d.length;a++)b=d[a],c=this.baseModelColumns[b.id]={index:a-e,hidden:b.isHidden,readonly:b.isReadOnly,escape:b.escape,id:b.id},b.isHidden?c.canHide=!1:(c.heading=b.heading.heading,c.headingAlignment=b.heading.alignment,c.label=b.heading.label,c.alignment=b.layout.columnAlignment),b.parentColumnName&&(c.parentField=b.parentColumnName,this.parentColumnNames.push(b.parentColumnName)),this.columnMap[b.id]=b,b.isPrimaryKey&&this.primaryKeyColumns.push(b.name),"actions"===b.specialType&&(e+=1);this.baseModelColumns[Dc]={index:a-e,seq:a,hidden:!0,canHide:!1}},_defaultSavedReport:function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s={},t=this.options.config,u=t.views;if(j=a.extend(!0,{id:"",baseReportId:"",name:"",isCurrent:!1,type:Zb,isReadOnly:!0,authorizationId:"",rowsPerPage:null,showRowNumbers:!1,reportSettingsArea:Ob,defaultFilterColumn:!1,flashback:!1,versionNumber:"",filters:[],currentView:Rb,views:{grid:!1,chart:!1,icon:!1,detail:!1}},b),!u[j.currentView])for(c in u)if(u.hasOwnProperty(c)&&u[c]){j.currentView=c;break}if(j.flashback&&(j.flashback=a.extend({minsAgo:null,isEnabled:!0},j.flashback)),j.filters.length>0)for(d=0;d<j.filters.length;d++)k=a.extend(!0,{id:"",type:Gb,isCaseSensitive:!1,value:"",isEnabled:!0},j.filters[d]),k.columnId&&!k.columnType&&(k.columnType=Hb),k.type!==Hb||this._getColumn(k.columnId)?j.filters[d]=k:(j.filters.splice(d,1),d-=1);if(j.views.grid){if(j.views.grid)for(h=0;h<j.views.grid.columns.length;h++)r=j.views.grid.columns[h],s[r.columnId]=r;for(i=0;i<t.columns.length;i++)q=t.columns[i],s[q.id]||j.views.grid.columns.push({columnId:q.id,operation:vc,isVisible:!1});if(j.views.grid=a.extend(!0,{editMode:!1,singleRowView:{excludeNullValues:!1,onlyDisplayColumns:!0},columns:[],aggregations:[],highlights:[],initialBreakState:Ob},j.views.grid),j.views.grid.columns.length>0)for(e=0;e<j.views.grid.columns.length;e++)n=a.extend({seq:null,columnType:Hb,columnId:"",isVisible:!0,isFrozen:!1,width:null,priority:null,"break":!1,sort:!1},j.views.grid.columns[e]),n.seq=e+1,n["break"]&&(n["break"]=a.extend({order:null,isEnabled:!0,direction:nc,nulls:qc},n["break"])),n.sort&&(n.sort=a.extend({order:null,direction:nc,nulls:qc},n.sort)),this._getColumn(n.columnId)?j.views.grid.columns[e]=n:(j.views.grid.columns.splice(e,1),e-=1);if(j.views.grid.aggregations.length>0)for(f=0;f<j.views.grid.aggregations.length;f++)l=a.extend({id:"","function":"",columnType:Hb,columnId:"",tooltip:"",showGrandTotal:!0,isEnabled:!0},j.views.grid.aggregations[f]),l.label||(l.label=l["function"]),this._getColumn(l.columnId)?j.views.grid.aggregations[f]=l:(j.views.grid.aggregations.splice(f,1),f-=1);if(j.views.grid.highlights.length>0)for(g=0;g<j.views.grid.highlights.length;g++)m=a.extend(!0,{id:"",name:"",type:Gb,columnType:Hb,columnId:"",backgroundColor:"",textColor:"",condition:{type:Hb,columnType:Hb,columnId:"",operator:"",isCaseSensitive:!1,value:"",expression:""},isEnabled:!0},j.views.grid.highlights[g]),m.type===Hb&&!this._getColumn(m.columnId)||m.condition.type===Hb&&!this._getColumn(m.condition.columnId)?(j.views.grid.highlights.splice(g,1),g-=1):j.views.grid.highlights[g]=m}if(j.views.icon&&(j.views.icon=a.extend(!0,{columns:[],initialBreakState:Ob},j.views.icon),j.views.icon.columns.length>0))for(e=0;e<j.views.icon.columns.length;e++)n=a.extend({seq:null,columnType:Hb,columnId:"",isVisible:!0,"break":!1,sort:!1},j.views.icon.columns[e]),n["break"]&&(n["break"]=a.extend({order:null,isEnabled:!0,direction:nc,nulls:qc},n["break"])),n.sort&&(n.sort=a.extend({order:null,direction:nc,nulls:qc},n.sort)),j.views.icon.columns[e]=n;if(j.views.detail&&(j.views.detail=a.extend(!0,{columns:[],initialBreakState:Ob},j.views.detail),j.views.detail.columns.length>0))for(e=0;e<j.views.detail.columns.length;e++)n=a.extend({seq:null,columnType:Hb,columnId:"",isVisible:!0,"break":!1,sort:!1},j.views.detail.columns[e]),n["break"]&&(n["break"]=a.extend({order:null,isEnabled:!0,direction:nc,nulls:qc},n["break"])),n.sort&&(n.sort=a.extend({order:null,direction:nc,nulls:qc},n.sort)),j.views.detail.columns[e]=n;if(j.views.chart){j.views.chart=a.extend(!0,{type:xd,orientation:Jd,stack:Md},j.views.chart),j.views.chart.axis&&(j.views.chart.axis=a.extend({label:"",value:"",valueDecimalPlaces:""},j.views.chart.axis));for(o in j.views.chart.chartColumns)j.views.chart.chartColumns.hasOwnProperty(o)&&(p=j.views.chart.chartColumns[o],p=a.extend({columnType:Hb},p),p.sort&&(p.sort=a.extend({order:null,direction:nc,nulls:qc},p.sort)),j.views.chart.chartColumns[o]=p)}return j},_defaultSavedReports:function(b){var c,d=!1,e=a.extend({reports:this.options.savedReports},b);for(c=0;c<e.reports.length;c++)e.reports[c]=this._defaultSavedReport(e.reports[c]),e.reports[c].isCurrent&&(d=!0,this.currentSavedReportIdx=c);return d||(this.currentSavedReportIdx=0),e.reports},_renderColumnHeaderMenu:function(b,c,d,f){function g(b,c){var d=a.extend(!0,{buttonClass:"a-IRR-button "+Da,label:"",iconOnly:!0,icon:"",isToggle:!1,toggleState:null,attributes:{},data:{}},c);b.markup("<li").attr("class",Ca).markup(">"),d.isToggle&&(d.attributes["aria-pressed"]=d.toggleState,d.toggleState&&(d.buttonClass+=" "+hb),delete d.isToggle,delete d.toggleState),x(b,d),b.markup("</li>")}var h,i,j,k=!1,l=this._getId("column_header_search"),m=this._getColumn(f),n=this._currentReportSettings().views.grid.columns,o=0;for(b.markup("<ul").attr("class",Ba).markup(">"),m.features.controlBreak&&g(b,{label:e.getMessage("APEX.IG.CONTROL_BREAK"),icon:"icon-ig-control-break",data:{option:"break"}}),m.features.aggregate&&g(b,{label:e.getMessage("APEX.IG.AGGREGATE"),icon:"icon-ig-aggregate",data:{option:"aggregate"}}),h=0;h<n.length;h++)if(n[h].columnId===f){k=n[h].isFrozen;break}for(h=0;h<n.length;h++)n[h].isVisible&&!this._getColumn(n[h].columnId).isHidden&&n[h].seq>o&&(o=n[h].seq),n[h].columnId===f&&(j=n[h].seq);j<o&&g(b,{label:k?e.getMessage("APEX.IG.UNFREEZE"):e.getMessage("APEX.IG.FREEZE"),icon:"icon-ig-frozen-column",isToggle:!0,toggleState:k,data:{option:"freeze"}}),m.features.canHide&&g(b,{label:e.getMessage("APEX.IG.HIDE"),icon:"icon-ig-remove-col",data:{option:"hide"}}),m.helpid&&g(b,{label:e.getMessage("APEX.IG.HELP"),icon:"icon-ig-help",data:{option:"help"}}),b.markup("</ul>"),c&&(b.markup("<div").attr("class",Ea).markup(">"),y(b,{labelFor:l,cssClasses:Fa,label:e.getMessage("APEX.IG.SEARCH"),labelTextHidden:!0}),m.filter.textCase&&(i=this._getTextTransformClass(m)),p(b,{id:l,cssClasses:Ga+(i?" "+i:""),placeholder:e.getMessage("APEX.IG.FILTER_WITH_DOTS")}),d&&(b.markup("<div").attr("class",Ha).attr("id",this._getId("column_header_menu_rows")).markup(">"),b.markup("</div>")),b.markup("</div>"))},_setOperationUpdate:function(a){a.operation&&a.operation===vc||(a.operation=wc)},_renderIG:function(){var a=this,c=this.options,d=this.element,e=b.htmlBuilder(),f=this.options.config;e.markup("<div").attr("class",J).markup(">"),f.toolbar&&f.toolbarData&&e.markup("<div").attr("id",this._getId("toolbar")).markup(">").markup("</div>"),e.markup("</div>"),e.markup("<div").attr("class",M).markup(">"),c.config.reportSettingsArea&&this._renderReportSettings(e),e.markup("<div").attr("class",P).attr("id",this._getId("content_container")).markup(">"),this._forEachView(function(b,c){e.markup("<div").attr("id",a._getId(c.elementId)).attr("class",c.cssClass).markup(" style='display:none'></div>")}),e.markup("</div></div>"),d.append(e.toString()),c.config.reportSettingsArea&&this._initReportSettings()},_resetReportSettings:function(){var a=this;this._ifNoChangesDo(function(){if(a._currentReportSettings().baseReportId)return a._call({resetReportSettings:[a._report()]},function(b){var c=a._defaultSavedReport(b.regions[0].resetReportSettings[0]);a.options.savedReports[a.currentSavedReportIdx]=c,a._report(c.id),a._updateChangeReportAction()})})},_openDialog:function(a,b){switch(b=b||{},a){case cc:this.columnsDialog$.dialog("option","id",b.id).dialog("open");break;case dc:this.filterDialog$.dialog("option","id",b.id).dialog("open");break;case gc:this.sortDialog$.dialog("option","id",b.id).dialog("open");break;case hc:this.aggregateDialog$.dialog("option",{id:b.id,columnId:b.columnId}).dialog("open");break;case fc:this.flashbackDialog$.dialog("open");break;case ec:this.highlightDialog$.dialog("option","id",b.id).dialog("open");break;case Ub:this.viewsImpl[Ub].openDialog();break;case ic:this.controlBreakDialog$.dialog("option","id",b.id).dialog("open");break;case jc:this.reportSettingsDialog$.dialog("option","saveAs",!1).dialog("open");break;case kc:this.reportSettingsDialog$.dialog("option","saveAs",!0).dialog("open");break;case lc:this.downloadDialog$.dialog("open");break;case mc:}},_setModel:function(b){var c,d,e,f,g,h,i,j=!1,k=!1,l=!1,m=this.options.config,n=b.viewImpl,o=n.internalIdentifier,p=this._isCurrentlyEditable()&&n.supports.edit;n.model&&(apex.model.release(n.modelName),n.modelName=null,n.model=null),b.remove||(p&&(j=m.editable.allowedOperations.create,k=m.editable.allowedOperations.update,l=m.editable.allowedOperations["delete"]),m.parentRegionStaticId&&null===m.modelInstanceId&&(p=!1),i=m.modelInstanceId?[m.regionStaticId+"_"+o,m.modelInstanceId]:m.regionStaticId+"_"+o,n.modelName=i,c=a.extend({},m.defaultModelOptions,{recordIsArray:!0,hasTotalRecords:m.pagination.showTotalRowCount,regionId:m.regionId,regionStaticId:m.regionStaticId,ajaxIdentifier:m.ajaxIdentifier,pageItemsToSubmit:m.itemsToSubmit,parentRecordId:this.parentRecordId,fields:n.modelColumns,editable:p,saveSelection:p&&m.submitSelectedRows,paginationType:uc,regionData:{reportId:this._report(),view:o,ajaxColumns:m.ajaxColumns}}),c.types||(c.types={"default":{operations:{canAdd:j,canEdit:k,canDelete:l}}}),a.each(["identityField","metaField","typeField","sequenceField"],function(a,b){n.specialColumns[b]&&(c[b]=n.specialColumns[b])}),m.parentRegionStaticId&&(this.parentModel?c.parentModel=this.parentModel:(d=a("#"+m.parentRegionStaticId+"_ig"),c.parentModel=m.parentRegionStaticId+"_"+d.interactiveGrid("getCurrentViewId"))),p&&(c.regionData.allowedOperations=m.editable.allowedOperations["protected"]),n.model=apex.model.get(i),n.model||(b.initialData?(e=b.initialData.values,f=m.pagination.showTotalRowCount?b.initialData.totalRows:null,g=b.initialData.moreData,h=b.initialData.dataOverflow,n.model=apex.model.create(i,c,e,f,g,h)):b.fetchData?n.model=apex.model.create(i,c):n.model=apex.model.create(i,c,[],0)),this._trigger($d,null,{viewId:o,model:n.model}),b.updateComponent&&n.setModelName(n.modelName,n.modelColumns))},_anyChanges:function(){var a=this._currentViewImpl();return!!(this._isCurrentlyEditable()&&a.supports.edit&&a.model&&apex.model.anyChanges(!1,a.model.name,!0))},_ifNoChangesDo:function(a,b){var c=this,d=this._anyChanges();b||(b=a,a=!1),d?a||apex.message.confirm(e.getMessage("APEX.IG.UNSAVED_CHANGES_CONTINUE_CONFIRM"),function(a){a?(c._setEditMode(!1),b()):c._refreshReportSettings()}):b()},_clearToolbarSearch:function(){var a=this.options.config;a.toolbar&&a.toolbar.searchField&&a.toolbarData&&this.toolbar$.toolbar("findElement","search_field").val("")},resize:function(){var b,c,d,e,f=this.options.config,g=0,h=0,i=this.element,j=i.width(),k=this._currentViewImpl(),l=a(Q,i).children().addBack();
this.ignoreResizeHandler=!0,l.width(j),f.maxHeight&&(b=i.height(),d=a(K,i),e=a(ia,i),d.filter(":visible").length>0&&(g=d.outerHeight()),e.filter(":visible").length>0&&(h=e.outerHeight()),c=b-(g+h),l.height(c)),f.toolbar&&this.toolbar$&&this.toolbar$.toolbar("refresh"),a.apex.stickyWidget&&i.find(".a-IG-header.js-stickyWidget-toggle").stickyWidget("refresh"),k&&k.view$&&k.resize(),this.ignoreResizeHandler=!1},refresh:function(b){var c=this,d=a.extend({preservePagination:!1},b);this._ifNoChangesDo(function(){c._forEachView(function(a,b){b.model&&(d.preservePagination||b.model.clearData())})})},gotoCell:function(a,b,c){var d;this._view()!==this.editableView&&this._view(this.editableView),d=this._currentViewImpl(),a&&this._setModelInstance(a),d.gotoCell&&d.gotoCell(b,c)},getActions:function(){return this.actions},getToolbar:function(){return this.toolbar$},getSelectedRecords:function(){var a=this._currentViewImpl();return a.supports.selection?a.getSelectedRecords():null},setSelectedRecords:function(a){var b,c,d,e,f=this._currentViewImpl();if(f.supports.selection){if(a.length&&"string"==typeof a[0])for(e=f.model,c=a,a=[],b=0;b<c.length;b++)d=e.getRecord(c[b]),d&&a.push(d);f.setSelectedRecords(a)}},getReports:function(a){var b,d=this.options.savedReports;if(!a)return d;for(b=0;b<d.length;b++)if(d[b].id===a)return d[b];c.warn("No report exists with ID: ",a)},addReport:function(b,d){var e=a.extend(b,{operation:vc,isEnabled:!0}),f=a.extend({save:!0},d);this.options.config.features.saveReport?(this.getReports().push(e),f.save&&this._saveReport(e,vc)):c.warn("Unable to add report settings because the configuration disallows it.")},updateReport:function(b,d,e){var f,g,h=this.getReports(),i=a.extend({save:!0},e);if(this.options.config.features.saveReport){for(f=0;f<h.length;f++)if(g=h[f],g.id===b){this._setOperationUpdate(d),g=a.extend(!0,g,d);break}i.save&&this._saveReport(g,wc)}else c.warn("Unable to update report settings because the configuration disallows it.")},deleteReport:function(b,d){var e={},f=a.extend({save:!0},d);this.options.config.features.saveReport?(e.id=b,e.operation=xc,f.save&&this._saveReport(e,xc)):c.warn("Unable to delete report settings because the configuration disallows it.")},getFilters:function(a){var b,d=this._currentReportSettings().filters;if(!a)return d;for(b=0;b<d.length;b++)if(d[b].id===a)return d[b];c.warn("No filter exists with ID: ",a)},addFilter:function(b,c){function d(){f.columnName&&(f.columnId=e._getColumnByName(f.columnName).id,delete f.columnName),e.getFilters().push(f),g.save&&e._setReportSettings({refreshModel:g.refreshData,affectsOtherViewsModels:!0})}var e=this,f=a.extend(b,{operation:vc,isEnabled:!0}),g=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},c);g.skipNoChangesCheck?d():this._ifNoChangesDo(d)},updateFilter:function(b,c,d){function e(){var d;for(d=0;d<g.length;d++)if(g[d].id===b){f._setOperationUpdate(c),g[d]=a.extend(!0,g[d],c);break}h.save&&f._setReportSettings({refreshModel:h.refreshData,affectsOtherViewsModels:!0})}var f=this,g=this.getFilters(),h=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},d);h.skipNoChangesCheck?e():this._ifNoChangesDo(e)},deleteFilter:function(b,c){function d(){var c;for(c=0;c<f.length;c++)if(f[c].id===b){f[c]=a.extend(!0,f[c],{operation:xc});break}g.save&&e._setReportSettings({refreshModel:g.refreshData,affectsOtherViewsModels:!0})}var e=this,f=this.getFilters(),g=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},c);g.skipNoChangesCheck?d():this._ifNoChangesDo(d)},getHighlights:function(a){var b,d=this._getCurrentView().highlights;if(!a)return d;for(b=0;b<d.length;b++)if(d[b].id===a)return d[b];c.warn("No highlight exists with ID: ",a)},addHighlight:function(b,c){function d(){f.columnName&&(f.columnId=e._getColumnByName(f.columnName).id,delete f.columnName),e.getHighlights().push(f),g.save&&e._setReportSettings({refreshModel:g.refreshData,affectsOtherViewsModels:!0})}var e=this,f=a.extend(b,{operation:vc,isEnabled:!0}),g=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},c);g.skipNoChangesCheck?d():this._ifNoChangesDo(d)},updateHighlight:function(b,c,d){function e(){var d;for(d=0;d<g.length;d++)if(g[d].id===b){f._setOperationUpdate(c),g[d]=a.extend(!0,g[d],c),c.type===Gb&&(delete g[d].columnId,delete g[d].columnType);break}h.save&&f._setReportSettings({refreshModel:h.refreshData,affectsOtherViewsModels:!0})}var f=this,g=this.getHighlights(),h=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},d);h.skipNoChangesCheck?e():this._ifNoChangesDo(e)},deleteHighlight:function(b,c){function d(){var c;for(c=0;c<f.length;c++)if(f[c].id===b){f[c]=a.extend(!0,f[c],{operation:xc});break}g.save&&e._setReportSettings({refreshModel:g.refreshData,affectsOtherViewsModels:!0})}var e=this,f=this.getHighlights(),g=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},c);g.skipNoChangesCheck?d():this._ifNoChangesDo(d)},getAggregates:function(){var a=[],b=this._currentViewImpl();return b.supports.aggregation&&(a=this._getCurrentView().aggregations),a},addAggregate:function(b,c){function d(){e.getAggregates().push(f),g.save&&e._setReportSettings({refreshModel:g.refreshData})}var e=this,f=a.extend(b,{operation:vc}),g=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},c);g.skipNoChangesCheck?d():this._ifNoChangesDo(d)},updateAggregate:function(b,c,d){function e(){var d;for(d=0;d<g.length;d++)if(g[d].id===b){f._setOperationUpdate(c),g[d]=a.extend(!0,g[d],c);break}h.save&&f._setReportSettings({refreshModel:h.refreshData})}var f=this,g=this.getAggregates(),h=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},d);h.skipNoChangesCheck?e():this._ifNoChangesDo(e)},deleteAggregate:function(b,c){function d(){var c;for(c=0;c<f.length;c++)if(f[c].id===b){f[c]=a.extend(!0,f[c],{operation:xc});break}g.save&&e._setReportSettings({refreshModel:g.refreshData})}var e=this,f=this.getAggregates(),g=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},c);g.skipNoChangesCheck?d():this._ifNoChangesDo(d)},getFlashback:function(){return this._currentReportSettings().flashback},addFlashback:function(b,c){function d(){e._currentReportSettings().flashback=a.extend(b,{isEnabled:!0}),e._setOperationUpdate(e._currentReportSettings()),f.save&&e._setReportSettings({refreshModel:f.refreshData,affectsOtherViewsModels:!0,changeIdentifier:"editable"})}var e=this,f=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},c);f.skipNoChangesCheck?d():this._ifNoChangesDo(d)},updateFlashback:function(b,c){function d(){e._setOperationUpdate(e._currentReportSettings()),e._currentReportSettings().flashback=a.extend(e._currentReportSettings().flashback,b),f.save&&e._setReportSettings({refreshModel:f.refreshData,affectsOtherViewsModels:!0,changeIdentifier:"editable"})}var e=this,f=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},c);f.skipNoChangesCheck?d():this._ifNoChangesDo(d)},deleteFlashback:function(b){function c(){d._setOperationUpdate(d._currentReportSettings()),d._currentReportSettings().flashback=!1,e.save&&d._setReportSettings({refreshModel:e.refreshData,affectsOtherViewsModels:!0,changeIdentifier:"editable"})}var d=this,e=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},b);e.skipNoChangesCheck?c():this._ifNoChangesDo(c)},addControlBreak:function(b,c,d){function e(){var d,e,h=0,i=f._getCurrentView().columns;for(d=0;d<i.length;d++)if(i[d].columnId===b.id){e=i[d];break}if(!c.order){for(d=0;d<i.length;d++)i[d]["break"]&&h++;c.order=h+1}e=a.extend(!0,e,{isVisible:!c.isEnabled,"break":{order:c.order,isEnabled:c.isEnabled,direction:c.direction,nulls:c.nulls}}),f._setOperationUpdate(e),c.isEnabled&&f._adjustControlBreakSort(),c.isEnabled?a.extend(b,{controlBreakIndex:c.order,controlBreakDirection:c.direction,hidden:!0}):a.extend(b,{controlBreakIndex:0,controlBreakDirection:null,hidden:!1}),g.save&&f._setReportSettings({refreshModel:g.refreshData,refreshColumns:g.refreshData})}var f=this,g=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},d?d:{});g.skipNoChangesCheck?e():this._ifNoChangesDo(e)},updateControlBreak:function(b,c,d){function e(){var d,e,h=f._getCurrentView().columns;for(d=0;d<h.length;d++)if(h[d].columnId===b){e=h[d];break}e=a.extend(!0,e,{isVisible:!c.isEnabled,"break":{order:c.order,isEnabled:c.isEnabled,direction:c.direction,nulls:c.nulls}}),f._setOperationUpdate(e),c.isEnabled?a.extend(f._currentViewImpl().modelColumns[f._getColumn(b).name],{controlBreakIndex:e["break"].order,controlBreakDirection:e["break"].direction,hidden:!0}):a.extend(f._currentViewImpl().modelColumns[f._getColumn(b).name],{controlBreakIndex:0,controlBreakDirection:null,hidden:!1}),f._adjustControlBreakSort(),g.save&&f._setReportSettings({refreshModel:g.refreshData,refreshColumns:g.refreshData})}var f=this,g=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},d?d:{});g.skipNoChangesCheck?e():this._ifNoChangesDo(e)},deleteControlBreak:function(b,c){function d(){var c,d,g=e._getCurrentView().columns;for(c=0;c<g.length;c++)if(g[c].columnId===b){d=g[c];break}d=a.extend(!0,d,{isVisible:!0,"break":!1}),e._setOperationUpdate(d),a.extend(e._currentViewImpl().modelColumns[e._getColumn(b).name],{controlBreakIndex:0,controlBreakDirection:null,hidden:!1}),e._adjustControlBreakSort(),f.save&&e._setReportSettings({refreshModel:f.refreshData,refreshColumns:f.refreshData})}var e=this,f=a.extend({save:!0,refreshData:!0,skipNoChangesCheck:!1},c?c:{});f.skipNoChangesCheck?d():this._ifNoChangesDo(d)},getSorts:function(){var b,c,d,e=[],f=this._getCurrentView().columns;for(b=0;b<f.length;b++)c=f[b],c.sort&&(d=a.extend({},{columnId:c.columnId,order:c.sort.order,direction:c.sort.direction,nulls:c.sort.nulls}),e.push(d));for(e.length>0&&(e=e.sort(function(a,b){return a.order-b.order})),b=0;b<e.length;b++)delete e[b].order;return e},setSorts:function(a){var b,c,d,e,f,g,h,i=this,j=this._getCurrentView().columns,k=this._currentViewImpl().view$.grid("getColumns");this._ifNoChangesDo(function(){for(b=0;b<j.length;b++){for(g=j[b],e=!1,d=0;d<k.length;d++)if(g.columnId===k[d].id){h=d;break}for(c=0;c<a.length;c++)if(f=a[c],f.columnId===g.columnId){e=!0,f.order=c+1;break}e?(delete f.columnId,g.sort?f.order===g.sort.order&&f.direction===g.sort.direction&&f.nulls===g.sort.nulls||(g.sort=f,i._setOperationUpdate(g),k[h].sortIndex=g.sort.order,k[h].sortDirection=g.sort.direction):(g.sort=f,i._setOperationUpdate(g),k[h].sortIndex=g.sort.order,k[h].sortDirection=g.sort.direction)):g.sort&&(g.sort=!1,i._setOperationUpdate(g),k[h].sortIndex=null,k[h].sortDirection=null)}i._adjustControlBreakSort(),i._setReportSettings({refreshModel:!0,refreshColumns:!0})})},getChart:function(){return this._currentReportSettings().views.chart},setChart:function(b){var c,d=this,e=this.getChart(),f=this._currentViewImpl(),g={};e?(c=a.extend(e,b),this._setOperationUpdate(c)):c=a.extend({operation:vc},b),this._currentReportSettings().views.chart=c,this._view()===Ub?(g.ig=this,g.igConfig=this.options.config,f.init(g),this._setReportSettings({refreshView:!0,refreshModel:!0})):this._setReportSettings({},function(){d._view(Ub,{fetchData:!0})})},deleteChart:function(){var a=this._currentViewImpl();this._currentReportSettings().views.chart={operation:xc},this._setReportSettings({},function(){a.destroy(),a.view$=null})},getViews:function(a){return a?this.viewsImpl[a]:this.viewsImpl},getCurrentView:function(){return this.getViews(this.getCurrentViewId())},getCurrentViewId:function(){return this._view()},focus:function(){var a=this.options.config;a.toolbar&&a.toolbar.searchField&&this.toolbar$?this.toolbar$.toolbar("findElement","search_field").focus():this._currentViewImpl().focus()}}),a.apex.interactiveGrid.copyDefaultToolbar=function(){var b,c=[];for(b=0;b<ae.length;b++)c.push(a.extend(!0,{},ae[b]));return c.toolbarFind=ae.toolbarFind,c};var be=[];a.apex.interactiveGrid.registerView=G;var ce={setColumnConfig:function(c){var d,f,g,h,i,j,k,l={},m=c.baseModelColumns,n=c.igConfig,o=n.views[this.internalIdentifier].features,p=c.currentReportSettings,q=c.ig,r=nc,s=n.editable!==!1;for(d=0;d<p.views.grid.columns.length;d++)f=p.views.grid.columns[d],g=q._getColumn(f.columnId),k=a.extend(!0,{},g.defaultGridColumnOptions||{},m[f.columnId]),k.elementId=g.staticId,k.seq=f.seq,void 0===k.noStretch&&(k.noStretch=!o.stretchColumns),g.isHidden||(k.hidden=!f.isVisible,k.frozen=f.isFrozen,f.width&&(k.width=f.width),f.sort&&(k.sortIndex=f.sort.order,k.sortDirection=f.sort.direction),j=f["break"],j&&j.isEnabled&&(r=j.direction,k.controlBreakIndex=j.order,k.controlBreakDirection=r),g.heading.heading!==g.heading.label,g.layout.groupId&&("both"===g.layout.useGroupFor?k.useGroupFor="srv,heading":k.useGroupFor=g.layout.useGroupFor,k.groupName=g.layout.groupId),k.helpid=g.helpid,k.canHide=g.features.canHide,k.canSort=g.features.sort,g.link.attributes&&(k.linkAttributes=g.link.attributes),g.link.text&&(k.linkText=g.link.text),g.link.targetColumn&&(k.linkTargetColumn=g.link.targetColumn)),g.accessibility.usedAsRowHeader&&(k.usedAsRowHeader=g.accessibility.usedAsRowHeader),g.appearance.columnCssClasses&&(k.columnCssClasses=g.appearance.columnCssClasses),g.appearance.fieldColSpan&&(k.fieldColSpan=g.appearance.fieldColSpan),g.appearance.fieldCssClasses&&(k.fieldCssClasses=g.appearance.fieldCssClasses),g.validation&&(k.isRequired=g.validation.isRequired),g.appearance.cellTemplate&&(k.cellTemplate=g.appearance.cellTemplate),s&&(k.noCopy=!g["default"].duplicate,k.defaultValue=g["default"].value,"actions"===g.specialType&&(h=b.htmlBuilder(),i=Ya+" "+_a+" a-Button--actions "+mb,x(h,{label:e.getMessage("APEX.IG.ROW_ACTIONS"),buttonClass:i,iconOnly:!0,icon:"icon-ig-actions",attributes:{"data-menu":q._getId("row_actions_menu"),"aria-haspopup":!0,"aria-expanded":!1}}),k.cellTemplate=h.toString(),h.clear(),x(h,{label:e.getMessage("APEX.IG.SEL_ACTIONS"),buttonClass:i+" js-selectionMenu",iconOnly:!0,icon:"icon-ig-actions",attributes:{"data-menu":q._getId("selection_actions_menu"),"aria-haspopup":!0,"aria-expanded":!1}}),k.heading=h.toString(),k.columnCssClasses?k.columnCssClasses+=" "+rb:k.columnCssClasses=rb,k.headingCssClasses?k.headingCssClasses+=" "+rb:k.headingCssClasses=rb,delete k.index,k.virtual=!0,k.noHeaderActivate=!0,k.elementId=null,0===d&&(k.frozen=!0,f.isFrozen=!0),k.noStretch=!0,k.canSort=!1,k.width||(k.width=Nd))),l[g.name]=k;l[Dc]=m[Dc],this.modelColumns=l,this.specialColumns={identityField:0===q.primaryKeyColumns.length?null:q.primaryKeyColumns,metaField:Dc}},init:function(c){function d(b){var c=a.extend({menu:null,header:null,focus:null},b);c.menu.hide(),c.header.removeClass(hb).attr(sb,"false"),c.focus&&c.focus.focus(),z._off(z.document,"mousedown"),z._off(z.window,"blur"),z._off(c.menu)}var f,g,i,l,m,n,o,p={},q=b.htmlBuilder(),r=!0,s=c.igConfig,t=s.defaultGridViewOptions.multiple,u=s.defaultGridViewOptions.selectAll,v=s.views.grid.features,x=!1,y=rc,z=c.ig,A=z.actions,B=z._isCurrentlyEditable(),C=s.columnGroups,D=this,E=!0;if(!v.gridView&&!v.singleRowView)throw new Error("Interactive Grid grid view must have at least one of grid or single row");switch(a("div.a-GV-columnItemContainer",c.ig$).appendTo(c.ig$),v.gridView&&(q.markup("<div").attr("class",Aa).attr("style","display:none;").attr("id",z._getId("column_header_menu")).markup(">").markup("</div>"),c.ig$.append(q.toString()),o=c.currentReportSettings.views.grid.aggregations,o.length>0&&(y!==rc&&y!==Fc||(y=Gc))),v.rowSelector&&(y=s.defaultGridViewOptions.rowHeader,y===rc&&(y=Fc),x=!v.rowSelector.hideControl,t=v.rowSelector.multiSelect,t&&(u=v.rowSelector.selectAll)),s.headingFixedTo){case rc:r=!1,l=!1,m=!1;break;case yc:r=!0,l=!1,m=!1;break;case zc:r=!1,l=function(){return h.defaultStickyTop()+a(K,c.ig$).outerHeight()},m=s.defaultGridViewOptions.stickyFooter}for(this._initMenus(s,z),f=0;f<C.length;f++)g=C[f],p[g.id]={heading:g.heading,label:g.label};v.gridView?(s.defaultGridViewOptions.contextMenu&&!s.defaultGridViewOptions.contextMenu.hasOwnProperty("actionsContext")&&(s.defaultGridViewOptions.contextMenu.actionsContext=z.actions),s.editable&&s.editable.allowedOperations.create===!1&&s.editable.allowedOperations.update===!1&&(E=!1),n={modelName:D.modelName,editable:B,autoAddRecord:!!B&&s.editable.autoAddRow,rowHeader:y,rowHeaderCheckbox:x,aggregateLabels:this._gridAggregateLabels(),highlights:this._gridHighlightsFromReport(c.currentReportSettings),multiple:t,selectAll:u,noDataMessage:s.text.noDataFound,moreDataMessage:s.text.moreDataFound,showNullAs:s.appearance.showNullValue,columns:[D.modelColumns],columnGroups:p,columnSort:v.sort,reorderColumns:v.reorderColumns,resizeColumns:v.resizeColumns,pagination:z._getPaginationConfig(s),rowsPerPage:c.currentReportSettings.rowsPerPage,hasSize:r,stickyTop:l,stickyFooter:m,allowEditMode:E,persistSelection:s.defaultGridViewOptions.persistSelection||s.submitSelectedRows,activateColumnHeader:function(c,f){function g(c){var d,e,f,g=b.htmlBuilder();for(d=0;d<c.length;d++)a.isPlainObject(c[d])?(e=c[d].r,f=c[d].d):e=f=c[d],w(g,{cssClasses:Ia,text:f,data:{"return-value":e}});z._getElement("column_header_menu_rows").html(g.toString())}function i(a){var b=s.find(":focusable");a||(k=b.first(),k.data("first",!0)),l=b.last(),l.data("last",!0)}var k,l,m,n,o,p,q=[],r=b.htmlBuilder(),s=z._getElement("column_header_menu");s.is(":visible")?d({menu:s,header:f.header$}):(m=z._isColumnFilterable(f.column.id),m&&(n=z._hasColumnFilterLov(f.column.id)),f.header$.addClass(hb).attr(sb,"true"),z._renderColumnHeaderMenu(r,m,n,f.column.id),o>220?(p=f.column.frozen?2:1,o=f.header$.outerWidth(),s.css("min-width",o-p)):s.css("min-width","0"),s.html(r.toString()).show().position({my:"left top",at:"left+1 bottom",of:f.header$,collision:"fit",within:D.view$}),n?z._getFilterValues(f.column.id,!0,function(a){a.regions[0].filterValues&&(z._getElement("column_header_search").focus(),q=a.regions[0].filterValues,g(q),i())}):(i(),k.focus()),z._on(s,{"click button.a-IRR-sortWidget-button":function(b){var c,e,g,i,j=nc,k=a(b.currentTarget).data("option");switch(k){case"hide":D.view$.grid("hideColumn",f.column),z._currentViewColumn(f.column.id,{isVisible:!1}),z._unfreezeLastColumnWhenFrozen()?z._setReportSettings({refreshView:!0,refreshColumns:!0}):z._setReportSettings(),d({menu:s,header:f.header$});break;case"break":c=z._currentViewColumn(f.column.id),c.sort&&(j=c.sort.direction),z.addControlBreak(f.column,{isEnabled:!0,direction:j}),d({menu:s,header:f.header$});break;case"aggregate":z._openDialog(hc,{columnId:f.column.id}),d({menu:s,header:f.header$});break;case"freeze":if(e=z._currentReportSettings().views.grid.columns,D.view$.grid(f.column.frozen?"unfreezeColumn":"freezeColumn",f.column),g=f.column.frozen)for(i=0;i<e.length;i++)c=e[i],c.seq<=f.column.seq&&!c.isFrozen&&(c.isFrozen=!0,z._setOperationUpdate(c));else for(i=0;i<e.length;i++)c=e[i],c.seq>=f.column.seq&&c.isFrozen&&(c.isFrozen=!1,z._setOperationUpdate(c));z._setReportSettings(),d({menu:s,header:f.header$});break;case"help":h.popupFieldHelp(z._getColumn(f.column.id).helpid,$v("pInstance")),d({menu:s,header:f.header$})}},keydown:function(b){var c;b.which===a.ui.keyCode.ESCAPE?(d({menu:s,header:f.header$,focus:f.header$}),b.preventDefault()):b.which===a.ui.keyCode.TAB&&(c=!!b.shiftKey,!c&&a(b.target).data("last")&&(b.preventDefault(),k.focus()),c&&a(b.target).data("first")&&(b.preventDefault(),l.focus()))},"keydown input.a-IRR-sortWidget-searchField":function(b){var c,g;if(m&&b.which===a.ui.keyCode.ENTER){if(g=this._getColumn(f.column.id).filter.dataType,g===rd)try{c=apex.jQuery.timepicker.parseDateString(a(b.target).val(),this._getColumn(f.column.id).appearance.dateFormatMask),z.addFilter({type:Hb,columnType:Hb,columnId:f.column.id,operator:Kc,value:j(c),isCaseSensitive:!1})}catch(h){apex.message.alert(e.getMessage("APEX.IG.INVALID_DATE_FORMAT"))}else z.addFilter({type:Hb,columnType:Hb,columnId:f.column.id,operator:g===pd?Uc:Kc,value:a(b.target).val(),isCaseSensitive:!1});d({menu:s,header:f.header$,focus:f.header$}),b.preventDefault()}},"keyup input.a-IRR-sortWidget-searchField":function(a){if(n){var b,c=a.target.value;b=q.filter(function(a){return a.d?a.d.toLowerCase().indexOf(c.toLowerCase())>-1:a.toLowerCase().indexOf(c.toLowerCase())>-1}),g(b),i(!0)}},"click a.a-IRR-sortWidget-row":function(b){var c,e,g,h,i=a(b.currentTarget).data("returnValue");n&&(c=z._getColumn(f.column.id).filter.dataType,c===rd||c.indexOf(td)>-1?(e=i.indexOf(Ac),g=i.substring(0,e),h=i.substring(e+1),e>0&&z.addFilter({type:Hb,columnType:Hb,columnId:f.column.id,operator:g,value:h,isCaseSensitive:!1})):z.addFilter({type:Hb,columnType:Hb,columnId:f.column.id,operator:Kc,value:i,isCaseSensitive:!0}),d({menu:s,header:f.header$,focus:f.header$}),b.preventDefault())}}),z._on(z.document,{mousedown:function(b){!a(b.target).closest(s).length>0&&!a(b.target).closest(f.header$).length>0&&s.is(":visible")&&d({menu:s,header:f.header$})}}),z._on(z.window,{blur:function(a){s.is(":visible")&&d({menu:s,header:f.header$})}}))},cancelColumnHeader:function(a,b){},sortChange:function(a,b){z._ifNoChangesDo(function(){var a,c,d,e,f,g=b.column.sortIndex,h=D.view$.grid("getColumns");for(d=1,a=0;a<h.length;a++)c=h[a],c.sortIndex&&("change"===b.action?c===b.column&&(d=c.sortIndex):"add"===b.action?c.sortIndex>=d&&(d=c.sortIndex+1):"remove"===b.action?c===b.column?(delete c.sortIndex,delete c.sortDirection,e=z._currentViewColumn(b.column.id),e.sort=!1,z._setOperationUpdate(e)):c.sortIndex>g&&(c.sortIndex-=1,z._currentViewColumn(c.id,{sort:{order:c.sortIndex}})):"clear"!==b.action&&"set"!==b.action||(delete c.sortIndex,delete c.sortDirection,e=z._currentViewColumn(c.id),e.sort=!1,z._setOperationUpdate(e)));"clear"!==b.action&&"remove"!==b.action&&(b.column.sortIndex=d,b.column.sortDirection=b.direction,f=b.direction===nc?qc:pc,z._currentViewColumn(b.column.id,{sort:{order:d,direction:b.direction,nulls:f}})),z._setReportSettings({refreshModel:!0,refreshColumns:!0})})},columnReorder:function(a,b){var c,d,e=z._currentReportSettings().views.grid.columns,f=e[b.newPosition].isFrozen;for(k(e,b.oldPosition,b.newPosition),e[b.newPosition]&&(e[b.newPosition].isFrozen=f),c=0;c<e.length;c++)e[c]||e.splice(c,1);for(c=0;c<e.length;c++)d=e[c],d.seq!==c+1&&(d.seq=c+1,z._setOperationUpdate(d));z._unfreezeLastColumnWhenFrozen()?z._setReportSettings({refreshView:!0,refreshColumns:!0}):z._setReportSettings()},columnResize:function(a,b){z._currentViewColumn(b.column.id,{width:b.width}),z._setReportSettings()},modeChange:function(a,b){z.editMode=b.editMode,z.actions.update("edit")},selectionChange:function(b){var c=D.getSelectedRecords();a(".js-selectionMenu",D.view$).prop("disabled",0===c.length),z._selectionChanged(b)}},o.length>0&&(n.aggregateTooltips=this._gridAggregateTooltipsFromReport(z,c.currentReportSettings)),D.view$.grid({},s.defaultGridViewOptions,n)):(this.view$.hide(),this.singleRowMode=!0),D.supports.singleRowView&&v.singleRowView&&(D.singleRowView$=a("<div id='"+z._getId("singleRow"+Ec)+"' class='"+za+"'></div>"),D.view$.after(this.singleRowView$),i=a.apex.recordView.copyDefaultToolbar(),s.editable&&i[0].controls.unshift({type:"MENU",labelKey:"APEX.IG.SRV_CHANGE_MENU",iconOnly:!0,icon:"icon-ig-actions",menuId:z._getId("row_actions_menu")}),v.gridView&&(A.add([{name:"close-single-row-view",labelKey:"APEX.IG.REPORT_VIEW",action:function(){var a=z.editMode;a&&D.singleRowView$.recordView("setEditMode",!1),D.singleRowMode=!1,D.singleRowView$.hide(),D.view$.show().grid("resize"),a&&D.view$.grid("setEditMode",!0)}}]),i[0].controls.unshift({type:"BUTTON",action:"close-single-row-view"})),this.singleRowView$.recordView({},s.defaultSingleRowOptions,{modelName:D.modelName,actionsContext:A,toolbar:i,editable:B,autoAddRecord:!!B&&s.editable.autoAddRow,noDataMessage:s.text.noDataFound,moreDataMessage:s.text.moreDataFound,showNullAs:s.appearance.showNullValue,fields:[D.modelColumns],fieldGroups:p,hasSize:r,modeChange:function(a,b){z.editMode=b.editMode,z.actions.update("edit")},recordChange:function(a,b){z._selectionChanged(a)}}),v.gridView&&(this.singleRowView$.hide(),this.singleRowMode=!1)),s.editable&&z._updateSelectionActions()},setReportOptions:function(a,b,c){function d(){i.view$.grid("option","aggregateTooltips",i._gridAggregateTooltipsFromReport(a,b))}function e(){i.view$.grid("option","highlights",i._gridHighlightsFromReport(b))}function f(){var a,c,d=b.views.grid.columns,e=i.view$.grid("getColumns"),f=!1;for(a=0;a<d.length;a++)for(c=0;c<e.length;c++)if(e[c].id===d[a].columnId&&e[a].hidden===d[a].isVisible){e[c].canHide&&(e[c].hidden=!d[a].isVisible,f=!0);break}f&&(i.view$.grid("refreshColumns"),i.refresh())}function g(){var b=a._isCurrentlyEditable();i.model.setOption("editable",b),i.singleRowView$&&(i.singleRowView$.recordView("option","editable",b),i.singleRowView$.recordView("option","autoAddRecord",b)),i.view$.is(":apex-grid")&&(i.view$.grid("option","editable",b),i.view$.grid("option","autoAddRecord",b)),a._updateActions()}var h,i=this;h={"views.grid.aggregations":d,"views.grid.highlights":e,"views.grid.columns":f,editable:g},h[c]&&h[c]()},_initMenus:function(b,c){var d=null,e=null,f=this,g=[],h=[];b.editable&&(d=a("<div/>",{id:c._getId("row_actions_menu")}).appendTo("body"),e=a("<div/>",{id:c._getId("selection_actions_menu")}).appendTo("body"),f.supports.singleRowView&&(g.push({id:"srv",type:"action",action:"single-row-view"}),g.push({type:"separator"})),b.editable.allowedOperations.create&&(g.push({id:"ins",type:"action",action:"row-add-row"}),g.push({id:"dup",type:"action",action:"row-duplicate"}),h.push({id:"dup",type:"action",action:"selection-duplicate"}),g.push({type:"separator"}),h.push({type:"separator"})),(b.editable.allowedOperations["delete"]||b.editable.allowedOperations.create)&&g.push({id:"del",type:"action",action:"row-delete"}),b.editable.allowedOperations["delete"]&&h.push({id:"del",type:"action",action:"selection-delete"}),g.push({type:"separator"}),g.push({id:"refresh",type:"action",action:"row-refresh"}),h.push({type:"separator"}),h.push({id:"refresh",type:"action",action:"selection-refresh"}),(b.editable.allowedOperations.update||b.editable.allowedOperations["delete"])&&(g.push({id:"revert",type:"action",action:"row-revert"}),h.push({id:"revert",type:"action",action:"selection-revert"})),d.menu({actionsContext:c.actions,items:g,beforeOpen:function(a,e){var g,h=f.view$.find("."+mb+"."+hb).closest("tr");f.singleRowMode?(c._updateAction("hide","single-row-view"),g=f.getSelectedRecords()):g=f.view$.grid("getRecords",[h]),b.editable.allowedOperations.create&&(d.menu("find","dup").disabled=!f.model.allowAdd(null,"copy"),d.menu("find","ins").disabled=!f.model.allowAdd(null,"new")),(b.editable.allowedOperations.update||b.editable.allowedOperations["delete"])&&(d.menu("find","revert").disabled=!g.length||!f.model.canRevertRecord(g[0])),b.editable.allowedOperations["delete"]||c._toggleShowAction(f.model.allowDelete(g[0]),"row-delete"),b.editable.allowedOperations["delete"]&&(d.menu("find","del").disabled=!g.length||!f.model.allowDelete(g[0]))},afterClose:function(){f.singleRowMode&&c._updateAction(Lb,"single-row-view")}}),e.menu({actionsContext:c.actions,items:h,beforeOpen:function(a,c){var d,g,h=f.getSelectedRecords(),i=b.editable.allowedOperations.update||b.editable.allowedOperations["delete"],j=b.editable.allowedOperations["delete"],k=!1,l=!1;if(i||j)for(d=0;d<h.length&&(g=h[d],i&&!l&&(l=f.model.canRevertRecord(g)),j&&!k&&(k=f.model.allowDelete(g)),!k||!l);d++);i&&(e.menu("find","revert").disabled=!l),j&&(e.menu("find","del").disabled=!k)}})),f.rowActionMenu$=d,f.selActionMenu$=e},_gridAggregateLabels:function(){var b=null;return this.aggregateLabels||(this.aggregateLabels=b={},a.each(Qd,function(a,c){b[c]={label:e.getMessage("APEX.IG."+c),overallLabel:e.getMessage("APEX.IG."+c+"_OVERALL")}})),this.aggregateLabels},_gridAggregateTooltipsFromReport:function(a,b){var c,d,e=null,f=b.views.grid.aggregations;if(f.length>0)for(e={},c=0;c<f.length;c++)d=f[c],d.tooltip&&(e[d["function"]+"|"+a._getColumn(d.columnId).name]=d.tooltip);return e},_gridHighlightsFromReport:function(a){var b,c,d,e={},f=a.views.grid.highlights;for(b=0;b<f.length;b++)d=f[b],c=d.id,e[c]={seq:d.seq,row:"row"===d.type,color:d.textColor,background:d.backgroundColor};return e},destroy:function(){this.view$.is(":apex-grid")&&this.view$.grid("destroy"),this.singleRowView$.length>0&&this.singleRowView$.remove(),this.rowActionMenu$&&this.rowActionMenu$.length>0&&(this.rowActionMenu$.remove(),this.rowActionMenu$=null),this.selActionMenu$&&this.selActionMenu$.length>0&&(this.selActionMenu$.remove(),this.selActionMenu$=null)},getDataElements:function(){if(!this.singleRowMode)return this.view$.find("tr").filter("[data-id]")},getContextRecord:function(b){var c;return this.singleRowMode?[this.singleRowView$.recordView("getRecord")]:(c=a(b).closest("tr"),c.length>0?this.view$.grid("getRecords",[c]):[])},getSelectedRecords:function(){return this.singleRowMode?[this.singleRowView$.recordView("getRecord")]:this.view$.grid("getSelectedRecords")},setSelectedRecords:function(a){this.singleRowMode||this.view$.grid("setSelectedRecords",a)},setSelection:function(a){this.singleRowMode||this.view$.grid("setSelection",a)},getActiveRecordId:function(){return this.singleRowMode?this.singleRowView$.recordView("getActiveRecordId"):this.view$.grid("getActiveRecordId")},setModelName:function(a){this.singleRowView$&&this.singleRowView$.recordView("option","modelName",a),this.view$.is(":apex-grid")&&this.view$.grid("option","modelName",a)},setOption:function(a,b){this.view$.grid("option",a,b)},setEditMode:function(a){this.singleRowMode?this.singleRowView$.recordView("setEditMode",a):this.view$.grid("setEditMode",a)},setNoDataMessage:function(a){this.singleRowMode?this.singleRowView$.recordView("option","noDataMessage",a):this.view$.grid("option","noDataMessage",a)},focus:function(){this.singleRowMode?this.singleRowView$.recordView("focus"):this.view$.grid("focus")},refreshColumns:function(){this.view$.grid("refreshColumns")},footerHeight:function(){if(!this.singleRowMode)return this.view$.find(".a-GV-footer").outerHeight()||0},refresh:function(a){this.view$.is(":apex-grid")&&this.view$.grid("refresh"),this.singleRowView$&&this.singleRowView$.recordView("refresh")},resize:function(){this.singleRowMode?this.singleRowView$.recordView("resize"):this.view$.grid("resize")},show:function(){this.singleRowMode?this.singleRowView$.show():this.view$.show()},hide:function(){this.singleRowMode?this.singleRowView$.hide():this.view$.hide()}},de={setColumnConfig:function(b){var c,d,e={},f={},g=b.baseModelColumns,h=b.igConfig,i=b.ig,j=h.editable!==!1,k=0;for(d in g)g.hasOwnProperty(d)&&(k++,e=a.extend(!0,{},g[d]),d!==Dc?(c=i._getColumn(d),e.elementId=c.staticId,e.seq=k,j&&"actions"===c.specialType&&(delete e.index,e.virtual=!0,e.elementId=null),f[c.name]=e):f[Dc]=e);this.modelColumns=f,this.specialColumns={identityField:0===i.primaryKeyColumns.length?null:i.primaryKeyColumns,metaField:Dc}},init:function(a){var b=!0,c=!1,d=a.igConfig,e=a.ig;switch(d.headingFixedTo){case rc:b=!1;break;case zc:b=!1,c=!0}this.view$.tableModelView(this.viewConfig(a,{modelName:this.modelName,noDataMessage:d.text.noDataFound,moreDataMessage:d.text.moreDataFound,showNullAs:d.appearance.showNullValue,hasSize:b,columns:this.modelColumns,pagination:e._getPaginationConfig(d),rowsPerPage:a.currentReportSettings.rowsPerPage,stickyFooter:c,selectionChange:function(a){e._selectionChanged(a)}}))},getSelectedRecords:function(){return this.view$.tableModelView("getSelectedRecords")},setSelectedRecords:function(a){this.view$.tableModelView("setSelectedRecords",a)},setOption:function(a,b){this.view$.tableModelView("option",a,b)},setModelName:function(a){this.view$.tableModelView("option","modelName",a)},setNoDataMessage:function(a){this.view$.tableModelView("option","noDataMessage",a)},footerHeight:function(){return this.view$.find(".a-GV-footer").outerHeight()||0},refresh:function(a){this.view$.tableModelView("refresh")},resize:function(){this.view$.tableModelView("resize")},isConfigured:function(){return!0}};G(a.extend({},de,{title:e.getMessage("APEX.IG.ICON"),internalIdentifier:Sb,
cssClass:wa,icon:"icon-ig-icons",supports:{sort:!1},viewConfig:function(b,c){var d=b.igConfig,e=!1,f=d.views.icon;return c=a.extend(!0,{},d.defaultIconViewOptions,c),f.customIcon?(f.customIcon.trim().toLowerCase().match(/\s*<li/)?c.recordTemplate=f.customIcon:c.recordTemplate="<li>"+f.customIcon+"</li>",f.customIcon.toLowerCase().indexOf("href=")>=0&&(e=!0)):(c.labelColumn=f.labelColumn,f.iconClassColumn&&(c.iconClassColumn=f.iconClassColumn),f.imageURLColumn&&(c.imageURLColumn=f.imageURLColumn),f.imageAttributes&&(c.imageAttributes=f.imageAttributes),f.linkAttributes&&(c.linkAttributes=f.linkAttributes),f.linkTarget&&(c.linkTarget=!0,e=!0),c.linkTargetColumn&&(e=!0)),c.useIconList=!0,e&&(c.iconListOptions.navigation=!0),c.iconListOptions.contextMenu&&!c.iconListOptions.contextMenu.hasOwnProperty("actionsContext")&&(c.iconListOptions.contextMenu.actionsContext=b.ig.actions),c},focus:function(){this.view$.tableModelView("getIconList").focus()}})),G(a.extend({},ce,{title:e.getMessage("APEX.IG.GRID"),internalIdentifier:Rb,cssClass:va,icon:"icon-ig-report",supports:{edit:!0,highlight:!0,controlBreak:!0,aggregation:!0,singleRowView:!0,configurableColumns:!0,download:!0},gotoCell:function(a,b){return this.singleRowMode?this.singleRowView$.recordView("gotoField",a,b):this.view$.grid("gotoCell",a,b)},lockActive:function(){this.singleRowMode||this.view$.grid("lockActiveRow")},unlockActive:function(){this.singleRowMode||this.view$.grid("unlockActiveRow")}})),G(a.extend({},de,{title:e.getMessage("APEX.IG.DETAIL"),internalIdentifier:Tb,cssClass:xa,icon:"icon-ig-details",supports:{selection:!1,sort:!1},viewConfig:function(b,c){var d=b.igConfig,e=d.views.detail;return c.beforeTemplate=e.beforeRows,c.recordTemplate=e.row,c.afterTemplate=e.afterRows,c.useIconList=!1,a.extend(!0,{},d.defaultDetailViewOptions,c)},focus:function(){this.view$.find(":focusable").first().focus()}})),G({title:e.getMessage("APEX.IG.CHART"),internalIdentifier:Ub,cssClass:ya,icon:"icon-ig-chart",supports:{selection:!1,sort:!1,changeRowsPerPage:!1},initDialog:function(b){var c,d,f,g,h=[],i=[],j=[],k=b.options.config.columns;for(h.push({value:"",label:e.getMessage("APEX.IG.SELECT")}),i.push({value:"",label:e.getMessage("APEX.IG.SELECT")}),j.push({value:"",label:e.getMessage("APEX.IG.SELECT")}),f=0;f<k.length;f++)d=k[f],d.specialType||d.isHidden||(g||(g=d),h.push({value:d.id,label:b._getColumnLabel(d.id)}),d.dataType===qd&&i.push({value:d.id,label:b._getColumnLabel(d.id)}),d.dataType!==qd&&d.dataType!==rd||j.push({value:d.id,label:b._getColumnLabel(d.id)}));c=[{value:"",label:e.getMessage("APEX.IG.SELECT")},{value:Qd.CNT,label:e.getMessage("APEX.IG."+Qd.CNT)},{value:Qd.CNT_DIST,label:e.getMessage("APEX.IG."+Qd.CNT_DIST)},{value:Qd.APPR_CNT_DIST,label:e.getMessage("APEX.IG."+Qd.APPR_CNT_DIST)},{value:Qd.MIN,label:e.getMessage("APEX.IG."+Qd.MIN)},{value:Qd.MAX,label:e.getMessage("APEX.IG."+Qd.MAX)},{value:Qd.SUM,label:e.getMessage("APEX.IG."+Qd.SUM)},{value:Qd.AVG,label:e.getMessage("APEX.IG."+Qd.AVG)}],b._renderDialogContent(function(a){a(Fb,{id:"CH_TYPE",iconOnly:!1,options:[{value:wd,label:e.getMessage("APEX.IG.AREA"),iconCssClasses:"icon-region-chart-area"},{value:xd,label:e.getMessage("APEX.IG.BAR"),iconCssClasses:"icon-region-chart-bar"},{value:yd,label:e.getMessage("APEX.IG.BUBBLE"),iconCssClasses:"icon-region-chart-bubble"},{value:zd,label:e.getMessage("APEX.IG.DONUT"),iconCssClasses:"icon-region-chart-donut"},{value:Ad,label:e.getMessage("APEX.IG.FUNNEL"),iconCssClasses:"icon-region-chart-funnel"},{value:Bd,label:e.getMessage("APEX.IG.LINE"),iconCssClasses:"icon-region-chart-line"},{value:Cd,label:e.getMessage("APEX.IG.LINE_WITH_AREA"),iconCssClasses:"icon-region-chart-line-area"},{value:Dd,label:e.getMessage("APEX.IG.PIE"),iconCssClasses:"icon-region-chart-pie"},{value:Ed,label:e.getMessage("APEX.IG.POLAR"),iconCssClasses:"icon-region-chart-polar"},{value:Fd,label:e.getMessage("APEX.IG.RADAR"),iconCssClasses:"icon-region-chart-radar"},{value:Gd,label:e.getMessage("APEX.IG.RANGE"),iconCssClasses:"icon-region-chart-range-bar"},{value:Hd,label:e.getMessage("APEX.IG.SCATTER"),iconCssClasses:"icon-region-chart-scatter"},{value:Id,label:e.getMessage("APEX.IG.STOCK"),iconCssClasses:"icon-region-chart-stock"}]}),a(Ab,{id:"CH_ORIENTATION",options:[{value:Jd,label:e.getMessage("APEX.IG.VERTICAL")},{value:Kd,label:e.getMessage("APEX.IG.HORIZONTAL")}]}),a(Ab,{id:"CH_LABEL_COLUMN",options:h}),a(Ab,{id:"CH_VALUE_COLUMN",options:i}),a(Ab,{id:"CH_VALUE_FUNCTION",options:c}),a(Ab,{id:"CH_X_COLUMN",options:j}),a(Ab,{id:"CH_X_FUNCTION",options:c}),a(Ab,{id:"CH_Y_COLUMN",options:i}),a(Ab,{id:"CH_Y_FUNCTION",options:c}),a(Ab,{id:"CH_Z_COLUMN",options:i}),a(Ab,{id:"CH_Z_FUNCTION",options:c}),a(Ab,{id:"CH_OPEN_COLUMN",options:i}),a(Ab,{id:"CH_OPEN_FUNCTION",options:c}),a(Ab,{id:"CH_CLOSE_COLUMN",options:i}),a(Ab,{id:"CH_CLOSE_FUNCTION",options:c}),a(Ab,{id:"CH_HIGH_COLUMN",options:i}),a(Ab,{id:"CH_HIGH_FUNCTION",options:c}),a(Ab,{id:"CH_LOW_COLUMN",options:i}),a(Ab,{id:"CH_LOW_FUNCTION",options:c}),a(Ab,{id:"CH_VOLUME_COLUMN",options:i}),a(Ab,{id:"CH_VOLUME_FUNCTION",options:c}),a(Ab,{id:"CH_TARGET_COLUMN",options:i}),a(Ab,{id:"CH_TARGET_FUNCTION",options:c}),a(Ab,{id:"CH_SERIES_COLUMN",options:h}),a(Ab,{id:"CH_STACK",options:[{value:Md,label:e.getMessage("APEX.IG.OFF")},{value:Ld,label:e.getMessage("APEX.IG.ON")}]}),a(Ab,{id:"CH_SORT_BY",options:[]}),b._renderSortControls(a,"CH_SORT_"),a(zb,{id:"CH_AXIS_LABEL_TITLE",maxChars:255}),a(zb,{id:"CH_AXIS_VALUE_TITLE",maxChars:255}),a(zb,{id:"CH_AXIS_VALUE_DECIMAL"})}),this.dialog$=a.apex.recordView.createModelEditDialog(b._getId("chart-dialog"),{width:750,height:450,titleKey:"APEX.IG.CHART",modelName:b._getId("chartConfig"),labelAlignment:Jb,formCssClasses:Ka+" "+La,dialogHelp:{helpTextKey:"APEX.IG.HELP.CHART",titleKey:"APEX.IG.HELP.CHART_TITLE"},modelOptions:{shape:"record",editable:!0,onlyMarkForDelete:!1,identityField:"id",fields:{id:{canHide:!1,hidden:!0,seq:"0"},type:{label:e.getMessage("APEX.IG.TYPE"),elementId:b._getId("CH_TYPE"),seq:"10",defaultValue:xd},orientationId:{label:e.getMessage("APEX.IG.ORIENTATION"),elementId:b._getId("CH_ORIENTATION"),seq:"20",fieldColSpan:7,defaultValue:Jd},labelColumnId:{label:e.getMessage("APEX.IG.LABEL_COLUMN"),elementId:b._getId("CH_LABEL_COLUMN"),seq:"30",fieldColSpan:7,defaultValue:""},valueColumnId:{label:e.getMessage("APEX.IG.VALUE_COLUMN"),elementId:b._getId("CH_VALUE_COLUMN"),seq:"40",fieldColSpan:7,defaultValue:""},valueFunctionId:{label:e.getMessage("APEX.IG.AGGREGATION"),elementId:b._getId("CH_VALUE_FUNCTION"),seq:"45",fieldColSpan:5,defaultValue:""},xColumnId:{label:e.getMessage("APEX.IG.X_COLUMN"),elementId:b._getId("CH_X_COLUMN"),seq:"50",fieldColSpan:7,defaultValue:""},xFunctionId:{label:e.getMessage("APEX.IG.AGGREGATION"),elementId:b._getId("CH_X_FUNCTION"),seq:"55",fieldColSpan:5,defaultValue:""},yColumnId:{label:e.getMessage("APEX.IG.Y_COLUMN"),elementId:b._getId("CH_Y_COLUMN"),seq:"60",fieldColSpan:7,defaultValue:""},yFunctionId:{label:e.getMessage("APEX.IG.AGGREGATION"),elementId:b._getId("CH_Y_FUNCTION"),seq:"65",fieldColSpan:5,defaultValue:""},openColumnId:{label:e.getMessage("APEX.IG.OPEN_COLUMN"),elementId:b._getId("CH_OPEN_COLUMN"),seq:"70",fieldColSpan:7,defaultValue:""},openFunctionId:{label:e.getMessage("APEX.IG.AGGREGATION"),elementId:b._getId("CH_OPEN_FUNCTION"),seq:"75",fieldColSpan:5,defaultValue:""},closeColumnId:{label:e.getMessage("APEX.IG.CLOSE_COLUMN"),elementId:b._getId("CH_CLOSE_COLUMN"),seq:"80",fieldColSpan:7,defaultValue:""},closeFunctionId:{label:e.getMessage("APEX.IG.AGGREGATION"),elementId:b._getId("CH_CLOSE_FUNCTION"),seq:"85",fieldColSpan:5,defaultValue:""},highColumnId:{label:e.getMessage("APEX.IG.HIGH_COLUMN"),elementId:b._getId("CH_HIGH_COLUMN"),seq:"90",fieldColSpan:7,defaultValue:""},highFunctionId:{label:e.getMessage("APEX.IG.AGGREGATION"),elementId:b._getId("CH_HIGH_FUNCTION"),seq:"95",fieldColSpan:5,defaultValue:""},lowColumnId:{label:e.getMessage("APEX.IG.LOW_COLUMN"),elementId:b._getId("CH_LOW_COLUMN"),seq:"100",fieldColSpan:7,defaultValue:""},lowFunctionId:{label:e.getMessage("APEX.IG.AGGREGATION"),elementId:b._getId("CH_LOW_FUNCTION"),seq:"105",fieldColSpan:5,defaultValue:""},volumeColumnId:{label:e.getMessage("APEX.IG.VOLUME_COLUMN"),elementId:b._getId("CH_VOLUME_COLUMN"),seq:"110",fieldColSpan:7,defaultValue:""},volumeFunctionId:{label:e.getMessage("APEX.IG.AGGREGATION"),elementId:b._getId("CH_VOLUME_FUNCTION"),seq:"115",fieldColSpan:5,defaultValue:""},targetColumnId:{label:e.getMessage("APEX.IG.TARGET_COLUMN"),elementId:b._getId("CH_TARGET_COLUMN"),seq:"120",fieldColSpan:7,defaultValue:""},targetFunctionId:{label:e.getMessage("APEX.IG.AGGREGATION"),elementId:b._getId("CH_TARGET_FUNCTION"),seq:"125",fieldColSpan:5,defaultValue:""},zColumnId:{label:e.getMessage("APEX.IG.Z_COLUMN"),elementId:b._getId("CH_Z_COLUMN"),seq:"130",fieldColSpan:7,defaultValue:""},zFunctionId:{label:e.getMessage("APEX.IG.AGGREGATION"),elementId:b._getId("CH_Z_FUNCTION"),seq:"135",fieldColSpan:5,defaultValue:""},seriesColumnId:{label:e.getMessage("APEX.IG.SERIES_COLUMN"),elementId:b._getId("CH_SERIES_COLUMN"),seq:"140",fieldColSpan:7,defaultValue:""},stackId:{label:e.getMessage("APEX.IG.STACK"),elementId:b._getId("CH_STACK"),seq:"143",fieldColSpan:5,defaultValue:Md},sortBy:{label:e.getMessage("APEX.IG.SORT_BY"),elementId:b._getId("CH_SORT_BY"),seq:"145",fieldColSpan:7,defaultValue:e.getMessage("APEX.IG.LABEL_COLUMN")},sortDirection:{label:e.getMessage("APEX.IG.DIRECTION"),elementId:b._getId("CH_SORT_DIRECTION"),seq:"147",fieldColSpan:3,defaultValue:nc},sortNulls:{label:e.getMessage("APEX.IG.NULLS"),elementId:b._getId("CH_SORT_NULLS"),seq:"149",fieldColSpan:2,defaultValue:qc},axisLabelTitle:{label:e.getMessage("APEX.IG.AXIS_LABEL_TITLE"),elementId:b._getId("CH_AXIS_LABEL_TITLE"),seq:"150",fieldColSpan:7},axisValueTitle:{label:e.getMessage("APEX.IG.AXIS_VALUE_TITLE"),elementId:b._getId("CH_AXIS_VALUE_TITLE"),seq:"170",fieldColSpan:7},axisValueDecimal:{label:e.getMessage("APEX.IG.AXIS_VALUE_DECIMAL"),elementId:b._getId("CH_AXIS_VALUE_DECIMAL"),seq:"180",fieldColSpan:3}}},init:function(c,d,f){function g(){var b=l.val();m.val();switch(D([m,n,o,p,q,r,t,u,v,w,x,y,z,A,B,E,G,H,I,J,K,L,M,N,O,P,Q,R,S,T]),h(),i=[m,n,o,z,A,H,B,E,G,R,S,T],j=[n,o,H,R,S,T],b){case wd:C(i),F([n,o],!0),F([p,q,r,t,u,v,w],!1),R.empty(),k={},k[Td.LABEL]=e.getMessage("APEX.IG.LABEL_COLUMN"),k[Td.VALUE]=e.getMessage("APEX.IG.VALUE_COLUMN"),a.each(k,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))});break;case xd:C([m,n,o,r,z,A,H,K,B,E,G,R,S,T]),F([n,o],!0),F([p,q,r,t,u,v,w],!1),U=R.val(),R.empty(),k={},k[Td.LABEL]=e.getMessage("APEX.IG.LABEL_COLUMN"),k[Td.VALUE]=e.getMessage("APEX.IG.VALUE_COLUMN"),k[Td.Z]=e.getMessage("APEX.IG.Z_COLUMN"),a.each(k,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))}),null===U&&""===U||R.val(U);break;case yd:C([n,p,q,r,I,J,K,B,E,G,R,S,T]),F([n,p,q,r],!0),F([o,t,u,v,w],!1),U=R.val(),R.empty(),k={},k[Td.LABEL]=e.getMessage("APEX.IG.LABEL_COLUMN"),k[Td.X]=e.getMessage("APEX.IG.X_COLUMN"),k[Td.Y]=e.getMessage("APEX.IG.Y_COLUMN"),k[Td.Z]=e.getMessage("APEX.IG.Z_COLUMN"),a.each(k,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))}),null===U&&""===U||R.val(U);break;case zd:C([n,o,H,R,S,T,G]),F([n,o],!0),F([p,q,r,t,u,v,w],!1),U=R.val(),R.empty(),k={},k[Td.LABEL]=e.getMessage("APEX.IG.LABEL_COLUMN"),k[Td.VALUE]=e.getMessage("APEX.IG.VALUE_COLUMN"),a.each(k,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))}),null===U&&""===U||R.val(U);break;case Ad:C([m,n,o,y,H,Q,R,S,T]),F([n,o],!0),F([p,q,r,t,u,v,w],!1),U=R.val(),R.empty(),k={},k[Td.LABEL]=e.getMessage("APEX.IG.LABEL_COLUMN"),k[Td.VALUE]=e.getMessage("APEX.IG.VALUE_COLUMN"),k[Td.TARGET]=e.getMessage("APEX.IG.TARGET_COLUMN"),a.each(k,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))}),null===U&&""===U||R.val(U);break;case Bd:C(i),F([n,o],!0),F([p,q,r,t,u,v,w],!1),U=R.val(),R.empty(),k={},k[Td.LABEL]=e.getMessage("APEX.IG.LABEL_COLUMN"),k[Td.VALUE]=e.getMessage("APEX.IG.VALUE_COLUMN"),a.each(k,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))}),null===U&&""===U||R.val(U);break;case Cd:C(i),F([n,o],!0),F([p,q,r,t,u,v,w],!1),U=R.val(),R.empty(),k={},k[Td.LABEL]=e.getMessage("APEX.IG.LABEL_COLUMN"),k[Td.VALUE]=e.getMessage("APEX.IG.VALUE_COLUMN"),a.each(k,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))}),null===U&&""===U||R.val(U);break;case Dd:C([n,o,H,G,R,S,T]),F([n,o],!0),F([p,q,r,t,u,v,w],!1);break;case Ed:C(j),F([n,o],!0),F([p,q,r,t,u,v,w],!1),U=R.val(),R.empty(),k={},k[Td.LABEL]=e.getMessage("APEX.IG.LABEL_COLUMN"),k[Td.VALUE]=e.getMessage("APEX.IG.VALUE_COLUMN"),a.each(k,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))}),null===U&&""===U||R.val(U);break;case Fd:C(j),F([n,o],!0),F([p,q,r,t,u,v,w],!1),U=R.val(),R.empty(),k={},k[Td.LABEL]=e.getMessage("APEX.IG.LABEL_COLUMN"),k[Td.VALUE]=e.getMessage("APEX.IG.VALUE_COLUMN"),a.each(k,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))}),null===U&&""===U||R.val(U);break;case Gd:C([m,n,v,w,r,z,N,O,K,B,E,G,R,S,T]),F([v,w],!0),F([n,o,p,q,r,t,u],!1),U=R.val(),R.empty(),k={},k[Td.LABEL]=e.getMessage("APEX.IG.LABEL_COLUMN"),k[Td.HIGH]=e.getMessage("APEX.IG.HIGH_COLUMN"),k[Td.LOW]=e.getMessage("APEX.IG.LOW_COLUMN"),k[Td.Z]=e.getMessage("APEX.IG.Z_COLUMN"),a.each(k,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))}),null===U&&""===U||R.val(U);break;case Id:C([n,t,u,v,w,x,L,M,N,O,P]),F([n,t,u,v,w],!0),F([o,p,q,r],!1);break;case Hd:C([n,p,q,z,I,J,B,E,G,R,S,T]),F([n,p,q],!0),F([o,r,t,u,v,w],!1),U=R.val(),R.empty(),k={},k[Td.LABEL]=e.getMessage("APEX.IG.LABEL_COLUMN"),k[Td.X]=e.getMessage("APEX.IG.X_COLUMN"),k[Td.Y]=e.getMessage("APEX.IG.Y_COLUMN"),a.each(k,function(b,c){R.append(a("<option></option>").attr("value",b).text(c))}),null===U&&""===U||R.val(U)}}function h(){c.setValue(f.recordView("getRecord"),"sortBy",R.val()),c.setValue(f.recordView("getRecord"),"sortDirection",S.val()),c.setValue(f.recordView("getRecord"),"sortNulls",T.val()),c.setValue(f.recordView("getRecord"),"orientationId",m.val()),c.setValue(f.recordView("getRecord"),"stackId",A.val())}var i,j,k={},l=b._getElement("CH_TYPE"),m=b._getElement("CH_ORIENTATION"),n=b._getElement("CH_LABEL_COLUMN"),o=b._getElement("CH_VALUE_COLUMN"),p=b._getElement("CH_X_COLUMN"),q=b._getElement("CH_Y_COLUMN"),r=b._getElement("CH_Z_COLUMN"),t=b._getElement("CH_OPEN_COLUMN"),u=b._getElement("CH_CLOSE_COLUMN"),v=b._getElement("CH_HIGH_COLUMN"),w=b._getElement("CH_LOW_COLUMN"),x=b._getElement("CH_VOLUME_COLUMN"),y=b._getElement("CH_TARGET_COLUMN"),z=b._getElement("CH_SERIES_COLUMN"),A=b._getElement("CH_STACK"),B=b._getElement("CH_AXIS_LABEL_TITLE"),E=b._getElement("CH_AXIS_VALUE_TITLE"),G=b._getElement("CH_AXIS_VALUE_DECIMAL"),H=b._getElement("CH_VALUE_FUNCTION"),I=b._getElement("CH_X_FUNCTION"),J=b._getElement("CH_Y_FUNCTION"),K=b._getElement("CH_Z_FUNCTION"),L=b._getElement("CH_OPEN_FUNCTION"),M=b._getElement("CH_CLOSE_FUNCTION"),N=b._getElement("CH_HIGH_FUNCTION"),O=b._getElement("CH_LOW_FUNCTION"),P=b._getElement("CH_VOLUME_FUNCTION"),Q=b._getElement("CH_TARGET_FUNCTION"),R=b._getElement("CH_SORT_BY"),S=b._getElement("CH_SORT_DIRECTION"),T=b._getElement("CH_SORT_NULLS"),U=R.val();l.change(g),f.on("apexbeginrecordedit",function(a,c){var d=l.val();s(b._getId("CH_TYPE"),d),g()})},load:function(c){var d,e,f=a.extend({},b.getChart());f.axis&&(f.axis.label&&(f.axisLabelTitle=f.axis.label),f.axis.value&&(f.axisValueTitle=f.axis.value),f.axis.valueDecimalPlaces&&(f.axisValueDecimal=f.axis.valueDecimalPlaces),delete f.axis),f.stackId=f.stack,delete f.stack,f.orientationId=f.orientation,delete f.orientation;for(d in f.chartColumns)if(f.chartColumns.hasOwnProperty(d))switch(e=f.chartColumns[d],d){case"LABEL":f.type in{bar:1,bubble:1,area:1,funnel:1,pie:1,donut:1,polar:1,radar:1,line:1,lineWithArea:1,range:1,stock:1,scatter:1}&&(f.labelColumnId=e.columnId,e.sort&&(f.sortBy="LABEL",f.sortDirection=e.sort.direction,f.sortNulls=e.sort.nulls));break;case"VALUE":f.valueColumnId=e.columnId,e["function"]&&(f.valueFunctionId=e["function"]),e.sort&&(f.sortBy="VALUE",f.sortDirection=e.sort.direction,f.sortNulls=e.sort.nulls);break;case"X":f.xColumnId=e.columnId,e["function"]&&(f.xFunctionId=e["function"]),e.sort&&(f.sortBy="X",f.sortDirection=e.sort.direction,f.sortNulls=e.sort.nulls);break;case"Y":f.yColumnId=e.columnId,e["function"]&&(f.yFunctionId=e["function"]),e.sort&&(f.sortBy="Y",f.sortDirection=e.sort.direction,f.sortNulls=e.sort.nulls);break;case"Z":f.zColumnId=e.columnId,e["function"]&&(f.zFunctionId=e["function"]),e.sort&&(f.sortBy="Z",f.sortDirection=e.sort.direction,f.sortNulls=e.sort.nulls);break;case"OPEN":f.openColumnId=e.columnId,e["function"]&&(f.openFunctionId=e["function"]);break;case"CLOSE":f.closeColumnId=e.columnId,e["function"]&&(f.closeFunctionId=e["function"]);break;case"HIGH":f.highColumnId=e.columnId,e["function"]&&(f.highFunctionId=e["function"]),e.sort&&(f.sortBy="HIGH",f.sortDirection=e.sort.direction,f.sortNulls=e.sort.nulls);break;case"LOW":f.lowColumnId=e.columnId,e["function"]&&(f.lowFunctionId=e["function"]),e.sort&&(f.sortBy="LOW",f.sortDirection=e.sort.direction,f.sortNulls=e.sort.nulls);break;case"VOLUME":f.volumeColumnId=e.columnId,e["function"]&&(f.volumeFunctionId=e["function"]);break;case"TARGET":f.targetColumnId=e.columnId,e["function"]&&(f.targetFunctionId=e),e.sort&&(f.sortBy="TARGET",f.sortDirection=e.sort.direction,f.sortNulls=e.sort.nulls);break;case"SERIES_NAME":f.seriesColumnId=e.columnId}delete f.chartColumns,c.setData(f)},validate:function(a){var b,c=!0,d=a.getRecord();return d.sortBy&&(b=d.sortBy.toLowerCase()+"ColumnId",d.hasOwnProperty(b)?a.setValidity("valid",d.sortBy,"sortBy"):(a.setValidity("error",d.sortBy,"sortBy",e.formatMessage("APEX.IG.INVALID_SORT_BY",d.sortBy)),c=!1)),c},store:function(c){var d,e,f,g,h,i,j,k,l,m,n,o,p=a.extend({},c.getRecord());p.axis={},p.axis={label:p.axisLabelTitle,value:p.axisValueTitle,valueDecimalPlaces:p.axisValueDecimal},delete p.axisLabelTitle,delete p.axisValueTitle,delete p.axisValueDecimal,p.stack=p.stackId,p.orientation=p.orientationId,p.chartColumns={},p.type in{bar:1,bubble:1,area:1,funnel:1,pie:1,donut:1,polar:1,radar:1,line:1,lineWithArea:1,range:1,stock:1,scatter:1}?p.labelColumnId&&(d={columnId:p.labelColumnId,columnType:Hb},"LABEL"===p.sortBy&&(d.sort={order:1,direction:p.sortDirection,nulls:p.sortNulls}),p.chartColumns.LABEL=d):delete p.chartColumns.LABEL,p.type in{bar:1,area:1,funnel:1,pie:1,donut:1,polar:1,radar:1,line:1,lineWithArea:1}?p.valueColumnId&&(e={columnId:p.valueColumnId,columnType:Hb},"VALUE"===p.sortBy&&(e.sort={order:1,direction:p.sortDirection,nulls:p.sortNulls}),p.valueFunctionId&&(e["function"]=p.valueFunctionId),p.chartColumns.VALUE=e):delete p.chartColumns.VALUE,p.type in{bubble:1,scatter:1}?(p.xColumnId&&(f={columnId:p.xColumnId,columnType:Hb},"X"===p.sortBy&&(f.sort={order:1,direction:p.sortDirection,nulls:p.sortNulls}),p.xFunctionId&&(f["function"]=p.xFunctionId),p.chartColumns.X=f),p.yColumnId&&(g={columnId:p.yColumnId,columnType:Hb},"Y"===p.sortBy&&(g.sort={order:1,direction:p.sortDirection,nulls:p.sortNulls}),p.yFunctionId&&(g["function"]=p.yFunctionId),p.chartColumns.Y=g)):(delete p.chartColumns.X,delete p.chartColumns.Y),p.type in{bar:1,bubble:1}?p.zColumnId&&(h={columnId:p.zColumnId,columnType:Hb},"Z"===p.sortBy&&(h.sort={order:1,direction:p.sortDirection,nulls:p.sortNulls}),p.zFunctionId&&(h["function"]=p.zFunctionId),p.chartColumns.Z=h):delete p.chartColumns.Z,"stock"===p.type?(p.openColumnId&&(i={columnId:p.openColumnId,columnType:Hb},p.openFunctionId&&(i["function"]=p.openFunctionId),p.chartColumns.OPEN=i),p.closeColumnId&&(j={columnId:p.closeColumnId,columnType:Hb},p.closeFunctionId&&(j["function"]=p.closeFunctionId),p.chartColumns.CLOSE=j),p.volumeColumnId&&(m={columnId:p.volumeColumnId,columnType:Hb},p.volumeFunctionId&&(m["function"]=p.volumeFunctionId),p.chartColumns.VOLUME=m)):(delete p.chartColumns.OPEN,delete p.chartColumns.CLOSE,delete p.chartColumns.VOLUME),p.type in{range:1,stock:1}?(p.highColumnId&&(k={columnId:p.highColumnId,columnType:Hb},"HIGH"===p.sortBy&&(k.sort={order:1,direction:p.sortDirection,nulls:p.sortNulls}),p.highFunctionId&&(k["function"]=p.highFunctionId),p.chartColumns.HIGH=k),p.lowColumnId&&(l={columnId:p.lowColumnId,columnType:Hb},"LOW"===p.sortBy&&(l.sort={order:1,direction:p.sortDirection,nulls:p.sortNulls}),p.lowFunctionId&&(l["function"]=p.lowFunctionId),p.chartColumns.LOW=l)):(delete p.chartColumns.HIGH,delete p.chartColumns.LOW),"funnel"===p.type?p.targetColumnId&&(n={columnId:p.targetColumnId,columnType:Hb},"TARGET"===p.sortBy&&(n.sort={order:1,direction:p.sortDirection,nulls:p.sortNulls}),p.targetFunctionId&&(n["function"]=p.targetFunctionId),p.chartColumns.TARGET=n):delete p.chartColumns.TARGET,p.seriesColumnId&&(o={columnId:p.seriesColumnId,columnType:Hb},p.chartColumns.SERIES_NAME=o),delete p.sortBy,delete p.sortDirection,delete p.sortNulls,delete p.stackId,delete p.orientationId,delete p.xColumnId,delete p.xFunctionId,delete p.yFunctionId,delete p.yColumnId,delete p.valueColumnId,delete p.valueFunctionId,delete p.labelColumnId,delete p.zColumnId,delete p.zFunctionId,delete p.openColumnId,delete p.openFunctionId,delete p.closeColumnId,delete p.closeFunctionId,delete p.volumeColumnId,delete p.volumeFunctionId,delete p.highColumnId,delete p.highFunctionId,delete p.lowColumnId,delete p.lowFunctionId,delete p.targetColumnId,delete p.targetFunctionId,delete p.seriesColumnId,b.setChart(p)}})},setColumnConfig:function(b){var c,d,e={},f={},g=b.baseModelColumns,h=b.ig,i=b.currentReportSettings.views.chart.chartColumns,j=["CLOSE","HIGH","LABEL","LOW","OPEN","SERIES_NAME","TARGET","VALUE","VOLUME","X","Y","Z"],k=0;for(d=0;d<j.length;d++)i.hasOwnProperty(j[d])&&(e=a.extend(!0,{},g[i[j[d]].columnId]),c=h._getColumn(i[j[d]].columnId),e.seq=k,e.index=k,f[j[d]]=e,k++);this.modelColumns=f,this.specialColumns={}},init:function(b){var d,e,f,g,h,i,j,k,l,m,n,o=b.ig,p=this,q=o._currentReportSettings().views.chart,r=b.igConfig,s=[],t="disabled";require(["ojs/ojcore","ojs/ojchart"],function(){function b(a){var b,c=oj.ConverterFactory.CONVERTER_TYPE_NUMBER,d=o._getColumn(a);return d.filter.dataType===rd||d.filter.dataType===td||d.filter.dataType===ud||d.filter.dataType===vd?(c=oj.ConverterFactory.CONVERTER_TYPE_DATETIME,b=u(d)):d.filter.dataType===qd&&(b=v(d)),b?oj.Validation.converterFactory(c).createConverter(b):{}}function u(b){var c=b.appearance.formatMask;return c?a.each(Vd,function(a,b){b.value===c&&(c=b.label)}):c={formatType:"date",dateFormat:"medium"},c}function v(b){var c,d=b.appearance.formatExample.trim();return q.axis&&q.axis.valueDecimalPlaces&&(c=q.axis.valueDecimalPlaces),d?a.each(Ud,function(a,b){b.value===d&&(d=b.label)}):d={style:"decimal",maximumFractionDigits:c?c:2},d}function w(){e=p.model,e.fetch(0,function(a){a&&c.warn("No data fetched for chart");e.transform({offset:0,template:s},g);h.ojChart("refresh"),p.resize()})}switch(q.chartColumns.LABEL.columnId&&(j=o._getColumn(q.chartColumns.LABEL.columnId),j.filter.dataType!==rd&&j.filter.dataType!==td&&j.filter.dataType!==ud&&j.filter.dataType!==vd||(t="enabled")),f={legend:{rendered:"auto",position:"end"},orientation:q.orientation,stack:q.stack,animationOnDisplay:"auto",animationOnDataChange:"auto",hoverBehavior:"dim",groups:[],series:[],valueFormats:[],timeAxisType:t},q.type){case"area":g=a.extend({},f,{type:q.type,legend:q.chartColumns.SERIES_NAME?{rendered:"auto"}:{rendered:"off"},coordinateSystem:"cartesian",valueFormats:[{type:"label",converter:b(q.chartColumns.LABEL.columnId)},{type:"y",converter:b(q.chartColumns.VALUE.columnId)}],xAxis:{},yAxis:{}});break;case"bar":g=a.extend({},f,{type:q.type,legend:q.chartColumns.SERIES_NAME?{rendered:"auto"}:{rendered:"off"},coordinateSystem:"cartesian",valueFormats:[{type:"label",converter:b(q.chartColumns.LABEL.columnId)},{type:"y",converter:b(q.chartColumns.VALUE.columnId)}],xAxis:{},yAxis:{}});break;case"bubble":g=a.extend({},f,{type:q.type,legend:{rendered:"off"},coordinateSystem:"cartesian",xAxis:{},yAxis:{}});break;case"donut":g=a.extend({},f,{type:"pie",styleDefaults:{pieInnerRadius:.5},legend:{rendered:"auto"},hideAndShowBehavior:"withRescale",valueFormats:[{type:"label",converter:b(q.chartColumns.LABEL.columnId)},{type:"value",converter:b(q.chartColumns.VALUE.columnId)}]});break;case"pie":g=a.extend({},f,{type:q.type,styleDefaults:{pieInnerRadius:0},legend:{rendered:"auto"},hideAndShowBehavior:"withRescale",valueFormats:[{type:"label",converter:b(q.chartColumns.LABEL.columnId)},{type:"value",converter:b(q.chartColumns.VALUE.columnId)}]});break;case"funnel":g=a.extend({},f,{type:q.type,legend:{rendered:"auto"},valueFormats:[{type:"label",converter:b(q.chartColumns.LABEL.columnId)},{type:"value",converter:b(q.chartColumns.VALUE.columnId)}]}),q.chartColumns.TARGET&&g.valueFormats.push({type:"target",converter:b(q.chartColumns.TARGET.columnId)});break;case"line":g=a.extend({},f,{type:q.type,legend:q.chartColumns.SERIES_NAME?{rendered:"auto"}:{rendered:"off"},coordinateSystem:"cartesian",valueFormats:[{type:"label",converter:b(q.chartColumns.LABEL.columnId)},{type:"value",converter:b(q.chartColumns.VALUE.columnId)}],xAxis:{},yAxis:{}});break;case"lineWithArea":g=a.extend({},f,{type:q.type,legend:q.chartColumns.SERIES_NAME?{rendered:"auto"}:{rendered:"off"},coordinateSystem:"cartesian",valueFormats:[{type:"label",converter:b(q.chartColumns.LABEL.columnId)},{type:"value",converter:b(q.chartColumns.VALUE.columnId)}],xAxis:{},yAxis:{}});break;case"polar":g=a.extend({},f,{type:"bar",coordinateSystem:q.type,legend:{rendered:"off"},valueFormats:[{type:"label",converter:b(q.chartColumns.LABEL.columnId)},{type:"value",converter:b(q.chartColumns.VALUE.columnId)}],polarGridShape:"circle",stack:"on"});break;case"radar":g=a.extend({},f,{type:"area",coordinateSystem:"polar",legend:{rendered:"off"},valueFormats:[{type:"label",converter:b(q.chartColumns.LABEL.columnId)},{type:"value",converter:b(q.chartColumns.VALUE.columnId)}],polarGridShape:"polygon",stack:"on"});break;case"range":g=a.extend({},f,{type:"bar",legend:q.chartColumns.SERIES_NAME?{rendered:"auto"}:{rendered:"off"},valueFormats:[{type:"label",converter:b(q.chartColumns.LABEL.columnId)},{type:"high",converter:b(q.chartColumns.HIGH.columnId)},{type:"low",converter:b(q.chartColumns.LOW.columnId)}],xAxis:{},yAxis:{}});break;case"scatter":g=a.extend({},f,{type:q.type,legend:q.chartColumns.SERIES_NAME?{rendered:"auto"}:{rendered:"off"},coordinateSystem:"cartesian",valueFormats:[{type:"label",converter:b(q.chartColumns.LABEL.columnId)},{type:"x",converter:b(q.chartColumns.X.columnId)},{type:"y",converter:b(q.chartColumns.Y.columnId)}],xAxis:{},yAxis:{}});break;case"stock":g=a.extend({},f,{type:q.type,zoomAndScroll:"delayed",initialZooming:"first",legend:{rendered:"auto"},dataCursor:"on",dataCursorBehavior:"smooth",valueFormats:[{type:"label",converter:b(q.chartColumns.LABEL.columnId)},{type:"high",converter:b(q.chartColumns.HIGH.columnId)},{type:"low",converter:b(q.chartColumns.LOW.columnId)},{type:"open",converter:b(q.chartColumns.OPEN.columnId)},{type:"close",converter:b(q.chartColumns.CLOSE.columnId)}],xAxis:{},yAxis:{}}),q.chartColumns.VOLUME&&g.valueFormats.push({type:"volume",converter:b(q.chartColumns.VOLUME.columnId)}),g.series.type="candlestick"}if(q.type in{area:1,bar:1,bubble:1,line:1,lineWithArea:1,range:1,stock:1,scatter:1}){switch(q.type){case"stock":k=q.chartColumns.OPEN.columnId;break;case"range":k=q.chartColumns.HIGH.columnId;break;case"scatter":k=q.chartColumns.X.columnId;break;case"bubble":k=q.chartColumns.X.columnId;break;default:k=q.chartColumns.VALUE.columnId}q.axis&&(q.axis.label&&(l=q.axis.label),q.axis.value&&(m=q.axis.value)),g.xAxis={title:l,baselineScaling:"zero",majorTick:{rendered:"on"},minorTick:{rendered:"off"},tickLabel:{rendered:"on",converter:b(q.chartColumns.LABEL.columnId),scaling:"none"},position:"auto",rotation:"off"},g.yAxis={title:m,baselineScaling:"zero",position:"stock"===q.type?"end":"auto",majorTick:{rendered:"on"},minorTick:{rendered:"off"},tickLabel:{rendered:"on",converter:b(k),scaling:"none"}}}if(q.type in{bar:1,area:1,polar:1,radar:1,range:1,line:1,lineWithArea:1,bubble:1,scatter:1,stock:1}){switch(d={path:"groups",uniqueIndexField:"LABEL",item:{name:"LABEL"}},q.type){case"bubble":i={name:"LABEL",x:"X",y:"Y",z:"Z",labelPosition:"'none'"};break;case"scatter":i={name:"LABEL",x:"X",y:"Y",labelPosition:"'none'"};break;case"stock":i={name:"LABEL",open:"OPEN",close:"CLOSE",high:"HIGH",low:"LOW",volume:"VOLUME"};break;case"range":i={name:"LABEL",high:"HIGH",low:"LOW",labelPosition:"'none'"};break;default:i={label:"VALUE",value:"VALUE",name:"LABEL",labelPosition:"'none'"}}s=q.chartColumns.SERIES_NAME?[d,{path:"series",uniqueIndexField:"SERIES_NAME",item:{name:"SERIES_NAME",displayInLegend:"on"}},{path:"series/[SERIES_NAME]/items",item:i}]:[d,{path:"series/0/items",item:i}]}q.type in{pie:1,donut:1,funnel:1}&&(n=p.model.getFieldKey("LABEL"),s=[{path:"series",uniqueIndexField:"LABEL",item:function(a,b){return{name:""+b[n],displayInLegend:"on"}}},{path:"series/[LABEL]/items",item:{value:"VALUE",targetValue:"TARGET"}}]),h=a("#"+r.regionStaticId+"_ig_chart_view_container").ojChart(g),a("#"+r.regionStaticId+"_ig_chart_view_container").css("width","100%"),a("#"+r.regionStaticId+"_ig_chart_view_container").css("max-width","100%"),a("#"+r.regionStaticId+"_ig_chart_view_container").css("height",r.maxHeight?r.maxHeight:"450px"),w()})},resize:function(){this.view$.hasClass("oj-chart")&&this.view$.ojChart("refresh")},destroy:function(){this.view$.ojChart("destroy")}})}(apex.jQuery,apex.util,apex.debug,apex.server,apex.lang,apex.actions,apex.region,apex.theme);